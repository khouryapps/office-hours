{"version":3,"sources":["webpack:////home/runner/work/office-hours/office-hours/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/process/browser.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?93f4","webpack:////home/runner/work/office-hours/office-hours/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/node_modules/error-stack-parser/error-stack-parser.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/promise-polyfill/src/finally.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/promise-polyfill/src/index.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/polyfills.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/utils.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/patching/patch-utils.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/constants.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/patching/xhr-patch.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/patching/event-target-patch.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/event-handler.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/patching/index.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/patching/fetch-patch.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/patching/history-patch.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/state.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/bootstrap.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/error-logging/stack-trace.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/url.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/context.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/truncate.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/error-logging/error-logging.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/queue.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/ndjson.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/span-base.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/span.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/capture-navigation.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/compress.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/apm-server.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/throttle.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/config-service.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/service-factory.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/logging-service.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/performance-monitoring.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/breakdown.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/transaction.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/metrics.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/transaction-service.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/index.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/index.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/error-logging/index.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum/dist/es/apm-base.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/dist/es/common/instrument.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum/dist/es/index.js","webpack:///./components/common/Footer.tsx","webpack:///./components/common/ErrorBoundary.tsx","webpack:///./pages/_app.tsx","webpack:////home/runner/work/office-hours/office-hours/node_modules/@elastic/apm-rum-core/node_modules/stackframe/stackframe.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:////home/runner/work/office-hours/office-hours/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","_inherits","subClass","superClass","TypeError","Object","create","value","writable","configurable","_classCallCheck","instance","Constructor","cachedSetTimeout","cachedClearTimeout","process","module","exports","defaultSetTimout","Error","defaultClearTimeout","runTimeout","fun","setTimeout","e","call","this","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","length","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","args","Array","arguments","i","push","apply","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","name","binding","cwd","chdir","dir","umask","_possibleConstructorReturn","self","_defineProperties","target","props","descriptor","enumerable","defineProperty","key","_createClass","protoProps","staticProps","window","__NEXT_P","_setPrototypeOf","o","p","setPrototypeOf","__proto__","StackFrame","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","_map","fn","thisArg","map","output","_filter","filter","parse","error","stacktrace","parseOpera","stack","match","parseV8OrIE","parseFFOrSafari","extractLocation","urlLike","indexOf","parts","exec","replace","undefined","split","line","tokens","slice","locationParts","pop","functionName","join","fileName","_indexOf","message","parseOpera9","parseOpera11","parseOpera10","lineRE","lines","result","argsRaw","functionCall","shift","callback","then","resolve","reason","reject","setTimeoutFunc","isArray","x","Boolean","Promise","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","promise","newValue","finale","_unhandledRejectionFn","Handler","done","ex","prom","all","arr","remaining","res","val","race","setImmediate","err","console","warn","local","isBrowser","PERF","performance","byteToHex","toString","substr","Uint8Array","generateRandomId","buffer","hexOctets","_i","bytesToHex","crypto","getRandomValues","msCrypto","checkSameOrigin","source","isSame","forEach","t","isPlatformSupported","JSON","stringify","Function","bind","now","XMLHttpRequest","setLabel","skey","removeInvalidChars","valueType","String","stripQueryStringFromUrl","url","isObject","baseExtend","dst","objs","deep","ii","keys","j","jj","src","getCurrentScript","document","currentScript","scripts","getElementsByTagName","l","sc","getElasticScript","extend","merge","isUndefined","getTime","time","getDuration","start","end","parseInt","scheduleMicroTask","isPerfTimelineSupported","getEntriesByType","globalState","fetchInProgress","apmSymbol","patchMethod","patchFn","proto","hasOwnProperty","getPrototypeOf","delegate","patched","original","propertyDesc","delegateName","desc","getOwnPropertyDescriptor","get","set","patchDelegate","XHR_IGNORE","XHR_SYNC","XHR_URL","XHR_METHOD","SCHEDULE","INVOKE","CLEAR","ADD_EVENT_LISTENER_STR","REMOVE_EVENT_LISTENER_STR","RESOURCE_INITIATOR_TYPES","MAX_SPAN_DURATION","PAGE_LOAD","TYPE_CUSTOM","NAME_UNKNOWN","TRANSACTION_TYPE_ORDER","USER_TIMING_THRESHOLD","XMLHTTPREQUEST","FETCH","HISTORY","EVENT_TARGET","ERROR","LONG_TASK","MEASURE","NAVIGATION","RESOURCE","FIRST_CONTENTFUL_PAINT","LARGEST_CONTENTFUL_PAINT","FIRST_INPUT","CONFIG_SERVICE","LOGGING_SERVICE","APM_SERVER","TRUNCATED_TYPE","KEYWORD_LIMIT","XHR_TASK","XHR_LISTENER","XHR_SCHEDULED","patchXMLHttpRequest","XMLHttpRequestPrototype","oriAddListener","oriRemoveListener","XMLHttpRequestEventTarget","XMLHttpRequestEventTargetPrototype","READY_STATE_CHANGE","LOAD","invokeTask","task","state","scheduleTask","_task$data","data","aborted","earlierEvent","listener","newListener","_ref","type","scheduleMacroTask","readyState","DONE","openNative","sendNative","method","sync","abortNative","clearTask","eventTypes","eventTypeSymbols","et","shouldInstrumentEvent","eventType","listenerFn","Element","EventHandler","observers","_proto","observe","_this","index","splice","sendOnly","obs","log","send","patchEventHandler","alreadyPatched","patchAll","event","fetch","Request","nativeFetch","input","init","request","fetchSelf","response","patchFetch","history","nativePushState","pushState","patchHistory","EventTarget","nativeAddEventListener","nativeRemoveEventListener","optionsOrCapture","wrappingListenerFn","createListenerWrapper","wrappingFn","getWrappingFn","findTaskIndex","existingTasks","capture","isCapture","options","eventSymbol","taskIndex","patchEventTarget","bootstrapTime","lastHiddenStart","Number","MIN_SAFE_INTEGER","bootstrap","visibilityState","addEventListener","bootstrapPerf","createStackTraces","errorEvent","filename","lineno","colno","stackTraces","lineNumber","columnNumber","frame","fnName","normalizeFunctionName","_stack$functionName","fileUrl","filePath","cleanFilePath","cleanedFileName","origin","location","protocol","hostname","port","filePathToFileName","href","abs_path","function","RULES","NaN","PROTOCOL_REGEX","Url","_this$extractProtocol","extractProtocol","address","slashes","relative","getLocation","instructions","instruction","instLength","newIndex","lastIndexOf","Math","max","toLowerCase","path","charAt","host","test","isDefaultPort","auth","userpass","query","hash","globalVar","LEFT_SQUARE_BRACKET","RIGHT_SQUARE_BRACKET","EXTERNAL","HARD_NAVIGATION","getResponseContext","perfTimingEntry","respContext","transfer_size","transferSize","encoded_body_size","encodedBodySize","decoded_body_size","decodedBodySize","serverTimingStr","serverTimingEntries","serverTimingInfo","_i2","_serverTimingEntries$","duration","description","timingValue","valueSeparator","getServerTimingInfo","serverTiming","headers","getDestination","parsedUrl","portNumber","getPortNumber","ipv6Hostname","charCodeAt","service","resource","getPageContext","page","referer","referrer","addSpanContext","span","context","statusCode","destination","http","status","status_code","getExternalContext","entry","getResourceContext","getNavigationContext","addContext","addTransactionContext","transaction","_temp","configContext","tags","excluded","sourceKeys","_objectWithoutPropertiesLoose","pageContext","responseContext","entries","METADATA_MODEL","agent","environment","labels","RESPONSE_MODEL","CONTEXT_MODEL","user","id","email","username","SPAN_MODEL","trace_id","parent_id","transaction_id","subtype","action","TRANSACTION_MODEL","span_count","started","ERROR_MODEL","culprit","exception","isEmpty","replaceValue","currModel","limit","required","placeholder","substring","truncate","truncateModel","model","childTarget","emptyArr","_loop","currKey","IGNORE_KEYS","ErrorLogging","apmServer","configService","transactionService","_apmServer","_configService","_transactionService","createErrorDataModel","filteredFrames","frames","filterInvalidFrames","lastFrame","errorMessage","errorType","errorContext","customProperties","propertyFound","properties","toISOString","getErrorProperties","custom","currentTransaction","getCurrentTransaction","transactionContext","_this$_configService$","errorObject","traceId","sampled","logErrorEvent","addError","registerListeners","promiseRejectionEvent","logPromiseEvent","prefix","logError","messageOrError","Queue","onFlush","opts","items","queueLimit","flushInterval","timeoutId","_setTimer","flush","_clear","add","item","NDJSON","object","SpanBase","timestamp","_start","startTime","_end","ended","onEnd","ensureContext","addLabels","ctx","k","_len","_key","endTime","callOnEnd","_SpanBase","Span","parentId","fields","eventPairs","shouldCreateSpan","trStart","trEnd","baseTime","createResourceTimingSpan","resourceTimingEntry","initiatorType","responseEnd","kind","spanName","isCapturedByPatching","resourceStartTime","requestPatchTime","NAVIGATION_TIMING_MARKS","COMPRESSED_NAV_TIMING_MARKS","getPageLoadMarks","timing","marks","fetchStart","navigationStart","timingKey","m","getNavigationTimingMarks","navigationTiming","timeToFirstByte","responseStart","domInteractive","domComplete","captureNavigation","captureTimings","customMarks","timings","spans","pageResponse","createNavigationTimingSpans","pageLoadSpanId","addMarks","_trStart","_entries$i","createResourceTimingSpans","userTimingSpans","_entries$i2","createUserTimingSpans","compressResponse","ts","ebs","dbs","compressContext","compressed","rf","h","mt","r","compressHTTP","dt","se","n","rc","ad","po","u","un","em","cu","compressMarks","nt","mark","mapping","a","fb","rs","di","dc","fp","firstContentfulPaint","lp","largestContentfulPaint","ApmServer","loggingService","_loggingService","throttleEvents","events","sendEvents","catch","_constructError","onThrottle","interval","counter","throttle","_postJson","endPoint","payload","_this2","isCompressionStreamSupported","CompressionStream","compressedStream","Blob","stream","pipeThrough","Response","blob","compressPayload","_makeHttpRequest","responseText","_ref2","xhr","open","header","setRequestHeader","onreadystatechange","onerror","fetchConfig","serviceName","_this3","configEndpoint","localConfig","getLocalConfig","etag","remoteConfig","getResponseHeader","setLocalConfig","createMetaData","cfg","metadata","language","_this$throttleEvents","addTransaction","_this$throttleEvents2","ndjsonErrors","errors","compress","_NDJSON$stringify","cl","mg","st","ap","f","li","co","c","tid","pid","xid","sm","compressError","ndjsonMetricsets","metricsets","metricset","ndjsonTransactions","transactions","_this4","tr","_NDJSON$stringify2","breakdowns","breakdown","spanData","s","d","sy","su","ac","me","samples","isSpan","y","sa","ysc","v","yss","xdc","xds","xbc","yc","sd","compressTransaction","_payload","_NDJSON$stringify3","filteredPayload","applyFilters","apiVersion","ndjson","metadataKey","ve","la","en","compressMetadata","ndjsonPayload","_serviceCreators","Config","config","serviceVersion","serverUrl","active","instrument","disableInstrumentations","logLevel","breakdownMetrics","ignoreTransactions","eventsLimit","distributedTracing","distributedTracingOrigins","distributedTracingHeaderName","pageLoadTraceId","pageLoadSampled","pageLoadTransactionName","transactionSampleRate","centralConfig","monitorLongtasks","filters","scriptData","node","dataAttrs","dataRegex","attrs","attributes","attr","nodeName","camelCasedkey","toUpperCase","nodeValue","getDataAttributesFromNode","setConfig","isActive","setVersion","addFilter","reduce","objKey","setUserContext","userContext","_userContext","setCustomContext","customContext","validate","requiredKeys","missing","invalid","allowed","sampleRate","isNaN","sessionStorage","getItem","setItem","LoggingService","spec","levels","level","resetLogMethods","shouldLog","setLevel","normalizedLevel","realMethod","serviceCreators","factory","_factory$getService","getService","ServiceFactory","instances","initialized","setLogLevel","SIMILAR_SPAN_TO_TRANSACTION_RATIO","PerformanceMonitoring","_logginService","flags","TRANSACTION_END","createTransactionPayload","getHistorySub","getXHRSub","getFetchSub","getEventTargetSub","getAttribute","additionalInfo","tagName","startTransaction","managed","canReuse","reuseThreshold","classes","processAPICalls","requestUrl","startSpan","taskId","addTask","isDtEnabled","dtOrigins","currentUrl","isSameOrigin","injectDtHeader","removeTask","headerName","headerValue","dtVersion","getDtHeaderValue","isHeaderValid","append","extractDtHeader","parsed","parseDtHeaderValue","filterTransaction","isManaged","createTransactionDataModel","transactionStart","transactionData","breakdownTimings","adjustedTransaction","filterdSpans","similarSpans","originalSpans","transDuration","threshold","sort","spanA","spanB","lastCount","lastSpan","isContinuouslySimilar","isLastSpan","groupSmallContinuouslySimilarSpans","resetSpans","adjustTransactionSpans","pageLoadBreakdowns","getValue","getSpanBreakdown","transactionDetails","details","_ref$count","count","trDuration","current","spanMap","transactionSelfTime","span1","span2","spanEnd","spanStart","lastContinuousEnd","selfTime","calculateSelfTime","groupSpans","_key$split","_spanMap$key","Transaction","_activeSpans","nextAutoTaskId","_scheduledTasks","random","markTime","redefine","trc","_onSpanEnd","isFinished","detectFinish","sid","captureBreakdown","metrics","fcp","tbt","Infinity","LONG_TASK_THRESHOLD","captureObserverEntries","list","capturePaint","longtaskEntries","longtasks","_longtasks$i","attribution","_attribution$","_name","containerType","containerName","containerId","createLongTaskSpans","lcpEntries","lastLcpEntry","lcp","unloadDiff","fcpEntry","getEntriesByName","fidSpan","fidEntries","firstInput","processingStart","createFirstInputDelaySpan","min","blockingTime","calculateTotalBlockingTime","PerfEntryRecorder","disconnect","PerformanceObserver","buffered","_","stop","TransactionService","logger","_config","_logger","respIntervalId","recorder","_tr$spans","_captureObserverEntri","ensureCurrentTransaction","setCurrentTransaction","createOptions","perfOptions","startManagedTransaction","isRedefined","redefineType","currentTypeOrder","redefineTypeOrder","fireOnstartHook","handleTransactionEnd","shouldIgnoreTransaction","tbtObject","tbtSpan","createTotalBlockingTimeSpan","urlStr","depth","pathParts","specialCharsRegex","digitsRegex","lowerCaseRegex","upperCaseRegex","redactedParts","redactedBefore","_index","part","numberOfDigits","numberofUpperCase","lowerCaseRate","upperCaseRate","slugifyUrl","adjustTransactionTime","earliestSpan","_i4","getEarliestSpan","latestSpan","_i3","getLatestNonXHRSpan","transactionEnd","transactionName","ignoreList","element","createServiceFactory","serviceFactory","_serviceFactory$getSe","_serviceFactory$getSe2","ApmBase","disable","_disable","_initialized","isEnabled","_this$serviceFactory$","disabledInstrumentations","_flags","getInstrumentationFlags","sendPageLoad","_sendPageLoadMetrics","fetchCentralConfig","info","_this$serviceFactory$2","_config2","_invalid$","sendPageLoadMetrics","_configService$valida2","setInitialPageLoadName","captureError","elasticApm","enabled","apmBase","getApmBase","FullWidth","styled","footer","Footer","onClick","ErrorBoundary","hasError","errorInfo","apm","subTitle","children","React","Component","initApm","Layout","div","Content","MyApp","pageProps","_isNumber","parseFloat","isFinite","setFunctionName","setArgs","setFileName","setLineNumber","setColumnNumber","setSource","getFunctionName","getArgs","getFileName","getLineNumber","getColumnNumber","getSource","_assertThisInitialized","ReferenceError","_getPrototypeOf"],"mappings":"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","file":"static/Ygw15RZBdZ4p-orw8HUoo/pages/_app.js","sourcesContent":["export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/_app\",\n      function () {\n        return require(\"private-next-pages/_app.tsx\");\n      }\n    ]);\n  ","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+\\:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code\\])?$/;\n\n    function _map(array, fn, thisArg) {\n        if (typeof Array.prototype.map === 'function') {\n            return array.map(fn, thisArg);\n        } else {\n            var output = new Array(array.length);\n            for (var i = 0; i < array.length; i++) {\n                output[i] = fn.call(thisArg, array[i]);\n            }\n            return output;\n        }\n    }\n\n    function _filter(array, fn, thisArg) {\n        if (typeof Array.prototype.filter === 'function') {\n            return array.filter(fn, thisArg);\n        } else {\n            var output = [];\n            for (var i = 0; i < array.length; i++) {\n                if (fn.call(thisArg, array[i])) {\n                    output.push(array[i]);\n                }\n            }\n            return output;\n        }\n    }\n\n    function _indexOf(array, target) {\n        if (typeof Array.prototype.indexOf === 'function') {\n            return array.indexOf(target);\n        } else {\n            for (var i = 0; i < array.length; i++) {\n                if (array[i] === target) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n    }\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[\\(\\)]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = _filter(error.stack.split('\\n'), function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return _map(filtered, function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g, '');\n                }\n                var tokens = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').split(/\\s+/).slice(1);\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionName = tokens.join(' ') || undefined;\n                var fileName = _indexOf(['eval', '<anonymous>'], locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame(functionName, undefined, fileName, locationParts[1], locationParts[2], line);\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = _filter(error.stack.split('\\n'), function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return _map(filtered, function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame(line);\n                } else {\n                    var tokens = line.split('@');\n                    var locationParts = this.extractLocation(tokens.pop());\n                    var functionName = tokens.join('@') || undefined;\n                    return new StackFrame(functionName,\n                        undefined,\n                        locationParts[0],\n                        locationParts[1],\n                        locationParts[2],\n                        line);\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame(undefined, undefined, match[2], match[1], undefined, lines[i]));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame(\n                            match[3] || undefined,\n                            undefined,\n                            match[2],\n                            match[1],\n                            undefined,\n                            lines[i]\n                        )\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = _filter(error.stack.split('\\n'), function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return _map(filtered, function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                        .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                        .replace(/\\([^\\)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^\\)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^\\(]+\\(([^\\)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n                return new StackFrame(\n                    functionName,\n                    args,\n                    locationParts[0],\n                    locationParts[1],\n                    locationParts[2],\n                    line);\n            }, this);\n        }\n    };\n}));\n\n","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","import promiseFinally from './finally';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import PromisePollyfill from 'promise-polyfill';\nimport { isBrowser } from './utils';\nvar local = {};\n\nif (isBrowser) {\n  local = window;\n} else if (typeof self !== 'undefined') {\n  local = self;\n}\n\nvar Promise = 'Promise' in local ? local.Promise : PromisePollyfill;\nexport { Promise };","import { Promise } from './polyfills';\nvar slice = [].slice;\nvar isBrowser = typeof window !== 'undefined';\nvar PERF = isBrowser && typeof performance !== 'undefined' ? performance : {};\n\nfunction isCORSSupported() {\n  var xhr = new window.XMLHttpRequest();\n  return 'withCredentials' in xhr;\n}\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToHex(buffer) {\n  var hexOctets = [];\n\n  for (var _i = 0; _i < buffer.length; _i++) {\n    hexOctets.push(byteToHex[buffer[_i]]);\n  }\n\n  return hexOctets.join('');\n}\n\nvar destination = new Uint8Array(16);\n\nfunction rng() {\n  if (typeof crypto != 'undefined' && typeof crypto.getRandomValues == 'function') {\n    return crypto.getRandomValues(destination);\n  } else if (typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function') {\n    return msCrypto.getRandomValues(destination);\n  }\n\n  return destination;\n}\n\nfunction generateRandomId(length) {\n  var id = bytesToHex(rng());\n  return id.substr(0, length);\n}\n\nfunction getDtHeaderValue(span) {\n  var dtVersion = '00';\n  var dtUnSampledFlags = '00';\n  var dtSampledFlags = '01';\n\n  if (span && span.traceId && span.id && span.parentId) {\n    var flags = span.sampled ? dtSampledFlags : dtUnSampledFlags;\n    var id = span.sampled ? span.id : span.parentId;\n    return dtVersion + '-' + span.traceId + '-' + id + '-' + flags;\n  }\n}\n\nfunction parseDtHeaderValue(value) {\n  var parsed = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})$/.exec(value);\n\n  if (parsed) {\n    var flags = parsed[4];\n    var sampled = flags !== '00';\n    return {\n      traceId: parsed[2],\n      id: parsed[3],\n      sampled: sampled\n    };\n  }\n}\n\nfunction isDtHeaderValid(header) {\n  return /^[\\da-f]{2}-[\\da-f]{32}-[\\da-f]{16}-[\\da-f]{2}$/.test(header) && header.slice(3, 35) !== '00000000000000000000000000000000' && header.slice(36, 52) !== '0000000000000000';\n}\n\nfunction checkSameOrigin(source, target) {\n  var isSame = false;\n\n  if (typeof target === 'string') {\n    isSame = source === target;\n  } else if (Array.isArray(target)) {\n    target.forEach(function (t) {\n      if (!isSame) {\n        isSame = checkSameOrigin(source, t);\n      }\n    });\n  }\n\n  return isSame;\n}\n\nfunction isPlatformSupported() {\n  return isBrowser && typeof Array.prototype.forEach === 'function' && typeof JSON.stringify === 'function' && typeof Function.bind === 'function' && PERF && typeof PERF.now === 'function' && isCORSSupported();\n}\n\nfunction setLabel(key, value, obj) {\n  if (!obj || !key) return;\n  var skey = removeInvalidChars(key);\n  var valueType = typeof value;\n\n  if (value != undefined && valueType !== 'boolean' && valueType !== 'number') {\n    value = String(value);\n  }\n\n  obj[skey] = value;\n  return obj;\n}\n\nfunction getServerTimingInfo(serverTimingEntries) {\n  if (serverTimingEntries === void 0) {\n    serverTimingEntries = [];\n  }\n\n  var serverTimingInfo = [];\n  var entrySeparator = ', ';\n  var valueSeparator = ';';\n\n  for (var _i2 = 0; _i2 < serverTimingEntries.length; _i2++) {\n    var _serverTimingEntries$ = serverTimingEntries[_i2],\n        name = _serverTimingEntries$.name,\n        duration = _serverTimingEntries$.duration,\n        description = _serverTimingEntries$.description;\n    var timingValue = name;\n\n    if (description) {\n      timingValue += valueSeparator + 'desc=' + description;\n    }\n\n    if (duration) {\n      timingValue += valueSeparator + 'dur=' + duration;\n    }\n\n    serverTimingInfo.push(timingValue);\n  }\n\n  return serverTimingInfo.join(entrySeparator);\n}\n\nfunction getTimeOrigin() {\n  return PERF.timing.fetchStart;\n}\n\nfunction stripQueryStringFromUrl(url) {\n  return url && url.split('?')[0];\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction baseExtend(dst, objs, deep) {\n  for (var i = 0, ii = objs.length; i < ii; ++i) {\n    var obj = objs[i];\n    if (!isObject(obj) && !isFunction(obj)) continue;\n    var keys = Object.keys(obj);\n\n    for (var j = 0, jj = keys.length; j < jj; j++) {\n      var key = keys[j];\n      var src = obj[key];\n\n      if (deep && isObject(src)) {\n        if (!isObject(dst[key])) dst[key] = Array.isArray(src) ? [] : {};\n        baseExtend(dst[key], [src], false);\n      } else {\n        dst[key] = src;\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction getElasticScript() {\n  if (typeof document !== 'undefined') {\n    var scripts = document.getElementsByTagName('script');\n\n    for (var i = 0, l = scripts.length; i < l; i++) {\n      var sc = scripts[i];\n\n      if (sc.src.indexOf('elastic') > 0) {\n        return sc;\n      }\n    }\n  }\n}\n\nfunction getCurrentScript() {\n  if (typeof document !== 'undefined') {\n    var currentScript = document.currentScript;\n\n    if (!currentScript) {\n      return getElasticScript();\n    }\n\n    return currentScript;\n  }\n}\n\nfunction extend(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), false);\n}\n\nfunction merge(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), true);\n}\n\nfunction isUndefined(obj) {\n  return typeof obj === 'undefined';\n}\n\nfunction noop() {}\n\nfunction find(array, predicate, thisArg) {\n  if (array == null) {\n    throw new TypeError('array is null or not defined');\n  }\n\n  var o = Object(array);\n  var len = o.length >>> 0;\n\n  if (typeof predicate !== 'function') {\n    throw new TypeError('predicate must be a function');\n  }\n\n  var k = 0;\n\n  while (k < len) {\n    var kValue = o[k];\n\n    if (predicate.call(thisArg, kValue, k, o)) {\n      return kValue;\n    }\n\n    k++;\n  }\n\n  return undefined;\n}\n\nfunction removeInvalidChars(key) {\n  return key.replace(/[.*\"]/g, '_');\n}\n\nfunction getLatestNonXHRSpan(spans) {\n  var latestSpan = null;\n\n  for (var _i3 = 0; _i3 < spans.length; _i3++) {\n    var span = spans[_i3];\n\n    if (String(span.type).indexOf('external') === -1 && (!latestSpan || latestSpan._end < span._end)) {\n      latestSpan = span;\n    }\n  }\n\n  return latestSpan;\n}\n\nfunction getEarliestSpan(spans) {\n  var earliestSpan = spans[0];\n\n  for (var _i4 = 1; _i4 < spans.length; _i4++) {\n    var span = spans[_i4];\n\n    if (earliestSpan._start > span._start) {\n      earliestSpan = span;\n    }\n  }\n\n  return earliestSpan;\n}\n\nfunction now() {\n  return PERF.now();\n}\n\nfunction getTime(time) {\n  return typeof time === 'number' && time >= 0 ? time : now();\n}\n\nfunction getDuration(start, end) {\n  if (isUndefined(end) || isUndefined(start)) {\n    return null;\n  }\n\n  return parseInt(end - start);\n}\n\nfunction scheduleMacroTask(callback) {\n  setTimeout(callback, 0);\n}\n\nfunction scheduleMicroTask(callback) {\n  Promise.resolve().then(callback);\n}\n\nfunction isPerfTimelineSupported() {\n  return typeof PERF.getEntriesByType === 'function';\n}\n\nexport { extend, merge, isUndefined, noop, baseExtend, bytesToHex, isCORSSupported, isObject, isFunction, isPlatformSupported, isDtHeaderValid, parseDtHeaderValue, getServerTimingInfo, getDtHeaderValue, getCurrentScript, getElasticScript, getTimeOrigin, generateRandomId, getEarliestSpan, getLatestNonXHRSpan, getDuration, getTime, now, rng, checkSameOrigin, scheduleMacroTask, scheduleMicroTask, setLabel, stripQueryStringFromUrl, find, removeInvalidChars, PERF, isPerfTimelineSupported, isBrowser };","export var globalState = {\n  fetchInProgress: false\n};\nexport function apmSymbol(name) {\n  return '__apm_symbol__' + name;\n}\n\nfunction isPropertyWritable(propertyDesc) {\n  if (!propertyDesc) {\n    return true;\n  }\n\n  if (propertyDesc.writable === false) {\n    return false;\n  }\n\n  return !(typeof propertyDesc.get === 'function' && typeof propertyDesc.set === 'undefined');\n}\n\nfunction attachOriginToPatched(patched, original) {\n  patched[apmSymbol('OriginalDelegate')] = original;\n}\n\nexport function patchMethod(target, name, patchFn) {\n  var proto = target;\n\n  while (proto && !proto.hasOwnProperty(name)) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  if (!proto && target[name]) {\n    proto = target;\n  }\n\n  var delegateName = apmSymbol(name);\n  var delegate;\n\n  if (proto && !(delegate = proto[delegateName])) {\n    delegate = proto[delegateName] = proto[name];\n    var desc = proto && Object.getOwnPropertyDescriptor(proto, name);\n\n    if (isPropertyWritable(desc)) {\n      var patchDelegate = patchFn(delegate, delegateName, name);\n\n      proto[name] = function () {\n        return patchDelegate(this, arguments);\n      };\n\n      attachOriginToPatched(proto[name], delegate);\n    }\n  }\n\n  return delegate;\n}\nexport var XHR_IGNORE = apmSymbol('xhrIgnore');\nexport var XHR_SYNC = apmSymbol('xhrSync');\nexport var XHR_URL = apmSymbol('xhrURL');\nexport var XHR_METHOD = apmSymbol('xhrMethod');","var SCHEDULE = 'schedule';\nvar INVOKE = 'invoke';\nvar CLEAR = 'clear';\nvar ADD_EVENT_LISTENER_STR = 'addEventListener';\nvar REMOVE_EVENT_LISTENER_STR = 'removeEventListener';\nvar RESOURCE_INITIATOR_TYPES = ['link', 'css', 'script', 'img', 'xmlhttprequest', 'fetch', 'beacon', 'iframe'];\nvar REUSABILITY_THRESHOLD = 5000;\nvar MAX_SPAN_DURATION = 5 * 60 * 1000;\nvar PAGE_LOAD = 'page-load';\nvar ROUTE_CHANGE = 'route-change';\nvar TYPE_CUSTOM = 'custom';\nvar USER_INTERACTION = 'user-interaction';\nvar HTTP_REQUEST_TYPE = 'http-request';\nvar TEMPORARY_TYPE = 'temporary';\nvar NAME_UNKNOWN = 'Unknown';\nvar TRANSACTION_TYPE_ORDER = [PAGE_LOAD, ROUTE_CHANGE, USER_INTERACTION, HTTP_REQUEST_TYPE, TYPE_CUSTOM, TEMPORARY_TYPE];\nvar USER_TIMING_THRESHOLD = 60;\nvar TRANSACTION_START = 'transaction:start';\nvar TRANSACTION_END = 'transaction:end';\nvar CONFIG_CHANGE = 'config:change';\nvar XMLHTTPREQUEST = 'xmlhttprequest';\nvar FETCH = 'fetch';\nvar HISTORY = 'history';\nvar EVENT_TARGET = 'eventtarget';\nvar ERROR = 'error';\nvar BEFORE_EVENT = ':before';\nvar AFTER_EVENT = ':after';\nvar LOCAL_CONFIG_KEY = 'elastic_apm_config';\nvar LONG_TASK = 'longtask';\nvar PAINT = 'paint';\nvar MEASURE = 'measure';\nvar NAVIGATION = 'navigation';\nvar RESOURCE = 'resource';\nvar FIRST_CONTENTFUL_PAINT = 'first-contentful-paint';\nvar LARGEST_CONTENTFUL_PAINT = 'largest-contentful-paint';\nvar FIRST_INPUT = 'first-input';\nvar ERRORS = 'errors';\nvar TRANSACTIONS = 'transactions';\nvar CONFIG_SERVICE = 'ConfigService';\nvar LOGGING_SERVICE = 'LoggingService';\nvar APM_SERVER = 'ApmServer';\nvar TRUNCATED_TYPE = '.truncated';\nvar KEYWORD_LIMIT = 1024;\nexport { SCHEDULE, INVOKE, CLEAR, ADD_EVENT_LISTENER_STR, REMOVE_EVENT_LISTENER_STR, RESOURCE_INITIATOR_TYPES, REUSABILITY_THRESHOLD, MAX_SPAN_DURATION, PAGE_LOAD, ROUTE_CHANGE, NAME_UNKNOWN, TYPE_CUSTOM, USER_TIMING_THRESHOLD, TRANSACTION_START, TRANSACTION_END, CONFIG_CHANGE, XMLHTTPREQUEST, FETCH, HISTORY, EVENT_TARGET, ERROR, BEFORE_EVENT, AFTER_EVENT, LOCAL_CONFIG_KEY, HTTP_REQUEST_TYPE, LONG_TASK, PAINT, MEASURE, NAVIGATION, RESOURCE, FIRST_CONTENTFUL_PAINT, LARGEST_CONTENTFUL_PAINT, KEYWORD_LIMIT, TEMPORARY_TYPE, USER_INTERACTION, TRANSACTION_TYPE_ORDER, ERRORS, TRANSACTIONS, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER, TRUNCATED_TYPE, FIRST_INPUT };","import { apmSymbol, patchMethod, XHR_SYNC, XHR_URL, XHR_METHOD, XHR_IGNORE } from './patch-utils';\nimport { scheduleMacroTask } from '../utils';\nimport { SCHEDULE, INVOKE, CLEAR, XMLHTTPREQUEST, ADD_EVENT_LISTENER_STR, REMOVE_EVENT_LISTENER_STR } from '../constants';\nvar XHR_TASK = apmSymbol('xhrTask');\nvar XHR_LISTENER = apmSymbol('xhrListener');\nvar XHR_SCHEDULED = apmSymbol('xhrScheduled');\nexport function patchXMLHttpRequest(callback) {\n  var XMLHttpRequestPrototype = XMLHttpRequest.prototype;\n  var oriAddListener = XMLHttpRequestPrototype[ADD_EVENT_LISTENER_STR];\n  var oriRemoveListener = XMLHttpRequestPrototype[REMOVE_EVENT_LISTENER_STR];\n\n  if (!oriAddListener) {\n    var XMLHttpRequestEventTarget = window['XMLHttpRequestEventTarget'];\n\n    if (XMLHttpRequestEventTarget) {\n      var XMLHttpRequestEventTargetPrototype = XMLHttpRequestEventTarget.prototype;\n      oriAddListener = XMLHttpRequestEventTargetPrototype[ADD_EVENT_LISTENER_STR];\n      oriRemoveListener = XMLHttpRequestEventTargetPrototype[REMOVE_EVENT_LISTENER_STR];\n    }\n  }\n\n  var READY_STATE_CHANGE = 'readystatechange';\n  var LOAD = 'load';\n\n  function invokeTask(task) {\n    task.state = INVOKE;\n    callback(INVOKE, task);\n  }\n\n  function scheduleTask(task) {\n    XMLHttpRequest[XHR_SCHEDULED] = false;\n    task.state = SCHEDULE;\n    callback(SCHEDULE, task);\n    var _task$data = task.data,\n        aborted = _task$data.aborted,\n        target = _task$data.target;\n\n    if (!oriAddListener) {\n      oriAddListener = target[ADD_EVENT_LISTENER_STR];\n      oriRemoveListener = target[REMOVE_EVENT_LISTENER_STR];\n    }\n\n    var listener = target[XHR_LISTENER];\n\n    if (listener) {\n      oriRemoveListener.call(target, READY_STATE_CHANGE, listener);\n      oriRemoveListener.call(target, LOAD, listener);\n    }\n\n    var earlierEvent;\n\n    var newListener = target[XHR_LISTENER] = function (_ref) {\n      var type = _ref.type;\n\n      if (earlierEvent) {\n        if (earlierEvent != type) {\n          scheduleMacroTask(function () {\n            if (task.state !== INVOKE) {\n              invokeTask(task);\n            }\n          });\n        }\n      } else {\n        if (target.readyState === target.DONE) {\n          if (!aborted && XMLHttpRequest[XHR_SCHEDULED] && task.state === SCHEDULE) {\n            earlierEvent = type;\n          }\n        }\n      }\n    };\n\n    oriAddListener.call(target, READY_STATE_CHANGE, newListener);\n    oriAddListener.call(target, LOAD, newListener);\n    var storedTask = target[XHR_TASK];\n\n    if (!storedTask) {\n      target[XHR_TASK] = task;\n    }\n  }\n\n  function clearTask(task) {\n    task.state = CLEAR;\n    callback(CLEAR, task);\n    var data = task.data;\n    data.aborted = true;\n  }\n\n  var openNative = patchMethod(XMLHttpRequestPrototype, 'open', function () {\n    return function (self, args) {\n      if (!self[XHR_IGNORE]) {\n        self[XHR_METHOD] = args[0];\n        self[XHR_URL] = args[1];\n        self[XHR_SYNC] = args[2] === false;\n      }\n\n      return openNative.apply(self, args);\n    };\n  });\n  var sendNative = patchMethod(XMLHttpRequestPrototype, 'send', function () {\n    return function (self, args) {\n      if (self[XHR_IGNORE]) {\n        return sendNative.apply(self, args);\n      }\n\n      var task = {\n        source: XMLHTTPREQUEST,\n        state: '',\n        type: 'macroTask',\n        data: {\n          target: self,\n          method: self[XHR_METHOD],\n          sync: self[XHR_SYNC],\n          url: self[XHR_URL],\n          aborted: false\n        }\n      };\n      scheduleTask(task);\n      var result = sendNative.apply(self, args);\n      XMLHttpRequest[XHR_SCHEDULED] = true;\n\n      if (self[XHR_SYNC]) {\n        invokeTask(task);\n      }\n\n      return result;\n    };\n  });\n  var abortNative = patchMethod(XMLHttpRequestPrototype, 'abort', function () {\n    return function (self, args) {\n      if (!self[XHR_IGNORE]) {\n        var task = self[XHR_TASK];\n\n        if (task && typeof task.type === 'string') {\n          if (task.data && task.data.aborted) {\n            return;\n          }\n\n          clearTask(task);\n        }\n      }\n\n      return abortNative.apply(self, args);\n    };\n  });\n}","import { SCHEDULE, INVOKE, ADD_EVENT_LISTENER_STR, REMOVE_EVENT_LISTENER_STR, EVENT_TARGET } from '../constants';\nimport { apmSymbol } from './patch-utils';\nvar eventTypes = ['click'];\nvar eventTypeSymbols = {};\n\nfor (var i = 0; i < eventTypes.length; i++) {\n  var et = eventTypes[i];\n  eventTypeSymbols[et] = apmSymbol(et);\n}\n\nfunction shouldInstrumentEvent(target, eventType, listenerFn) {\n  return target instanceof Element && eventTypes.indexOf(eventType) >= 0 && typeof listenerFn === 'function';\n}\n\nexport function patchEventTarget(callback) {\n  if (!window.EventTarget) {\n    return;\n  }\n\n  var proto = window.EventTarget.prototype;\n  var nativeAddEventListener = proto[ADD_EVENT_LISTENER_STR];\n  var nativeRemoveEventListener = proto[REMOVE_EVENT_LISTENER_STR];\n\n  function findTaskIndex(existingTasks, eventType, listenerFn, capture) {\n    for (var _i = 0; _i < existingTasks.length; _i++) {\n      var task = existingTasks[_i];\n\n      if (task.eventType === eventType && task.listenerFn === listenerFn && task.capture === capture) {\n        return _i;\n      }\n    }\n\n    return -1;\n  }\n\n  function isCapture(options) {\n    var capture;\n\n    if (typeof options === 'boolean') {\n      capture = options;\n    } else {\n      capture = options ? !!options.capture : false;\n    }\n\n    return capture;\n  }\n\n  function createListenerWrapper(target, eventType, listenerFn, options) {\n    var eventSymbol = eventTypeSymbols[eventType];\n    if (!eventSymbol) return listenerFn;\n    var existingTasks = target[eventSymbol];\n    var capture = isCapture(options);\n\n    if (existingTasks) {\n      var taskIndex = findTaskIndex(existingTasks, eventType, listenerFn, capture);\n\n      if (taskIndex !== -1) {\n        var _task = existingTasks[taskIndex];\n        return _task.wrappingFn;\n      }\n    } else {\n      existingTasks = target[eventSymbol] = [];\n    }\n\n    var task = {\n      source: EVENT_TARGET,\n      target: target,\n      eventType: eventType,\n      listenerFn: listenerFn,\n      capture: capture,\n      wrappingFn: wrappingFn\n    };\n    existingTasks.push(task);\n\n    function wrappingFn() {\n      callback(SCHEDULE, task);\n      var result;\n\n      try {\n        result = listenerFn.apply(this, arguments);\n      } finally {\n        callback(INVOKE, task);\n      }\n\n      return result;\n    }\n\n    return wrappingFn;\n  }\n\n  function getWrappingFn(target, eventType, listenerFn, options) {\n    var eventSymbol = eventTypeSymbols[eventType];\n    var existingTasks = target[eventSymbol];\n\n    if (existingTasks) {\n      var capture = isCapture(options);\n      var taskIndex = findTaskIndex(existingTasks, eventType, listenerFn, capture);\n\n      if (taskIndex !== -1) {\n        var task = existingTasks[taskIndex];\n        existingTasks.splice(taskIndex, 1);\n\n        if (existingTasks.length === 0) {\n          target[eventSymbol] = undefined;\n        }\n\n        return task.wrappingFn;\n      }\n    }\n\n    return listenerFn;\n  }\n\n  proto[ADD_EVENT_LISTENER_STR] = function (eventType, listenerFn, optionsOrCapture) {\n    var target = this;\n\n    if (!shouldInstrumentEvent(target, eventType, listenerFn)) {\n      return nativeAddEventListener.apply(target, arguments);\n    }\n\n    var wrappingListenerFn = createListenerWrapper(target, eventType, listenerFn, optionsOrCapture);\n    var args = Array.prototype.slice.call(arguments);\n    args[1] = wrappingListenerFn;\n    return nativeAddEventListener.apply(target, args);\n  };\n\n  proto[REMOVE_EVENT_LISTENER_STR] = function (eventType, listenerFn, optionsOrCapture) {\n    var target = this;\n\n    if (!shouldInstrumentEvent(target, eventType, listenerFn)) {\n      return nativeRemoveEventListener.apply(target, arguments);\n    }\n\n    var wrappingFn = getWrappingFn(target, eventType, listenerFn, optionsOrCapture);\n    var args = Array.prototype.slice.call(arguments);\n    args[1] = wrappingFn;\n    return nativeRemoveEventListener.apply(target, args);\n  };\n}","import { BEFORE_EVENT, AFTER_EVENT } from './constants';\n\nvar EventHandler = function () {\n  function EventHandler() {\n    this.observers = {};\n  }\n\n  var _proto = EventHandler.prototype;\n\n  _proto.observe = function observe(name, fn) {\n    var _this = this;\n\n    if (typeof fn === 'function') {\n      if (!this.observers[name]) {\n        this.observers[name] = [];\n      }\n\n      this.observers[name].push(fn);\n      return function () {\n        var index = _this.observers[name].indexOf(fn);\n\n        if (index > -1) {\n          _this.observers[name].splice(index, 1);\n        }\n      };\n    }\n  };\n\n  _proto.sendOnly = function sendOnly(name, args) {\n    var obs = this.observers[name];\n\n    if (obs) {\n      obs.forEach(function (fn) {\n        try {\n          fn.apply(undefined, args);\n        } catch (error) {\n          console.log(error, error.stack);\n        }\n      });\n    }\n  };\n\n  _proto.send = function send(name, args) {\n    this.sendOnly(name + BEFORE_EVENT, args);\n    this.sendOnly(name, args);\n    this.sendOnly(name + AFTER_EVENT, args);\n  };\n\n  return EventHandler;\n}();\n\nexport default EventHandler;","import { patchXMLHttpRequest } from './xhr-patch';\nimport { patchFetch } from './fetch-patch';\nimport { patchHistory } from './history-patch';\nimport { patchEventTarget } from './event-target-patch';\nimport EventHandler from '../event-handler';\nimport { HISTORY, FETCH, XMLHTTPREQUEST, EVENT_TARGET } from '../constants';\nvar patchEventHandler = new EventHandler();\nvar alreadyPatched = false;\n\nfunction patchAll() {\n  if (!alreadyPatched) {\n    alreadyPatched = true;\n    patchXMLHttpRequest(function (event, task) {\n      patchEventHandler.send(XMLHTTPREQUEST, [event, task]);\n    });\n    patchFetch(function (event, task) {\n      patchEventHandler.send(FETCH, [event, task]);\n    });\n    patchHistory(function (event, task) {\n      patchEventHandler.send(HISTORY, [event, task]);\n    });\n    patchEventTarget(function (event, task) {\n      patchEventHandler.send(EVENT_TARGET, [event, task]);\n    });\n  }\n\n  return patchEventHandler;\n}\n\nexport { patchAll, patchEventHandler };","import { Promise } from '../polyfills';\nimport { globalState } from './patch-utils';\nimport { SCHEDULE, INVOKE, FETCH } from '../constants';\nimport { scheduleMicroTask } from '../utils';\nexport function patchFetch(callback) {\n  if (!window.fetch || !window.Request) {\n    return;\n  }\n\n  function scheduleTask(task) {\n    task.state = SCHEDULE;\n    callback(SCHEDULE, task);\n  }\n\n  function invokeTask(task) {\n    task.state = INVOKE;\n    callback(INVOKE, task);\n  }\n\n  var nativeFetch = window.fetch;\n\n  window.fetch = function (input, init) {\n    var fetchSelf = this;\n    var args = arguments;\n    var request, url;\n\n    if (typeof input === 'string') {\n      request = new Request(input, init);\n      url = input;\n    } else if (input) {\n      request = input;\n      url = request.url;\n    } else {\n      return nativeFetch.apply(fetchSelf, args);\n    }\n\n    var task = {\n      source: FETCH,\n      state: '',\n      type: 'macroTask',\n      data: {\n        target: request,\n        method: request.method,\n        url: url,\n        aborted: false\n      }\n    };\n    return new Promise(function (resolve, reject) {\n      globalState.fetchInProgress = true;\n      scheduleTask(task);\n      var promise;\n\n      try {\n        promise = nativeFetch.apply(fetchSelf, [request]);\n      } catch (error) {\n        reject(error);\n        task.data.error = error;\n        invokeTask(task);\n        globalState.fetchInProgress = false;\n        return;\n      }\n\n      promise.then(function (response) {\n        resolve(response);\n        scheduleMicroTask(function () {\n          task.data.response = response;\n          invokeTask(task);\n        });\n      }, function (error) {\n        reject(error);\n        scheduleMicroTask(function () {\n          task.data.error = error;\n          invokeTask(task);\n        });\n      });\n      globalState.fetchInProgress = false;\n    });\n  };\n}","import { INVOKE, HISTORY } from '../constants';\nexport function patchHistory(callback) {\n  if (!window.history) {\n    return;\n  }\n\n  var nativePushState = history.pushState;\n\n  if (typeof nativePushState === 'function') {\n    history.pushState = function (state, title, url) {\n      var task = {\n        source: HISTORY,\n        data: {\n          state: state,\n          title: title,\n          url: url\n        }\n      };\n      callback(INVOKE, task);\n      nativePushState.apply(this, arguments);\n    };\n  }\n}","var __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar state = {\n  bootstrapTime: null,\n  lastHiddenStart: Number.MIN_SAFE_INTEGER\n};\nexport { __DEV__, state };","import { isPlatformSupported, isBrowser, now } from './common/utils';\nimport { patchAll } from './common/patching';\nimport { state } from './state';\nvar enabled = false;\nexport function bootstrap() {\n  if (isPlatformSupported()) {\n    patchAll();\n    bootstrapPerf();\n    state.bootstrapTime = now();\n    enabled = true;\n  } else if (isBrowser) {\n    console.log('[Elastic APM] platform is not supported!');\n  }\n\n  return enabled;\n}\nexport function bootstrapPerf() {\n  if (document.visibilityState === 'hidden') {\n    state.lastHiddenStart = 0;\n  }\n\n  window.addEventListener('visibilitychange', function () {\n    if (document.visibilityState === 'hidden') {\n      state.lastHiddenStart = performance.now();\n    }\n  }, {\n    capture: true\n  });\n}","import stackParser from 'error-stack-parser';\n\nfunction filePathToFileName(fileUrl) {\n  var origin = window.location.origin || window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n  if (fileUrl.indexOf(origin) > -1) {\n    fileUrl = fileUrl.replace(origin + '/', '');\n  }\n\n  return fileUrl;\n}\n\nfunction cleanFilePath(filePath) {\n  if (filePath === void 0) {\n    filePath = '';\n  }\n\n  if (filePath === '<anonymous>') {\n    filePath = '';\n  }\n\n  return filePath;\n}\n\nfunction isFileInline(fileUrl) {\n  if (fileUrl) {\n    return window.location.href.indexOf(fileUrl) === 0;\n  }\n\n  return false;\n}\n\nfunction normalizeStackFrames(stackFrames) {\n  return stackFrames.map(function (frame) {\n    if (frame.functionName) {\n      frame.functionName = normalizeFunctionName(frame.functionName);\n    }\n\n    return frame;\n  });\n}\n\nfunction normalizeFunctionName(fnName) {\n  var parts = fnName.split('/');\n\n  if (parts.length > 1) {\n    fnName = ['Object', parts[parts.length - 1]].join('.');\n  } else {\n    fnName = parts[0];\n  }\n\n  fnName = fnName.replace(/.<$/gi, '.<anonymous>');\n  fnName = fnName.replace(/^Anonymous function$/, '<anonymous>');\n  parts = fnName.split('.');\n\n  if (parts.length > 1) {\n    fnName = parts[parts.length - 1];\n  } else {\n    fnName = parts[0];\n  }\n\n  return fnName;\n}\n\nexport function createStackTraces(errorEvent) {\n  var error = errorEvent.error,\n      filename = errorEvent.filename,\n      lineno = errorEvent.lineno,\n      colno = errorEvent.colno;\n  var stackTraces = [];\n\n  if (error) {\n    try {\n      stackTraces = stackParser.parse(error);\n    } catch (e) {}\n  }\n\n  if (stackTraces.length === 0) {\n    stackTraces = [{\n      fileName: filename,\n      lineNumber: lineno,\n      columnNumber: colno\n    }];\n  }\n\n  var normalizedStackTraces = normalizeStackFrames(stackTraces);\n  return normalizedStackTraces.map(function (stack) {\n    var fileName = stack.fileName,\n        lineNumber = stack.lineNumber,\n        columnNumber = stack.columnNumber,\n        _stack$functionName = stack.functionName,\n        functionName = _stack$functionName === void 0 ? '<anonymous>' : _stack$functionName;\n\n    if (!fileName && !lineNumber) {\n      return {};\n    }\n\n    if (!columnNumber && !lineNumber) {\n      return {};\n    }\n\n    var filePath = cleanFilePath(fileName);\n    var cleanedFileName = filePathToFileName(filePath);\n\n    if (isFileInline(filePath)) {\n      cleanedFileName = '(inline script)';\n    }\n\n    return {\n      abs_path: fileName,\n      filename: cleanedFileName,\n      function: functionName,\n      lineno: lineNumber,\n      colno: columnNumber\n    };\n  });\n}\nexport function filterInvalidFrames(frames) {\n  return frames.filter(function (_ref) {\n    var filename = _ref.filename,\n        lineno = _ref.lineno;\n    return typeof filename !== 'undefined' && typeof lineno !== 'undefined';\n  });\n}","import { isBrowser } from './utils';\n\nfunction isDefaultPort(port, protocol) {\n  switch (protocol) {\n    case 'http:':\n      return port === '80';\n\n    case 'https:':\n      return port === '443';\n  }\n\n  return true;\n}\n\nvar RULES = [['#', 'hash'], ['?', 'query'], ['/', 'path'], ['@', 'auth', 1], [NaN, 'host', undefined, 1]];\nvar PROTOCOL_REGEX = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\S\\s]*)/i;\nexport var Url = function () {\n  function Url(url) {\n    var _this$extractProtocol = this.extractProtocol(url || ''),\n        protocol = _this$extractProtocol.protocol,\n        address = _this$extractProtocol.address,\n        slashes = _this$extractProtocol.slashes;\n\n    var relative = !protocol && !slashes;\n    var location = this.getLocation();\n    var instructions = RULES.slice();\n    address = address.replace('\\\\', '/');\n\n    if (!slashes) {\n      instructions[2] = [NaN, 'path'];\n    }\n\n    var index;\n\n    for (var i = 0; i < instructions.length; i++) {\n      var instruction = instructions[i];\n      var parse = instruction[0];\n      var key = instruction[1];\n\n      if (typeof parse === 'string') {\n        index = address.indexOf(parse);\n\n        if (~index) {\n          var instLength = instruction[2];\n\n          if (instLength) {\n            var newIndex = address.lastIndexOf(parse);\n            index = Math.max(index, newIndex);\n            this[key] = address.slice(0, index);\n            address = address.slice(index + instLength);\n          } else {\n            this[key] = address.slice(index);\n            address = address.slice(0, index);\n          }\n        }\n      } else {\n        this[key] = address;\n        address = '';\n      }\n\n      this[key] = this[key] || (relative && instruction[3] ? location[key] || '' : '');\n      if (instruction[3]) this[key] = this[key].toLowerCase();\n    }\n\n    if (relative && this.path.charAt(0) !== '/') {\n      this.path = '/' + this.path;\n    }\n\n    this.relative = relative;\n    this.protocol = protocol || location.protocol;\n    this.hostname = this.host;\n    this.port = '';\n\n    if (/:\\d+$/.test(this.host)) {\n      var value = this.host.split(':');\n      var port = value.pop();\n      var hostname = value.join(':');\n\n      if (isDefaultPort(port, this.protocol)) {\n        this.host = hostname;\n      } else {\n        this.port = port;\n      }\n\n      this.hostname = hostname;\n    }\n\n    this.origin = this.protocol && this.host && this.protocol !== 'file:' ? this.protocol + '//' + this.host : 'null';\n    this.href = this.toString();\n  }\n\n  var _proto = Url.prototype;\n\n  _proto.toString = function toString() {\n    var result = this.protocol;\n    result += '//';\n\n    if (this.auth) {\n      var REDACTED = '[REDACTED]';\n      var userpass = this.auth.split(':');\n      var username = userpass[0] ? REDACTED : '';\n      var password = userpass[1] ? ':' + REDACTED : '';\n      result += username + password + '@';\n    }\n\n    result += this.host;\n    result += this.path;\n    result += this.query;\n    result += this.hash;\n    return result;\n  };\n\n  _proto.getLocation = function getLocation() {\n    var globalVar = {};\n\n    if (isBrowser) {\n      globalVar = window;\n    }\n\n    return globalVar.location;\n  };\n\n  _proto.extractProtocol = function extractProtocol(url) {\n    var match = PROTOCOL_REGEX.exec(url);\n    return {\n      protocol: match[1] ? match[1].toLowerCase() : '',\n      slashes: !!match[2],\n      address: match[3]\n    };\n  };\n\n  return Url;\n}();\nexport function slugifyUrl(urlStr, depth) {\n  if (depth === void 0) {\n    depth = 2;\n  }\n\n  var parsedUrl = new Url(urlStr);\n  var query = parsedUrl.query,\n      path = parsedUrl.path;\n  var pathParts = path.substring(1).split('/');\n  var redactString = ':id';\n  var wildcard = '*';\n  var specialCharsRegex = /\\W|_/g;\n  var digitsRegex = /[0-9]/g;\n  var lowerCaseRegex = /[a-z]/g;\n  var upperCaseRegex = /[A-Z]/g;\n  var redactedParts = [];\n  var redactedBefore = false;\n\n  for (var _index = 0; _index < pathParts.length; _index++) {\n    var part = pathParts[_index];\n\n    if (redactedBefore || _index > depth - 1) {\n      if (part) {\n        redactedParts.push(wildcard);\n      }\n\n      break;\n    }\n\n    var numberOfSpecialChars = (part.match(specialCharsRegex) || []).length;\n\n    if (numberOfSpecialChars >= 2) {\n      redactedParts.push(redactString);\n      redactedBefore = true;\n      continue;\n    }\n\n    var numberOfDigits = (part.match(digitsRegex) || []).length;\n\n    if (numberOfDigits > 3 || part.length > 3 && numberOfDigits / part.length >= 0.3) {\n      redactedParts.push(redactString);\n      redactedBefore = true;\n      continue;\n    }\n\n    var numberofUpperCase = (part.match(upperCaseRegex) || []).length;\n    var numberofLowerCase = (part.match(lowerCaseRegex) || []).length;\n    var lowerCaseRate = numberofLowerCase / part.length;\n    var upperCaseRate = numberofUpperCase / part.length;\n\n    if (part.length > 5 && (upperCaseRate > 0.3 && upperCaseRate < 0.6 || lowerCaseRate > 0.3 && lowerCaseRate < 0.6)) {\n      redactedParts.push(redactString);\n      redactedBefore = true;\n      continue;\n    }\n\n    part && redactedParts.push(part);\n  }\n\n  var redacted = '/' + (redactedParts.length >= 2 ? redactedParts.join('/') : redactedParts.join('')) + (query ? '?{query}' : '');\n  return redacted;\n}","function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { Url } from './url';\nimport { PAGE_LOAD, NAVIGATION } from './constants';\nimport { getServerTimingInfo, PERF, isPerfTimelineSupported } from './utils';\nvar LEFT_SQUARE_BRACKET = 91;\nvar RIGHT_SQUARE_BRACKET = 93;\nvar EXTERNAL = 'external';\nvar RESOURCE = 'resource';\nvar HARD_NAVIGATION = 'hard-navigation';\n\nfunction getPortNumber(port, protocol) {\n  if (port === '') {\n    port = protocol === 'http:' ? '80' : protocol === 'https:' ? '443' : '';\n  }\n\n  return port;\n}\n\nfunction getResponseContext(perfTimingEntry) {\n  var transferSize = perfTimingEntry.transferSize,\n      encodedBodySize = perfTimingEntry.encodedBodySize,\n      decodedBodySize = perfTimingEntry.decodedBodySize,\n      serverTiming = perfTimingEntry.serverTiming;\n  var respContext = {\n    transfer_size: transferSize,\n    encoded_body_size: encodedBodySize,\n    decoded_body_size: decodedBodySize\n  };\n  var serverTimingStr = getServerTimingInfo(serverTiming);\n\n  if (serverTimingStr) {\n    respContext.headers = {\n      'server-timing': serverTimingStr\n    };\n  }\n\n  return respContext;\n}\n\nfunction getDestination(parsedUrl, type) {\n  var port = parsedUrl.port,\n      protocol = parsedUrl.protocol,\n      hostname = parsedUrl.hostname,\n      host = parsedUrl.host;\n  var portNumber = getPortNumber(port, protocol);\n  var ipv6Hostname = hostname.charCodeAt(0) === LEFT_SQUARE_BRACKET && hostname.charCodeAt(hostname.length - 1) === RIGHT_SQUARE_BRACKET;\n  var address = hostname;\n\n  if (ipv6Hostname) {\n    address = hostname.slice(1, -1);\n  }\n\n  return {\n    service: {\n      name: protocol + '//' + host,\n      resource: hostname + ':' + portNumber,\n      type: type\n    },\n    address: address,\n    port: Number(portNumber)\n  };\n}\n\nfunction getResourceContext(data) {\n  var entry = data.entry,\n      url = data.url;\n  var parsedUrl = new Url(url);\n  var destination = getDestination(parsedUrl, RESOURCE);\n  return {\n    http: {\n      url: url,\n      response: getResponseContext(entry)\n    },\n    destination: destination\n  };\n}\n\nfunction getExternalContext(data) {\n  var url = data.url,\n      method = data.method,\n      target = data.target,\n      response = data.response;\n  var parsedUrl = new Url(url);\n  var destination = getDestination(parsedUrl, EXTERNAL);\n  var context = {\n    http: {\n      method: method,\n      url: parsedUrl.href\n    },\n    destination: destination\n  };\n  var statusCode;\n\n  if (target && typeof target.status !== 'undefined') {\n    statusCode = target.status;\n  } else if (response) {\n    statusCode = response.status;\n  }\n\n  context.http.status_code = statusCode;\n  return context;\n}\n\nfunction getNavigationContext(data) {\n  var url = data.url;\n  var parsedUrl = new Url(url);\n  var destination = getDestination(parsedUrl, HARD_NAVIGATION);\n  return {\n    destination: destination\n  };\n}\n\nexport function getPageContext() {\n  return {\n    page: {\n      referer: document.referrer,\n      url: location.href\n    }\n  };\n}\nexport function addSpanContext(span, data) {\n  if (!data) {\n    return;\n  }\n\n  var type = span.type;\n  var context;\n\n  switch (type) {\n    case EXTERNAL:\n      context = getExternalContext(data);\n      break;\n\n    case RESOURCE:\n      context = getResourceContext(data);\n      break;\n\n    case HARD_NAVIGATION:\n      context = getNavigationContext(data);\n      break;\n  }\n\n  span.addContext(context);\n}\nexport function addTransactionContext(transaction, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      tags = _ref.tags,\n      configContext = _objectWithoutPropertiesLoose(_ref, [\"tags\"]);\n\n  var pageContext = getPageContext();\n  var responseContext = {};\n\n  if (transaction.type === PAGE_LOAD && isPerfTimelineSupported()) {\n    var entries = PERF.getEntriesByType(NAVIGATION);\n\n    if (entries && entries.length > 0) {\n      responseContext = {\n        response: getResponseContext(entries[0])\n      };\n    }\n  }\n\n  transaction.addContext(pageContext, responseContext, configContext);\n}","import { KEYWORD_LIMIT } from './constants';\nvar METADATA_MODEL = {\n  service: {\n    name: [KEYWORD_LIMIT, true],\n    version: true,\n    agent: {\n      version: [KEYWORD_LIMIT, true]\n    },\n    environment: true\n  },\n  labels: {\n    '*': true\n  }\n};\nvar RESPONSE_MODEL = {\n  '*': true,\n  headers: {\n    '*': true\n  }\n};\nvar DESTINATION_MODEL = {\n  address: [KEYWORD_LIMIT],\n  service: {\n    '*': [KEYWORD_LIMIT, true]\n  }\n};\nvar CONTEXT_MODEL = {\n  user: {\n    id: true,\n    email: true,\n    username: true\n  },\n  tags: {\n    '*': true\n  },\n  http: {\n    response: RESPONSE_MODEL\n  },\n  destination: DESTINATION_MODEL,\n  response: RESPONSE_MODEL\n};\nvar SPAN_MODEL = {\n  name: [KEYWORD_LIMIT, true],\n  type: [KEYWORD_LIMIT, true],\n  id: [KEYWORD_LIMIT, true],\n  trace_id: [KEYWORD_LIMIT, true],\n  parent_id: [KEYWORD_LIMIT, true],\n  transaction_id: [KEYWORD_LIMIT, true],\n  subtype: true,\n  action: true,\n  context: CONTEXT_MODEL\n};\nvar TRANSACTION_MODEL = {\n  name: true,\n  parent_id: true,\n  type: [KEYWORD_LIMIT, true],\n  id: [KEYWORD_LIMIT, true],\n  trace_id: [KEYWORD_LIMIT, true],\n  span_count: {\n    started: [KEYWORD_LIMIT, true]\n  },\n  context: CONTEXT_MODEL\n};\nvar ERROR_MODEL = {\n  id: [KEYWORD_LIMIT, true],\n  trace_id: true,\n  transaction_id: true,\n  parent_id: true,\n  culprit: true,\n  exception: {\n    type: true\n  },\n  transaction: {\n    type: true\n  },\n  context: CONTEXT_MODEL\n};\n\nfunction truncate(value, limit, required, placeholder) {\n  if (limit === void 0) {\n    limit = KEYWORD_LIMIT;\n  }\n\n  if (required === void 0) {\n    required = false;\n  }\n\n  if (placeholder === void 0) {\n    placeholder = 'N/A';\n  }\n\n  if (required && isEmpty(value)) {\n    value = placeholder;\n  }\n\n  if (typeof value === 'string') {\n    return value.substring(0, limit);\n  }\n\n  return value;\n}\n\nfunction isEmpty(value) {\n  return value == null || value === '' || typeof value === 'undefined';\n}\n\nfunction replaceValue(target, key, currModel) {\n  var value = truncate(target[key], currModel[0], currModel[1]);\n\n  if (isEmpty(value)) {\n    delete target[key];\n    return;\n  }\n\n  target[key] = value;\n}\n\nfunction truncateModel(model, target, childTarget) {\n  if (model === void 0) {\n    model = {};\n  }\n\n  if (childTarget === void 0) {\n    childTarget = target;\n  }\n\n  var keys = Object.keys(model);\n  var emptyArr = [];\n\n  var _loop = function _loop(i) {\n    var currKey = keys[i];\n    var currModel = model[currKey] === true ? emptyArr : model[currKey];\n\n    if (!Array.isArray(currModel)) {\n      truncateModel(currModel, target, childTarget[currKey]);\n    } else {\n      if (currKey === '*') {\n        Object.keys(childTarget).forEach(function (key) {\n          return replaceValue(childTarget, key, currModel);\n        });\n      } else {\n        replaceValue(childTarget, currKey, currModel);\n      }\n    }\n  };\n\n  for (var i = 0; i < keys.length; i++) {\n    _loop(i);\n  }\n\n  return target;\n}\n\nexport { truncate, truncateModel, SPAN_MODEL, TRANSACTION_MODEL, ERROR_MODEL, METADATA_MODEL, RESPONSE_MODEL };","function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { createStackTraces, filterInvalidFrames } from './stack-trace';\nimport { generateRandomId, merge, extend } from '../common/utils';\nimport { getPageContext } from '../common/context';\nimport { truncateModel, ERROR_MODEL } from '../common/truncate';\nvar IGNORE_KEYS = ['stack', 'message'];\n\nfunction getErrorProperties(error) {\n  var propertyFound = false;\n  var properties = {};\n  Object.keys(error).forEach(function (key) {\n    if (IGNORE_KEYS.indexOf(key) >= 0) {\n      return;\n    }\n\n    var val = error[key];\n\n    if (val == null || typeof val === 'function') {\n      return;\n    }\n\n    if (typeof val === 'object') {\n      if (typeof val.toISOString !== 'function') return;\n      val = val.toISOString();\n    }\n\n    properties[key] = val;\n    propertyFound = true;\n  });\n\n  if (propertyFound) {\n    return properties;\n  }\n}\n\nvar ErrorLogging = function () {\n  function ErrorLogging(apmServer, configService, transactionService) {\n    this._apmServer = apmServer;\n    this._configService = configService;\n    this._transactionService = transactionService;\n  }\n\n  var _proto = ErrorLogging.prototype;\n\n  _proto.createErrorDataModel = function createErrorDataModel(errorEvent) {\n    var frames = createStackTraces(errorEvent);\n    var filteredFrames = filterInvalidFrames(frames);\n    var culprit = '(inline script)';\n    var lastFrame = filteredFrames[filteredFrames.length - 1];\n\n    if (lastFrame && lastFrame.filename) {\n      culprit = lastFrame.filename;\n    }\n\n    var message = errorEvent.message,\n        error = errorEvent.error;\n    var errorMessage = message;\n    var errorType = '';\n    var errorContext = {};\n\n    if (error && typeof error === 'object') {\n      errorMessage = errorMessage || error.message;\n      errorType = error.name;\n      var customProperties = getErrorProperties(error);\n\n      if (customProperties) {\n        errorContext.custom = customProperties;\n      }\n    }\n\n    if (!errorType) {\n      if (errorMessage && errorMessage.indexOf(':') > -1) {\n        errorType = errorMessage.split(':')[0];\n      }\n    }\n\n    var currentTransaction = this._transactionService.getCurrentTransaction();\n\n    var transactionContext = currentTransaction ? currentTransaction.context : {};\n\n    var _this$_configService$ = this._configService.get('context'),\n        tags = _this$_configService$.tags,\n        configContext = _objectWithoutPropertiesLoose(_this$_configService$, [\"tags\"]);\n\n    var pageContext = getPageContext();\n    var context = merge({}, pageContext, transactionContext, configContext, errorContext);\n    var errorObject = {\n      id: generateRandomId(),\n      culprit: culprit,\n      exception: {\n        message: errorMessage,\n        stacktrace: filteredFrames,\n        type: errorType\n      },\n      context: context\n    };\n\n    if (currentTransaction) {\n      errorObject = extend(errorObject, {\n        trace_id: currentTransaction.traceId,\n        parent_id: currentTransaction.id,\n        transaction_id: currentTransaction.id,\n        transaction: {\n          type: currentTransaction.type,\n          sampled: currentTransaction.sampled\n        }\n      });\n    }\n\n    return truncateModel(ERROR_MODEL, errorObject);\n  };\n\n  _proto.logErrorEvent = function logErrorEvent(errorEvent) {\n    if (typeof errorEvent === 'undefined') {\n      return;\n    }\n\n    var errorObject = this.createErrorDataModel(errorEvent);\n\n    if (typeof errorObject.exception.message === 'undefined') {\n      return;\n    }\n\n    this._apmServer.addError(errorObject);\n  };\n\n  _proto.registerListeners = function registerListeners() {\n    var _this = this;\n\n    window.addEventListener('error', function (errorEvent) {\n      return _this.logErrorEvent(errorEvent);\n    });\n    window.addEventListener('unhandledrejection', function (promiseRejectionEvent) {\n      return _this.logPromiseEvent(promiseRejectionEvent);\n    });\n  };\n\n  _proto.logPromiseEvent = function logPromiseEvent(promiseRejectionEvent) {\n    var prefix = 'Unhandled promise rejection: ';\n    var reason = promiseRejectionEvent.reason;\n\n    if (reason == null) {\n      this.logError(prefix + '<no reason specified>');\n    } else if (typeof reason.message === 'string') {\n      this.logError({\n        message: prefix + reason.message,\n        stack: reason.stack ? reason.stack : null\n      });\n    } else if (typeof reason !== 'object') {\n      this.logError(prefix + reason);\n    }\n  };\n\n  _proto.logError = function logError(messageOrError) {\n    var errorEvent = {};\n\n    if (typeof messageOrError === 'string') {\n      errorEvent.message = messageOrError;\n    } else {\n      errorEvent.error = messageOrError;\n    }\n\n    return this.logErrorEvent(errorEvent);\n  };\n\n  return ErrorLogging;\n}();\n\nexport default ErrorLogging;","var Queue = function () {\n  function Queue(onFlush, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    this.onFlush = onFlush;\n    this.items = [];\n    this.queueLimit = opts.queueLimit || -1;\n    this.flushInterval = opts.flushInterval || 0;\n    this.timeoutId = undefined;\n  }\n\n  var _proto = Queue.prototype;\n\n  _proto._setTimer = function _setTimer() {\n    var _this = this;\n\n    this.timeoutId = setTimeout(function () {\n      return _this.flush();\n    }, this.flushInterval);\n  };\n\n  _proto._clear = function _clear() {\n    if (typeof this.timeoutId !== 'undefined') {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = undefined;\n    }\n\n    this.items = [];\n  };\n\n  _proto.flush = function flush() {\n    this.onFlush(this.items);\n\n    this._clear();\n  };\n\n  _proto.add = function add(item) {\n    this.items.push(item);\n\n    if (this.queueLimit !== -1 && this.items.length >= this.queueLimit) {\n      this.flush();\n    } else {\n      if (typeof this.timeoutId === 'undefined') {\n        this._setTimer();\n      }\n    }\n  };\n\n  return Queue;\n}();\n\nexport default Queue;","var NDJSON = function () {\n  function NDJSON() {}\n\n  NDJSON.stringify = function stringify(object) {\n    return JSON.stringify(object) + '\\n';\n  };\n\n  return NDJSON;\n}();\n\nexport default NDJSON;","import { generateRandomId, setLabel, merge, getDuration, getTime } from '../common/utils';\nimport { NAME_UNKNOWN, TYPE_CUSTOM } from '../common/constants';\n\nvar SpanBase = function () {\n  function SpanBase(name, type, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!name) {\n      name = NAME_UNKNOWN;\n    }\n\n    if (!type) {\n      type = TYPE_CUSTOM;\n    }\n\n    this.name = name;\n    this.type = type;\n    this.options = options;\n    this.id = options.id || generateRandomId(16);\n    this.traceId = options.traceId;\n    this.sampled = options.sampled;\n    this.timestamp = options.timestamp;\n    this._start = getTime(options.startTime);\n    this._end = undefined;\n    this.ended = false;\n    this.onEnd = options.onEnd;\n  }\n\n  var _proto = SpanBase.prototype;\n\n  _proto.ensureContext = function ensureContext() {\n    if (!this.context) {\n      this.context = {};\n    }\n  };\n\n  _proto.addLabels = function addLabels(tags) {\n    this.ensureContext();\n    var ctx = this.context;\n\n    if (!ctx.tags) {\n      ctx.tags = {};\n    }\n\n    var keys = Object.keys(tags);\n    keys.forEach(function (k) {\n      return setLabel(k, tags[k], ctx.tags);\n    });\n  };\n\n  _proto.addContext = function addContext() {\n    for (var _len = arguments.length, context = new Array(_len), _key = 0; _key < _len; _key++) {\n      context[_key] = arguments[_key];\n    }\n\n    if (context.length === 0) return;\n    this.ensureContext();\n    merge.apply(void 0, [this.context].concat(context));\n  };\n\n  _proto.end = function end(endTime) {\n    if (this.ended) {\n      return;\n    }\n\n    this.ended = true;\n    this._end = getTime(endTime);\n    this.callOnEnd();\n  };\n\n  _proto.callOnEnd = function callOnEnd() {\n    if (typeof this.onEnd === 'function') {\n      this.onEnd(this);\n    }\n  };\n\n  _proto.duration = function duration() {\n    return getDuration(this._start, this._end);\n  };\n\n  return SpanBase;\n}();\n\nexport default SpanBase;","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport SpanBase from './span-base';\nimport { addSpanContext } from '../common/context';\n\nvar Span = function (_SpanBase) {\n  _inheritsLoose(Span, _SpanBase);\n\n  function Span(name, type, options) {\n    var _this;\n\n    _this = _SpanBase.call(this, name, type, options) || this;\n    _this.parentId = _this.options.parentId;\n    _this.subtype = undefined;\n    _this.action = undefined;\n\n    if (_this.type.indexOf('.') !== -1) {\n      var fields = _this.type.split('.', 3);\n\n      _this.type = fields[0];\n      _this.subtype = fields[1];\n      _this.action = fields[2];\n    }\n\n    _this.sync = _this.options.sync;\n    return _this;\n  }\n\n  var _proto = Span.prototype;\n\n  _proto.end = function end(endTime, data) {\n    _SpanBase.prototype.end.call(this, endTime);\n\n    addSpanContext(this, data);\n  };\n\n  return Span;\n}(SpanBase);\n\nexport default Span;","import Span from './span';\nimport { RESOURCE_INITIATOR_TYPES, MAX_SPAN_DURATION, USER_TIMING_THRESHOLD, PAGE_LOAD, RESOURCE, MEASURE } from '../common/constants';\nimport { stripQueryStringFromUrl, PERF, isPerfTimelineSupported } from '../common/utils';\nimport { state } from '../state';\nvar eventPairs = [['domainLookupStart', 'domainLookupEnd', 'Domain lookup'], ['connectStart', 'connectEnd', 'Making a connection to the server'], ['requestStart', 'responseEnd', 'Requesting and receiving the document'], ['domLoading', 'domInteractive', 'Parsing the document, executing sync. scripts'], ['domContentLoadedEventStart', 'domContentLoadedEventEnd', 'Fire \"DOMContentLoaded\" event'], ['loadEventStart', 'loadEventEnd', 'Fire \"load\" event']];\n\nfunction shouldCreateSpan(start, end, trStart, trEnd, baseTime) {\n  if (baseTime === void 0) {\n    baseTime = 0;\n  }\n\n  return typeof start === 'number' && typeof end === 'number' && start >= baseTime && end > start && start - baseTime >= trStart && end - baseTime <= trEnd && end - start < MAX_SPAN_DURATION && start - baseTime < MAX_SPAN_DURATION && end - baseTime < MAX_SPAN_DURATION;\n}\n\nfunction createNavigationTimingSpans(timings, baseTime, trStart, trEnd) {\n  var spans = [];\n\n  for (var i = 0; i < eventPairs.length; i++) {\n    var start = timings[eventPairs[i][0]];\n    var end = timings[eventPairs[i][1]];\n\n    if (!shouldCreateSpan(start, end, trStart, trEnd, baseTime)) {\n      continue;\n    }\n\n    var span = new Span(eventPairs[i][2], 'hard-navigation.browser-timing');\n    var data = null;\n\n    if (eventPairs[i][0] === 'requestStart') {\n      span.pageResponse = true;\n      data = {\n        url: location.origin\n      };\n    }\n\n    span._start = start - baseTime;\n    span.end(end - baseTime, data);\n    spans.push(span);\n  }\n\n  return spans;\n}\n\nfunction createResourceTimingSpan(resourceTimingEntry) {\n  var name = resourceTimingEntry.name,\n      initiatorType = resourceTimingEntry.initiatorType,\n      startTime = resourceTimingEntry.startTime,\n      responseEnd = resourceTimingEntry.responseEnd;\n  var kind = 'resource';\n\n  if (initiatorType) {\n    kind += '.' + initiatorType;\n  }\n\n  var spanName = stripQueryStringFromUrl(name);\n  var span = new Span(spanName, kind);\n  span._start = startTime;\n  span.end(responseEnd, {\n    url: name,\n    entry: resourceTimingEntry\n  });\n  return span;\n}\n\nfunction isCapturedByPatching(resourceStartTime, requestPatchTime) {\n  return requestPatchTime != null && resourceStartTime > requestPatchTime;\n}\n\nfunction isIntakeAPIEndpoint(url) {\n  return /intake\\/v\\d+\\/rum\\/events/.test(url);\n}\n\nfunction createResourceTimingSpans(entries, requestPatchTime, trStart, trEnd) {\n  var spans = [];\n\n  for (var i = 0; i < entries.length; i++) {\n    var _entries$i = entries[i],\n        initiatorType = _entries$i.initiatorType,\n        name = _entries$i.name,\n        startTime = _entries$i.startTime,\n        responseEnd = _entries$i.responseEnd;\n\n    if (RESOURCE_INITIATOR_TYPES.indexOf(initiatorType) === -1 || name == null) {\n      continue;\n    }\n\n    if ((initiatorType === 'xmlhttprequest' || initiatorType === 'fetch') && (isIntakeAPIEndpoint(name) || isCapturedByPatching(startTime, requestPatchTime))) {\n      continue;\n    }\n\n    if (shouldCreateSpan(startTime, responseEnd, trStart, trEnd)) {\n      spans.push(createResourceTimingSpan(entries[i]));\n    }\n  }\n\n  return spans;\n}\n\nfunction createUserTimingSpans(entries, trStart, trEnd) {\n  var userTimingSpans = [];\n\n  for (var i = 0; i < entries.length; i++) {\n    var _entries$i2 = entries[i],\n        name = _entries$i2.name,\n        startTime = _entries$i2.startTime,\n        duration = _entries$i2.duration;\n    var end = startTime + duration;\n\n    if (duration <= USER_TIMING_THRESHOLD || !shouldCreateSpan(startTime, end, trStart, trEnd)) {\n      continue;\n    }\n\n    var kind = 'app';\n    var span = new Span(name, kind);\n    span._start = startTime;\n    span.end(end);\n    userTimingSpans.push(span);\n  }\n\n  return userTimingSpans;\n}\n\nvar NAVIGATION_TIMING_MARKS = ['fetchStart', 'domainLookupStart', 'domainLookupEnd', 'connectStart', 'connectEnd', 'requestStart', 'responseStart', 'responseEnd', 'domLoading', 'domInteractive', 'domContentLoadedEventStart', 'domContentLoadedEventEnd', 'domComplete', 'loadEventStart', 'loadEventEnd'];\nvar COMPRESSED_NAV_TIMING_MARKS = ['fs', 'ls', 'le', 'cs', 'ce', 'qs', 'rs', 're', 'dl', 'di', 'ds', 'de', 'dc', 'es', 'ee'];\n\nfunction getNavigationTimingMarks(timing) {\n  var fetchStart = timing.fetchStart,\n      navigationStart = timing.navigationStart;\n\n  if (navigationStart && fetchStart < navigationStart) {\n    return null;\n  }\n\n  var marks = {};\n  NAVIGATION_TIMING_MARKS.forEach(function (timingKey) {\n    var m = timing[timingKey];\n\n    if (m && m >= fetchStart) {\n      marks[timingKey] = parseInt(m - fetchStart);\n    }\n  });\n  return marks;\n}\n\nfunction getPageLoadMarks(timing) {\n  var marks = getNavigationTimingMarks(timing);\n\n  if (marks == null) {\n    return null;\n  }\n\n  return {\n    navigationTiming: marks,\n    agent: {\n      timeToFirstByte: marks.responseStart,\n      domInteractive: marks.domInteractive,\n      domComplete: marks.domComplete\n    }\n  };\n}\n\nfunction captureNavigation(transaction) {\n  if (!transaction.captureTimings) {\n    return;\n  }\n\n  var trEnd = transaction._end;\n\n  if (transaction.type === PAGE_LOAD) {\n    if (transaction.marks && transaction.marks.custom) {\n      var customMarks = transaction.marks.custom;\n      Object.keys(customMarks).forEach(function (key) {\n        customMarks[key] += transaction._start;\n      });\n    }\n\n    var trStart = 0;\n    transaction._start = trStart;\n    var timings = PERF.timing;\n    createNavigationTimingSpans(timings, timings.fetchStart, trStart, trEnd).forEach(function (span) {\n      span.traceId = transaction.traceId;\n      span.sampled = transaction.sampled;\n\n      if (span.pageResponse && transaction.options.pageLoadSpanId) {\n        span.id = transaction.options.pageLoadSpanId;\n      }\n\n      transaction.spans.push(span);\n    });\n    transaction.addMarks(getPageLoadMarks(timings));\n  }\n\n  if (isPerfTimelineSupported()) {\n    var _trStart = transaction._start;\n    var resourceEntries = PERF.getEntriesByType(RESOURCE);\n    createResourceTimingSpans(resourceEntries, state.bootstrapTime, _trStart, trEnd).forEach(function (span) {\n      return transaction.spans.push(span);\n    });\n    var userEntries = PERF.getEntriesByType(MEASURE);\n    createUserTimingSpans(userEntries, _trStart, trEnd).forEach(function (span) {\n      return transaction.spans.push(span);\n    });\n  }\n}\n\nexport { getPageLoadMarks, captureNavigation, createNavigationTimingSpans, createResourceTimingSpans, createUserTimingSpans, NAVIGATION_TIMING_MARKS, COMPRESSED_NAV_TIMING_MARKS };","import { Promise } from './polyfills';\nimport { NAVIGATION_TIMING_MARKS, COMPRESSED_NAV_TIMING_MARKS } from '../performance-monitoring/capture-navigation';\n\nfunction compressStackFrames(frames) {\n  return frames.map(function (frame) {\n    return {\n      ap: frame.abs_path,\n      f: frame.filename,\n      fn: frame.function,\n      li: frame.lineno,\n      co: frame.colno\n    };\n  });\n}\n\nfunction compressResponse(response) {\n  return {\n    ts: response.transfer_size,\n    ebs: response.encoded_body_size,\n    dbs: response.decoded_body_size\n  };\n}\n\nfunction compressHTTP(http) {\n  var compressed = {};\n  var method = http.method,\n      status_code = http.status_code,\n      url = http.url,\n      response = http.response;\n  compressed.url = url;\n\n  if (method) {\n    compressed.mt = method;\n  }\n\n  if (status_code) {\n    compressed.sc = status_code;\n  }\n\n  if (response) {\n    compressed.r = compressResponse(response);\n  }\n\n  return compressed;\n}\n\nfunction compressContext(context) {\n  if (!context) {\n    return null;\n  }\n\n  var compressed = {};\n  var page = context.page,\n      http = context.http,\n      response = context.response,\n      destination = context.destination,\n      user = context.user,\n      custom = context.custom;\n\n  if (page) {\n    compressed.p = {\n      rf: page.referer,\n      url: page.url\n    };\n  }\n\n  if (http) {\n    compressed.h = compressHTTP(http);\n  }\n\n  if (response) {\n    compressed.r = compressResponse(response);\n  }\n\n  if (destination) {\n    var service = destination.service;\n    compressed.dt = {\n      se: {\n        n: service.name,\n        t: service.type,\n        rc: service.resource\n      },\n      ad: destination.address,\n      po: destination.port\n    };\n  }\n\n  if (user) {\n    compressed.u = {\n      id: user.id,\n      un: user.username,\n      em: user.email\n    };\n  }\n\n  if (custom) {\n    compressed.cu = custom;\n  }\n\n  return compressed;\n}\n\nfunction compressMarks(marks) {\n  if (!marks) {\n    return null;\n  }\n\n  var navigationTiming = marks.navigationTiming,\n      agent = marks.agent;\n  var compressed = {\n    nt: {}\n  };\n  COMPRESSED_NAV_TIMING_MARKS.forEach(function (mark, index) {\n    var mapping = NAVIGATION_TIMING_MARKS[index];\n    compressed.nt[mark] = navigationTiming[mapping];\n  });\n  compressed.a = {\n    fb: compressed.nt.rs,\n    di: compressed.nt.di,\n    dc: compressed.nt.dc\n  };\n  var fp = agent.firstContentfulPaint;\n  var lp = agent.largestContentfulPaint;\n\n  if (fp) {\n    compressed.a.fp = fp;\n  }\n\n  if (lp) {\n    compressed.a.lp = lp;\n  }\n\n  return compressed;\n}\n\nexport function compressMetadata(metadata) {\n  var service = metadata.service,\n      labels = metadata.labels;\n  var agent = service.agent,\n      language = service.language;\n  return {\n    se: {\n      n: service.name,\n      ve: service.version,\n      a: {\n        n: agent.name,\n        ve: agent.version\n      },\n      la: {\n        n: language.name\n      },\n      en: service.environment\n    },\n    l: labels\n  };\n}\nexport function compressTransaction(transaction) {\n  var spans = transaction.spans.map(function (span) {\n    var spanData = {\n      id: span.id,\n      n: span.name,\n      t: span.type,\n      s: span.start,\n      d: span.duration,\n      c: compressContext(span.context)\n    };\n\n    if (span.parent_id !== transaction.id) {\n      spanData.pid = span.parent_id;\n    }\n\n    if (span.sync === true) {\n      spanData.sy = true;\n    }\n\n    if (span.subtype) {\n      spanData.su = span.subtype;\n    }\n\n    if (span.action) {\n      spanData.ac = span.action;\n    }\n\n    return spanData;\n  });\n  return {\n    id: transaction.id,\n    tid: transaction.trace_id,\n    n: transaction.name,\n    t: transaction.type,\n    d: transaction.duration,\n    c: compressContext(transaction.context),\n    m: compressMarks(transaction.marks),\n    me: compressMetricsets(transaction.breakdown),\n    y: spans,\n    yc: {\n      sd: spans.length\n    },\n    sm: transaction.sampled\n  };\n}\nexport function compressError(error) {\n  var exception = error.exception;\n  var compressed = {\n    id: error.id,\n    cl: error.culprit,\n    ex: {\n      mg: exception.message,\n      st: compressStackFrames(exception.stacktrace),\n      t: error.type\n    },\n    c: compressContext(error.context)\n  };\n  var transaction = error.transaction;\n\n  if (transaction) {\n    compressed.tid = error.trace_id;\n    compressed.pid = error.parent_id;\n    compressed.xid = error.transaction_id;\n    compressed.x = {\n      t: transaction.type,\n      sm: transaction.sampled\n    };\n  }\n\n  return compressed;\n}\nexport function compressMetricsets(breakdowns) {\n  return breakdowns.map(function (_ref) {\n    var span = _ref.span,\n        samples = _ref.samples;\n    var isSpan = span != null;\n\n    if (isSpan) {\n      return {\n        y: {\n          t: span.type\n        },\n        sa: {\n          ysc: {\n            v: samples['span.self_time.count'].value\n          },\n          yss: {\n            v: samples['span.self_time.sum.us'].value\n          }\n        }\n      };\n    }\n\n    return {\n      sa: {\n        xdc: {\n          v: samples['transaction.duration.count'].value\n        },\n        xds: {\n          v: samples['transaction.duration.sum.us'].value\n        },\n        xbc: {\n          v: samples['transaction.breakdown.count'].value\n        }\n      }\n    };\n  });\n}\nexport function compressPayload(payload, headers, type) {\n  if (type === void 0) {\n    type = 'gzip';\n  }\n\n  var isCompressionStreamSupported = typeof CompressionStream === 'function';\n  return new Promise(function (resolve) {\n    if (!isCompressionStreamSupported) {\n      return resolve({\n        payload: payload,\n        headers: headers\n      });\n    }\n\n    var payloadStream = new Blob([payload]).stream();\n    var compressedStream = payloadStream.pipeThrough(new CompressionStream(type));\n    return new Response(compressedStream).blob().then(function (payload) {\n      headers['Content-Encoding'] = type;\n      return resolve({\n        payload: payload,\n        headers: headers\n      });\n    });\n  });\n}","import Queue from './queue';\nimport throttle from './throttle';\nimport NDJSON from './ndjson';\nimport { XHR_IGNORE } from './patching/patch-utils';\nimport { truncateModel, METADATA_MODEL } from './truncate';\nimport { ERRORS, TRANSACTIONS } from './constants';\nimport { noop } from './utils';\nimport { Promise } from './polyfills';\nimport { compressMetadata, compressTransaction, compressError, compressPayload } from './compress';\nimport { __DEV__ } from '../state';\nvar THROTTLE_INTERVAL = 60000;\n\nvar ApmServer = function () {\n  function ApmServer(configService, loggingService) {\n    this._configService = configService;\n    this._loggingService = loggingService;\n    this.queue = undefined;\n    this.throttleEvents = noop;\n  }\n\n  var _proto = ApmServer.prototype;\n\n  _proto.init = function init() {\n    var _this = this;\n\n    var queueLimit = this._configService.get('queueLimit');\n\n    var flushInterval = this._configService.get('flushInterval');\n\n    var limit = this._configService.get('eventsLimit');\n\n    var onFlush = function onFlush(events) {\n      var promise = _this.sendEvents(events);\n\n      if (promise) {\n        promise.catch(function (reason) {\n          _this._loggingService.warn('Failed sending events!', _this._constructError(reason));\n        });\n      }\n    };\n\n    this.queue = new Queue(onFlush, {\n      queueLimit: queueLimit,\n      flushInterval: flushInterval\n    });\n    this.throttleEvents = throttle(this.queue.add.bind(this.queue), function () {\n      return _this._loggingService.warn('Dropped events due to throttling!');\n    }, {\n      limit: limit,\n      interval: THROTTLE_INTERVAL\n    });\n  };\n\n  _proto._postJson = function _postJson(endPoint, payload) {\n    var _this2 = this;\n\n    var headers = {\n      'Content-Type': 'application/x-ndjson'\n    };\n    return compressPayload(payload, headers).catch(function (error) {\n      if (__DEV__) {\n        _this2._loggingService.debug('Compressing the payload using CompressionStream API failed', error.message);\n      }\n\n      return {\n        payload: payload,\n        headers: headers\n      };\n    }).then(function (result) {\n      return _this2._makeHttpRequest('POST', endPoint, result);\n    }).then(function (_ref) {\n      var responseText = _ref.responseText;\n      return responseText;\n    });\n  };\n\n  _proto._constructError = function _constructError(reason) {\n    var url = reason.url,\n        status = reason.status,\n        responseText = reason.responseText;\n\n    if (typeof status == 'undefined') {\n      return reason;\n    }\n\n    var message = url + ' HTTP status: ' + status;\n\n    if (__DEV__ && responseText) {\n      try {\n        var serverErrors = [];\n        var response = JSON.parse(responseText);\n\n        if (response.errors && response.errors.length > 0) {\n          response.errors.forEach(function (err) {\n            return serverErrors.push(err.message);\n          });\n          message += ' ' + serverErrors.join(',');\n        }\n      } catch (e) {\n        this._loggingService.debug('Error parsing response from APM server', e);\n      }\n    }\n\n    return new Error(message);\n  };\n\n  _proto._makeHttpRequest = function _makeHttpRequest(method, url, _temp) {\n    var _ref2 = _temp === void 0 ? {\n      timeout: 10000\n    } : _temp,\n        timeout = _ref2.timeout,\n        payload = _ref2.payload,\n        headers = _ref2.headers;\n\n    return new Promise(function (resolve, reject) {\n      var xhr = new window.XMLHttpRequest();\n      xhr[XHR_IGNORE] = true;\n      xhr.open(method, url, true);\n      xhr.timeout = timeout;\n\n      if (headers) {\n        for (var header in headers) {\n          if (headers.hasOwnProperty(header)) {\n            xhr.setRequestHeader(header, headers[header]);\n          }\n        }\n      }\n\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 4) {\n          var status = xhr.status,\n              responseText = xhr.responseText;\n\n          if (status === 0 || status > 399 && status < 600) {\n            reject({\n              url: url,\n              status: status,\n              responseText: responseText\n            });\n          } else {\n            resolve(xhr);\n          }\n        }\n      };\n\n      xhr.onerror = function () {\n        var status = xhr.status,\n            responseText = xhr.responseText;\n        reject({\n          url: url,\n          status: status,\n          responseText: responseText\n        });\n      };\n\n      xhr.send(payload);\n    });\n  };\n\n  _proto.fetchConfig = function fetchConfig(serviceName, environment) {\n    var _this3 = this;\n\n    var serverUrl = this._configService.get('serverUrl');\n\n    var configEndpoint = serverUrl + \"/config/v1/rum/agents\";\n\n    if (!serviceName) {\n      return Promise.reject('serviceName is required for fetching central config.');\n    }\n\n    configEndpoint += \"?service.name=\" + serviceName;\n\n    if (environment) {\n      configEndpoint += \"&service.environment=\" + environment;\n    }\n\n    var localConfig = this._configService.getLocalConfig();\n\n    if (localConfig) {\n      configEndpoint += \"&ifnonematch=\" + localConfig.etag;\n    }\n\n    return this._makeHttpRequest('GET', configEndpoint, {\n      timeout: 5000\n    }).then(function (xhr) {\n      var status = xhr.status,\n          responseText = xhr.responseText;\n\n      if (status === 304) {\n        return localConfig;\n      } else {\n        var remoteConfig = JSON.parse(responseText);\n        var etag = xhr.getResponseHeader('etag');\n\n        if (etag) {\n          remoteConfig.etag = etag.replace(/[\"]/g, '');\n\n          _this3._configService.setLocalConfig(remoteConfig);\n        }\n\n        return remoteConfig;\n      }\n    }).catch(function (reason) {\n      var error = _this3._constructError(reason);\n\n      return Promise.reject(error);\n    });\n  };\n\n  _proto.createMetaData = function createMetaData() {\n    var cfg = this._configService;\n    var metadata = {\n      service: {\n        name: cfg.get('serviceName'),\n        version: cfg.get('serviceVersion'),\n        agent: {\n          name: 'rum-js',\n          version: cfg.version\n        },\n        language: {\n          name: 'javascript'\n        },\n        environment: cfg.get('environment')\n      },\n      labels: cfg.get('context.tags')\n    };\n    return truncateModel(METADATA_MODEL, metadata);\n  };\n\n  _proto.addError = function addError(error) {\n    var _this$throttleEvents;\n\n    this.throttleEvents((_this$throttleEvents = {}, _this$throttleEvents[ERRORS] = error, _this$throttleEvents));\n  };\n\n  _proto.addTransaction = function addTransaction(transaction) {\n    var _this$throttleEvents2;\n\n    this.throttleEvents((_this$throttleEvents2 = {}, _this$throttleEvents2[TRANSACTIONS] = transaction, _this$throttleEvents2));\n  };\n\n  _proto.ndjsonErrors = function ndjsonErrors(errors, compress) {\n    var key = compress ? 'e' : 'error';\n    return errors.map(function (error) {\n      var _NDJSON$stringify;\n\n      return NDJSON.stringify((_NDJSON$stringify = {}, _NDJSON$stringify[key] = compress ? compressError(error) : error, _NDJSON$stringify));\n    });\n  };\n\n  _proto.ndjsonMetricsets = function ndjsonMetricsets(metricsets) {\n    return metricsets.map(function (metricset) {\n      return NDJSON.stringify({\n        metricset: metricset\n      });\n    }).join('');\n  };\n\n  _proto.ndjsonTransactions = function ndjsonTransactions(transactions, compress) {\n    var _this4 = this;\n\n    var key = compress ? 'x' : 'transaction';\n    return transactions.map(function (tr) {\n      var _NDJSON$stringify2;\n\n      var spans = '',\n          breakdowns = '';\n\n      if (!compress) {\n        if (tr.spans) {\n          spans = tr.spans.map(function (span) {\n            return NDJSON.stringify({\n              span: span\n            });\n          }).join('');\n          delete tr.spans;\n        }\n\n        if (tr.breakdown) {\n          breakdowns = _this4.ndjsonMetricsets(tr.breakdown);\n          delete tr.breakdown;\n        }\n      }\n\n      return NDJSON.stringify((_NDJSON$stringify2 = {}, _NDJSON$stringify2[key] = compress ? compressTransaction(tr) : tr, _NDJSON$stringify2)) + spans + breakdowns;\n    });\n  };\n\n  _proto.sendEvents = function sendEvents(events) {\n    var _payload, _NDJSON$stringify3;\n\n    if (events.length === 0) {\n      return;\n    }\n\n    var transactions = [];\n    var errors = [];\n\n    for (var i = 0; i < events.length; i++) {\n      var event = events[i];\n\n      if (event[TRANSACTIONS]) {\n        transactions.push(event[TRANSACTIONS]);\n      }\n\n      if (event[ERRORS]) {\n        errors.push(event[ERRORS]);\n      }\n    }\n\n    if (transactions.length === 0 && errors.length === 0) {\n      return;\n    }\n\n    var cfg = this._configService;\n    var payload = (_payload = {}, _payload[TRANSACTIONS] = transactions, _payload[ERRORS] = errors, _payload);\n    var filteredPayload = cfg.applyFilters(payload);\n\n    if (!filteredPayload) {\n      this._loggingService.warn('Dropped payload due to filtering!');\n\n      return;\n    }\n\n    var apiVersion = cfg.get('apiVersion');\n    var compress = apiVersion > 2;\n    var ndjson = [];\n    var metadata = this.createMetaData();\n    var metadataKey = compress ? 'm' : 'metadata';\n    ndjson.push(NDJSON.stringify((_NDJSON$stringify3 = {}, _NDJSON$stringify3[metadataKey] = compress ? compressMetadata(metadata) : metadata, _NDJSON$stringify3)));\n    ndjson = ndjson.concat(this.ndjsonErrors(filteredPayload[ERRORS], compress), this.ndjsonTransactions(filteredPayload[TRANSACTIONS], compress));\n    var ndjsonPayload = ndjson.join('');\n    var endPoint = cfg.get('serverUrl') + (\"/intake/v\" + apiVersion + \"/rum/events\");\n    return this._postJson(endPoint, ndjsonPayload);\n  };\n\n  return ApmServer;\n}();\n\nexport default ApmServer;","export default function throttle(fn, onThrottle, opts) {\n  var context = this;\n  var limit = opts.limit;\n  var interval = opts.interval;\n  var counter = 0;\n  var timeoutId;\n  return function () {\n    counter++;\n\n    if (typeof timeoutId === 'undefined') {\n      timeoutId = setTimeout(function () {\n        counter = 0;\n        timeoutId = undefined;\n      }, interval);\n    }\n\n    if (counter > limit && typeof onThrottle === 'function') {\n      return onThrottle.apply(context, arguments);\n    } else {\n      return fn.apply(context, arguments);\n    }\n  };\n}","import { getCurrentScript, setLabel, merge, extend } from './utils';\nimport EventHandler from './event-handler';\nimport { CONFIG_CHANGE, LOCAL_CONFIG_KEY } from './constants';\n\nfunction getConfigFromScript() {\n  var script = getCurrentScript();\n  var config = getDataAttributesFromNode(script);\n  return config;\n}\n\nfunction getDataAttributesFromNode(node) {\n  if (!node) {\n    return {};\n  }\n\n  var dataAttrs = {};\n  var dataRegex = /^data-([\\w-]+)$/;\n  var attrs = node.attributes;\n\n  for (var i = 0; i < attrs.length; i++) {\n    var attr = attrs[i];\n\n    if (dataRegex.test(attr.nodeName)) {\n      var key = attr.nodeName.match(dataRegex)[1];\n      var camelCasedkey = key.split('-').map(function (value, index) {\n        return index > 0 ? value.charAt(0).toUpperCase() + value.substring(1) : value;\n      }).join('');\n      dataAttrs[camelCasedkey] = attr.value || attr.nodeValue;\n    }\n  }\n\n  return dataAttrs;\n}\n\nvar Config = function () {\n  function Config() {\n    this.config = {\n      serviceName: '',\n      serviceVersion: '',\n      environment: '',\n      serverUrl: 'http://localhost:8200',\n      active: true,\n      instrument: true,\n      disableInstrumentations: [],\n      logLevel: 'warn',\n      breakdownMetrics: false,\n      ignoreTransactions: [],\n      eventsLimit: 80,\n      queueLimit: -1,\n      flushInterval: 500,\n      distributedTracing: true,\n      distributedTracingOrigins: [],\n      distributedTracingHeaderName: 'traceparent',\n      pageLoadTraceId: '',\n      pageLoadSpanId: '',\n      pageLoadSampled: false,\n      pageLoadTransactionName: '',\n      transactionSampleRate: 1.0,\n      centralConfig: false,\n      monitorLongtasks: true,\n      apiVersion: 2,\n      context: {}\n    };\n    this.events = new EventHandler();\n    this.filters = [];\n    this.version = '';\n  }\n\n  var _proto = Config.prototype;\n\n  _proto.init = function init() {\n    var scriptData = getConfigFromScript();\n    this.setConfig(scriptData);\n  };\n\n  _proto.isActive = function isActive() {\n    return this.get('active');\n  };\n\n  _proto.setVersion = function setVersion(version) {\n    this.version = version;\n  };\n\n  _proto.addFilter = function addFilter(cb) {\n    if (typeof cb !== 'function') {\n      throw new Error('Argument to must be function');\n    }\n\n    this.filters.push(cb);\n  };\n\n  _proto.applyFilters = function applyFilters(data) {\n    for (var i = 0; i < this.filters.length; i++) {\n      data = this.filters[i](data);\n\n      if (!data) {\n        return;\n      }\n    }\n\n    return data;\n  };\n\n  _proto.get = function get(key) {\n    return key.split('.').reduce(function (obj, objKey) {\n      return obj && obj[objKey];\n    }, this.config);\n  };\n\n  _proto.setUserContext = function setUserContext(userContext) {\n    if (userContext === void 0) {\n      userContext = {};\n    }\n\n    var context = {};\n    var _userContext = userContext,\n        id = _userContext.id,\n        username = _userContext.username,\n        email = _userContext.email;\n\n    if (typeof id === 'number' || typeof id === 'string') {\n      context.id = id;\n    }\n\n    if (typeof username === 'string') {\n      context.username = username;\n    }\n\n    if (typeof email === 'string') {\n      context.email = email;\n    }\n\n    this.config.context.user = extend(this.config.context.user || {}, context);\n  };\n\n  _proto.setCustomContext = function setCustomContext(customContext) {\n    if (customContext === void 0) {\n      customContext = {};\n    }\n\n    this.config.context.custom = extend(this.config.context.custom || {}, customContext);\n  };\n\n  _proto.addLabels = function addLabels(tags) {\n    var _this = this;\n\n    if (!this.config.context.tags) {\n      this.config.context.tags = {};\n    }\n\n    var keys = Object.keys(tags);\n    keys.forEach(function (k) {\n      return setLabel(k, tags[k], _this.config.context.tags);\n    });\n  };\n\n  _proto.setConfig = function setConfig(properties) {\n    if (properties === void 0) {\n      properties = {};\n    }\n\n    if (properties.serverUrl) {\n      properties.serverUrl = properties.serverUrl.replace(/\\/+$/, '');\n    }\n\n    merge(this.config, properties);\n    this.events.send(CONFIG_CHANGE, [this.config]);\n  };\n\n  _proto.validate = function validate(properties) {\n    if (properties === void 0) {\n      properties = {};\n    }\n\n    var requiredKeys = ['serviceName', 'serverUrl'];\n    var errors = {\n      missing: [],\n      invalid: []\n    };\n    Object.keys(properties).forEach(function (key) {\n      if (requiredKeys.indexOf(key) !== -1 && !properties[key]) {\n        errors.missing.push(key);\n      }\n    });\n\n    if (properties.serviceName && !/^[a-zA-Z0-9 _-]+$/.test(properties.serviceName)) {\n      errors.invalid.push({\n        key: 'serviceName',\n        value: properties.serviceName,\n        allowed: 'a-z, A-Z, 0-9, _, -, <space>'\n      });\n    }\n\n    var sampleRate = properties.transactionSampleRate;\n\n    if (typeof sampleRate !== 'undefined' && (typeof sampleRate !== 'number' || isNaN(sampleRate) || sampleRate < 0 || sampleRate > 1)) {\n      errors.invalid.push({\n        key: 'transactionSampleRate',\n        value: sampleRate,\n        allowed: 'Number between 0 and 1'\n      });\n    }\n\n    return errors;\n  };\n\n  _proto.getLocalConfig = function getLocalConfig() {\n    var config = sessionStorage.getItem(LOCAL_CONFIG_KEY);\n\n    if (config) {\n      return JSON.parse(config);\n    }\n  };\n\n  _proto.setLocalConfig = function setLocalConfig(config) {\n    if (config) {\n      sessionStorage.setItem(LOCAL_CONFIG_KEY, JSON.stringify(config));\n    }\n  };\n\n  return Config;\n}();\n\nexport default Config;","var _serviceCreators;\n\nimport ApmServer from './apm-server';\nimport ConfigService from './config-service';\nimport LoggingService from './logging-service';\nimport { CONFIG_CHANGE, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER } from './constants';\nimport { __DEV__ } from '../state';\nvar serviceCreators = (_serviceCreators = {}, _serviceCreators[CONFIG_SERVICE] = function () {\n  return new ConfigService();\n}, _serviceCreators[LOGGING_SERVICE] = function () {\n  return new LoggingService({\n    prefix: '[Elastic APM] '\n  });\n}, _serviceCreators[APM_SERVER] = function (factory) {\n  var _factory$getService = factory.getService([CONFIG_SERVICE, LOGGING_SERVICE]),\n      configService = _factory$getService[0],\n      loggingService = _factory$getService[1];\n\n  return new ApmServer(configService, loggingService);\n}, _serviceCreators);\n\nvar ServiceFactory = function () {\n  function ServiceFactory() {\n    this.instances = {};\n    this.initialized = false;\n  }\n\n  var _proto = ServiceFactory.prototype;\n\n  _proto.init = function init() {\n    if (this.initialized) {\n      return;\n    }\n\n    this.initialized = true;\n    var configService = this.getService(CONFIG_SERVICE);\n    configService.init();\n    var loggingService = this.getService(LOGGING_SERVICE);\n\n    function setLogLevel(loggingService, configService) {\n      var logLevel = configService.get('logLevel');\n      loggingService.setLevel(logLevel);\n    }\n\n    setLogLevel(loggingService, configService);\n    configService.events.observe(CONFIG_CHANGE, function () {\n      setLogLevel(loggingService, configService);\n    });\n    var apmServer = this.getService(APM_SERVER);\n    apmServer.init();\n  };\n\n  _proto.getService = function getService(name) {\n    var _this = this;\n\n    if (typeof name === 'string') {\n      if (!this.instances[name]) {\n        if (typeof serviceCreators[name] === 'function') {\n          this.instances[name] = serviceCreators[name](this);\n        } else if (__DEV__) {\n          console.log('Cannot get service, No creator for: ' + name);\n        }\n      }\n\n      return this.instances[name];\n    } else if (Array.isArray(name)) {\n      return name.map(function (n) {\n        return _this.getService(n);\n      });\n    }\n  };\n\n  return ServiceFactory;\n}();\n\nexport { serviceCreators, ServiceFactory };","import { noop } from './utils';\n\nvar LoggingService = function () {\n  function LoggingService(spec) {\n    if (spec === void 0) {\n      spec = {};\n    }\n\n    this.levels = ['trace', 'debug', 'info', 'warn', 'error'];\n    this.level = spec.level || 'info';\n    this.prefix = spec.prefix || '';\n    this.resetLogMethods();\n  }\n\n  var _proto = LoggingService.prototype;\n\n  _proto.shouldLog = function shouldLog(level) {\n    return this.levels.indexOf(level) >= this.levels.indexOf(this.level);\n  };\n\n  _proto.setLevel = function setLevel(level) {\n    this.level = level;\n    this.resetLogMethods();\n  };\n\n  _proto.resetLogMethods = function resetLogMethods() {\n    var loggingService = this;\n    this.levels.forEach(function (level) {\n      loggingService[level] = loggingService.shouldLog(level) ? log : noop;\n\n      function log() {\n        var prefix = loggingService.prefix;\n        var normalizedLevel;\n\n        switch (level) {\n          case 'trace':\n            normalizedLevel = 'info';\n            break;\n\n          case 'debug':\n            normalizedLevel = 'info';\n            break;\n\n          default:\n            normalizedLevel = level;\n        }\n\n        var args = arguments;\n\n        if (prefix) {\n          args[0] = prefix + args[0];\n        }\n\n        if (console) {\n          var realMethod = console[normalizedLevel] || console.log;\n\n          if (typeof realMethod === 'function') {\n            realMethod.apply(console, args);\n          }\n        }\n      }\n    });\n  };\n\n  return LoggingService;\n}();\n\nexport default LoggingService;","import { checkSameOrigin, isDtHeaderValid, parseDtHeaderValue, getDtHeaderValue, stripQueryStringFromUrl } from '../common/utils';\nimport { Url } from '../common/url';\nimport { patchEventHandler } from '../common/patching';\nimport { globalState } from '../common/patching/patch-utils';\nimport { SCHEDULE, INVOKE, TRANSACTION_END, AFTER_EVENT, FETCH, HISTORY, XMLHTTPREQUEST, EVENT_TARGET, HTTP_REQUEST_TYPE, USER_INTERACTION } from '../common/constants';\nimport { truncateModel, SPAN_MODEL, TRANSACTION_MODEL } from '../common/truncate';\nimport { __DEV__ } from '../state';\nvar SIMILAR_SPAN_TO_TRANSACTION_RATIO = 0.05;\nvar TRANSACTION_DURATION_THRESHOLD = 60000;\nexport function groupSmallContinuouslySimilarSpans(originalSpans, transDuration, threshold) {\n  originalSpans.sort(function (spanA, spanB) {\n    return spanA._start - spanB._start;\n  });\n  var spans = [];\n  var lastCount = 1;\n  originalSpans.forEach(function (span, index) {\n    if (spans.length === 0) {\n      spans.push(span);\n    } else {\n      var lastSpan = spans[spans.length - 1];\n      var isContinuouslySimilar = lastSpan.type === span.type && lastSpan.subtype === span.subtype && lastSpan.action === span.action && lastSpan.name === span.name && span.duration() / transDuration < threshold && (span._start - lastSpan._end) / transDuration < threshold;\n      var isLastSpan = originalSpans.length === index + 1;\n\n      if (isContinuouslySimilar) {\n        lastCount++;\n        lastSpan._end = span._end;\n      }\n\n      if (lastCount > 1 && (!isContinuouslySimilar || isLastSpan)) {\n        lastSpan.name = lastCount + 'x ' + lastSpan.name;\n        lastCount = 1;\n      }\n\n      if (!isContinuouslySimilar) {\n        spans.push(span);\n      }\n    }\n  });\n  return spans;\n}\nexport function adjustTransactionSpans(transaction) {\n  if (transaction.sampled) {\n    var filterdSpans = transaction.spans.filter(function (span) {\n      return span.duration() > 0 && span._start >= transaction._start && span._end <= transaction._end;\n    });\n\n    if (transaction.isManaged()) {\n      var duration = transaction.duration();\n      var similarSpans = groupSmallContinuouslySimilarSpans(filterdSpans, duration, SIMILAR_SPAN_TO_TRANSACTION_RATIO);\n      transaction.spans = similarSpans;\n    } else {\n      transaction.spans = filterdSpans;\n    }\n  } else {\n    transaction.resetSpans();\n  }\n\n  return transaction;\n}\n\nvar PerformanceMonitoring = function () {\n  function PerformanceMonitoring(apmServer, configService, loggingService, transactionService) {\n    this._apmServer = apmServer;\n    this._configService = configService;\n    this._logginService = loggingService;\n    this._transactionService = transactionService;\n  }\n\n  var _proto = PerformanceMonitoring.prototype;\n\n  _proto.init = function init(flags) {\n    var _this = this;\n\n    if (flags === void 0) {\n      flags = {};\n    }\n\n    this._configService.events.observe(TRANSACTION_END + AFTER_EVENT, function (tr) {\n      var payload = _this.createTransactionPayload(tr);\n\n      if (payload) {\n        _this._apmServer.addTransaction(payload);\n      }\n    });\n\n    if (flags[HISTORY]) {\n      patchEventHandler.observe(HISTORY, this.getHistorySub());\n    }\n\n    if (flags[XMLHTTPREQUEST]) {\n      patchEventHandler.observe(XMLHTTPREQUEST, this.getXHRSub());\n    }\n\n    if (flags[FETCH]) {\n      patchEventHandler.observe(FETCH, this.getFetchSub());\n    }\n\n    if (flags[EVENT_TARGET]) {\n      patchEventHandler.observe(EVENT_TARGET, this.getEventTargetSub());\n    }\n  };\n\n  _proto.getEventTargetSub = function getEventTargetSub() {\n    var transactionService = this._transactionService;\n    return function (event, task) {\n      if (event === SCHEDULE && task.source === EVENT_TARGET && task.eventType === 'click') {\n        var target = task.target;\n        var name = target.getAttribute('name');\n        var additionalInfo = '';\n\n        if (name) {\n          additionalInfo = \"[\\\"\" + name + \"\\\"]\";\n        }\n\n        var tagName = target.tagName.toLowerCase();\n        var tr = transactionService.startTransaction(\"Click - \" + tagName + additionalInfo, USER_INTERACTION, {\n          managed: true,\n          canReuse: true,\n          reuseThreshold: 100\n        });\n\n        if (tr) {\n          var classes = target.getAttribute('class');\n\n          if (classes) {\n            tr.addContext({\n              custom: {\n                classes: classes\n              }\n            });\n          }\n        }\n      }\n    };\n  };\n\n  _proto.getHistorySub = function getHistorySub() {\n    var transactionService = this._transactionService;\n    return function (event, task) {\n      if (task.source === HISTORY && event === INVOKE) {\n        transactionService.startTransaction(task.data.title, 'route-change', {\n          managed: true,\n          canReuse: true\n        });\n      }\n    };\n  };\n\n  _proto.getXHRSub = function getXHRSub() {\n    var _this2 = this;\n\n    return function (event, task) {\n      if (task.source === XMLHTTPREQUEST && !globalState.fetchInProgress) {\n        _this2.processAPICalls(event, task);\n      }\n    };\n  };\n\n  _proto.getFetchSub = function getFetchSub() {\n    var _this3 = this;\n\n    return function (event, task) {\n      if (task.source === FETCH) {\n        _this3.processAPICalls(event, task);\n      }\n    };\n  };\n\n  _proto.processAPICalls = function processAPICalls(event, task) {\n    var configService = this._configService;\n    var transactionService = this._transactionService;\n\n    if (event === SCHEDULE && task.data) {\n      var data = task.data;\n      var requestUrl = new Url(data.url);\n      var spanName = data.method + ' ' + (requestUrl.relative ? requestUrl.path : stripQueryStringFromUrl(requestUrl.href));\n\n      if (!transactionService.getCurrentTransaction()) {\n        transactionService.startTransaction(spanName, HTTP_REQUEST_TYPE, {\n          managed: true\n        });\n      }\n\n      var span = transactionService.startSpan(spanName, 'external.http');\n      var taskId = transactionService.addTask();\n\n      if (!span) {\n        return;\n      }\n\n      var isDtEnabled = configService.get('distributedTracing');\n      var dtOrigins = configService.get('distributedTracingOrigins');\n      var currentUrl = new Url(window.location.href);\n      var isSameOrigin = checkSameOrigin(requestUrl.origin, currentUrl.origin) || checkSameOrigin(requestUrl.origin, dtOrigins);\n      var target = data.target;\n\n      if (isDtEnabled && isSameOrigin && target) {\n        this.injectDtHeader(span, target);\n      } else if (__DEV__) {\n        this._logginService.debug(\"Could not inject distributed tracing header to the request origin ('\" + requestUrl.origin + \"') from the current origin ('\" + currentUrl.origin + \"')\");\n      }\n\n      if (data.sync) {\n        span.sync = data.sync;\n      }\n\n      data.span = span;\n      task.id = taskId;\n    } else if (event === INVOKE) {\n      if (task.data && task.data.span) {\n        task.data.span.end(null, task.data);\n      }\n\n      if (task.id) {\n        transactionService.removeTask(task.id);\n      }\n    }\n  };\n\n  _proto.injectDtHeader = function injectDtHeader(span, target) {\n    var configService = this._configService;\n    var headerName = configService.get('distributedTracingHeaderName');\n    var headerValue = getDtHeaderValue(span);\n    var isHeaderValid = isDtHeaderValid(headerValue);\n\n    if (headerName && headerValue && isHeaderValid) {\n      if (typeof target.setRequestHeader === 'function') {\n        target.setRequestHeader(headerName, headerValue);\n      } else if (target.headers && typeof target.headers.append === 'function') {\n        target.headers.append(headerName, headerValue);\n      } else {\n        target[headerName] = headerValue;\n      }\n    }\n  };\n\n  _proto.extractDtHeader = function extractDtHeader(target) {\n    var configService = this._configService;\n    var headerName = configService.get('distributedTracingHeaderName');\n\n    if (target) {\n      return parseDtHeaderValue(target[headerName]);\n    }\n  };\n\n  _proto.filterTransaction = function filterTransaction(tr) {\n    var duration = tr.duration();\n\n    if (!duration) {\n      if (__DEV__) {\n        var message = \"transaction(\" + tr.id + \", \" + tr.name + \") was discarded! \";\n\n        if (duration === 0) {\n          message += \"Transaction duration is 0\";\n        } else {\n          message += \"Transaction wasn't ended\";\n        }\n\n        this._logginService.debug(message);\n      }\n\n      return false;\n    }\n\n    if (tr.isManaged()) {\n      if (duration > TRANSACTION_DURATION_THRESHOLD) {\n        if (__DEV__) {\n          this._logginService.debug(\"transaction(\" + tr.id + \", \" + tr.name + \") was discarded! Transaction duration (\" + duration + \") is greater than managed transaction threshold (\" + TRANSACTION_DURATION_THRESHOLD + \")\");\n        }\n\n        return false;\n      }\n\n      if (tr.sampled && tr.spans.length === 0) {\n        if (__DEV__) {\n          this._logginService.debug(\"transaction(\" + tr.id + \", \" + tr.name + \") was discarded! Transaction does not have any spans\");\n        }\n\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  _proto.createTransactionDataModel = function createTransactionDataModel(transaction) {\n    var transactionStart = transaction._start;\n    var spans = transaction.spans.map(function (span) {\n      var spanData = {\n        id: span.id,\n        transaction_id: transaction.id,\n        parent_id: span.parentId || transaction.id,\n        trace_id: transaction.traceId,\n        name: span.name,\n        type: span.type,\n        subtype: span.subtype,\n        action: span.action,\n        sync: span.sync,\n        start: parseInt(span._start - transactionStart),\n        duration: span.duration(),\n        context: span.context\n      };\n      return truncateModel(SPAN_MODEL, spanData);\n    });\n    var transactionData = {\n      id: transaction.id,\n      trace_id: transaction.traceId,\n      name: transaction.name,\n      type: transaction.type,\n      duration: transaction.duration(),\n      spans: spans,\n      context: transaction.context,\n      marks: transaction.marks,\n      breakdown: transaction.breakdownTimings,\n      span_count: {\n        started: spans.length\n      },\n      sampled: transaction.sampled\n    };\n    return truncateModel(TRANSACTION_MODEL, transactionData);\n  };\n\n  _proto.createTransactionPayload = function createTransactionPayload(transaction) {\n    var adjustedTransaction = adjustTransactionSpans(transaction);\n    var filtered = this.filterTransaction(adjustedTransaction);\n\n    if (filtered) {\n      return this.createTransactionDataModel(transaction);\n    }\n  };\n\n  return PerformanceMonitoring;\n}();\n\nexport { PerformanceMonitoring as default };","import { getDuration, PERF } from '../common/utils';\nimport { PAGE_LOAD, TRUNCATED_TYPE } from '../common/constants';\nvar pageLoadBreakdowns = [['domainLookupStart', 'domainLookupEnd', 'DNS'], ['connectStart', 'connectEnd', 'TCP'], ['requestStart', 'responseStart', 'Request'], ['responseStart', 'responseEnd', 'Response'], ['domLoading', 'domComplete', 'Processing'], ['loadEventStart', 'loadEventEnd', 'Load']];\n\nfunction getValue(value) {\n  return {\n    value: value\n  };\n}\n\nfunction calculateSelfTime(transaction) {\n  var spans = transaction.spans,\n      _start = transaction._start,\n      _end = transaction._end;\n\n  if (spans.length === 0) {\n    return transaction.duration();\n  }\n\n  spans.sort(function (span1, span2) {\n    return span1._start - span2._start;\n  });\n  var span = spans[0];\n  var spanEnd = span._end;\n  var spanStart = span._start;\n  var lastContinuousEnd = spanEnd;\n  var selfTime = spanStart - _start;\n\n  for (var i = 1; i < spans.length; i++) {\n    span = spans[i];\n    spanStart = span._start;\n    spanEnd = span._end;\n\n    if (spanStart > lastContinuousEnd) {\n      selfTime += spanStart - lastContinuousEnd;\n      lastContinuousEnd = spanEnd;\n    } else if (spanEnd > lastContinuousEnd) {\n      lastContinuousEnd = spanEnd;\n    }\n  }\n\n  if (lastContinuousEnd < _end) {\n    selfTime += _end - lastContinuousEnd;\n  }\n\n  return selfTime;\n}\n\nfunction groupSpans(transaction) {\n  var spanMap = {};\n  var transactionSelfTime = calculateSelfTime(transaction);\n  spanMap['app'] = {\n    count: 1,\n    duration: transactionSelfTime\n  };\n  var spans = transaction.spans;\n\n  for (var i = 0; i < spans.length; i++) {\n    var span = spans[i];\n    var duration = span.duration();\n\n    if (duration === 0 || duration == null) {\n      continue;\n    }\n\n    var type = span.type,\n        subtype = span.subtype;\n    var key = type.replace(TRUNCATED_TYPE, '');\n\n    if (subtype) {\n      key += '.' + subtype;\n    }\n\n    if (!spanMap[key]) {\n      spanMap[key] = {\n        duration: 0,\n        count: 0\n      };\n    }\n\n    spanMap[key].count++;\n    spanMap[key].duration += duration;\n  }\n\n  return spanMap;\n}\n\nfunction getSpanBreakdown(transactionDetails, _ref) {\n  var details = _ref.details,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count,\n      duration = _ref.duration;\n  return {\n    transaction: transactionDetails,\n    span: details,\n    samples: {\n      'span.self_time.count': getValue(count),\n      'span.self_time.sum.us': getValue(duration)\n    }\n  };\n}\n\nexport function captureBreakdown(transaction, timings) {\n  if (timings === void 0) {\n    timings = PERF.timing;\n  }\n\n  var breakdowns = [];\n  var trDuration = transaction.duration();\n  var name = transaction.name,\n      type = transaction.type,\n      sampled = transaction.sampled;\n  var transactionDetails = {\n    name: name,\n    type: type\n  };\n  breakdowns.push({\n    transaction: transactionDetails,\n    samples: {\n      'transaction.duration.count': getValue(1),\n      'transaction.duration.sum.us': getValue(trDuration),\n      'transaction.breakdown.count': getValue(sampled ? 1 : 0)\n    }\n  });\n\n  if (!sampled) {\n    return breakdowns;\n  }\n\n  if (type === PAGE_LOAD && timings) {\n    for (var i = 0; i < pageLoadBreakdowns.length; i++) {\n      var current = pageLoadBreakdowns[i];\n      var start = timings[current[0]];\n      var end = timings[current[1]];\n      var duration = getDuration(start, end);\n\n      if (duration === 0 || duration == null) {\n        continue;\n      }\n\n      breakdowns.push(getSpanBreakdown(transactionDetails, {\n        details: {\n          type: current[2]\n        },\n        duration: duration\n      }));\n    }\n  } else {\n    var spanMap = groupSpans(transaction);\n    Object.keys(spanMap).forEach(function (key) {\n      var _key$split = key.split('.'),\n          type = _key$split[0],\n          subtype = _key$split[1];\n\n      var _spanMap$key = spanMap[key],\n          duration = _spanMap$key.duration,\n          count = _spanMap$key.count;\n      breakdowns.push(getSpanBreakdown(transactionDetails, {\n        details: {\n          type: type,\n          subtype: subtype\n        },\n        duration: duration,\n        count: count\n      }));\n    });\n  }\n\n  return breakdowns;\n}","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nimport Span from './span';\nimport SpanBase from './span-base';\nimport { generateRandomId, merge, now, getTime, extend, removeInvalidChars } from '../common/utils';\nimport { REUSABILITY_THRESHOLD, TRUNCATED_TYPE } from '../common/constants';\nimport { captureBreakdown as _captureBreakdown } from './breakdown';\n\nvar Transaction = function (_SpanBase) {\n  _inheritsLoose(Transaction, _SpanBase);\n\n  function Transaction(name, type, options) {\n    var _this;\n\n    _this = _SpanBase.call(this, name, type, options) || this;\n    _this.traceId = generateRandomId();\n    _this.marks = undefined;\n    _this.spans = [];\n    _this._activeSpans = {};\n    _this.nextAutoTaskId = 1;\n    _this._scheduledTasks = [];\n    _this.captureTimings = false;\n    _this.breakdownTimings = [];\n    _this.sampled = Math.random() <= _this.options.transactionSampleRate;\n    return _this;\n  }\n\n  var _proto = Transaction.prototype;\n\n  _proto.addMarks = function addMarks(obj) {\n    this.marks = merge(this.marks || {}, obj);\n  };\n\n  _proto.mark = function mark(key) {\n    var skey = removeInvalidChars(key);\n\n    var markTime = now() - this._start;\n\n    var custom = {};\n    custom[skey] = markTime;\n    this.addMarks({\n      custom: custom\n    });\n  };\n\n  _proto.canReuse = function canReuse() {\n    var threshold = this.options.reuseThreshold || REUSABILITY_THRESHOLD;\n    return !!this.options.canReuse && !this.ended && now() - this._start < threshold;\n  };\n\n  _proto.redefine = function redefine(name, type, options) {\n    if (name) {\n      this.name = name;\n    }\n\n    if (type) {\n      this.type = type;\n    }\n\n    if (options) {\n      extend(this.options, options);\n    }\n  };\n\n  _proto.startSpan = function startSpan(name, type, options) {\n    var _this2 = this;\n\n    if (this.ended) {\n      return;\n    }\n\n    var opts = extend({}, options);\n\n    opts.onEnd = function (trc) {\n      _this2._onSpanEnd(trc);\n    };\n\n    opts.traceId = this.traceId;\n    opts.sampled = this.sampled;\n\n    if (!opts.parentId) {\n      opts.parentId = this.id;\n    }\n\n    var span = new Span(name, type, opts);\n    this._activeSpans[span.id] = span;\n    return span;\n  };\n\n  _proto.isFinished = function isFinished() {\n    return this._scheduledTasks.length === 0;\n  };\n\n  _proto.detectFinish = function detectFinish() {\n    if (this.isFinished()) this.end();\n  };\n\n  _proto.end = function end(endTime) {\n    if (this.ended) {\n      return;\n    }\n\n    this.ended = true;\n    this._end = getTime(endTime);\n\n    for (var sid in this._activeSpans) {\n      var span = this._activeSpans[sid];\n      span.type = span.type + TRUNCATED_TYPE;\n      span.end(endTime);\n    }\n\n    this.callOnEnd();\n  };\n\n  _proto.captureBreakdown = function captureBreakdown() {\n    this.breakdownTimings = _captureBreakdown(this);\n  };\n\n  _proto.addTask = function addTask(taskId) {\n    if (typeof taskId === 'undefined') {\n      taskId = 'task' + this.nextAutoTaskId++;\n    }\n\n    if (this._scheduledTasks.indexOf(taskId) == -1) {\n      this._scheduledTasks.push(taskId);\n\n      return taskId;\n    }\n  };\n\n  _proto.removeTask = function removeTask(taskId) {\n    var index = this._scheduledTasks.indexOf(taskId);\n\n    if (index > -1) {\n      this._scheduledTasks.splice(index, 1);\n    }\n\n    this.detectFinish();\n  };\n\n  _proto.resetSpans = function resetSpans() {\n    this.spans = [];\n  };\n\n  _proto._onSpanEnd = function _onSpanEnd(span) {\n    this.spans.push(span);\n    delete this._activeSpans[span.id];\n  };\n\n  _proto.isManaged = function isManaged() {\n    return !!this.options.managed;\n  };\n\n  return Transaction;\n}(SpanBase);\n\nexport default Transaction;","import { LONG_TASK, LARGEST_CONTENTFUL_PAINT, FIRST_CONTENTFUL_PAINT, FIRST_INPUT } from '../common/constants';\nimport { noop, PERF } from '../common/utils';\nimport Span from './span';\nexport var metrics = {\n  fcp: 0,\n  tbt: {\n    start: Infinity,\n    duration: 0\n  }\n};\nvar LONG_TASK_THRESHOLD = 50;\n\nfunction createLongTaskSpans(longtasks) {\n  var spans = [];\n\n  for (var i = 0; i < longtasks.length; i++) {\n    var _longtasks$i = longtasks[i],\n        name = _longtasks$i.name,\n        startTime = _longtasks$i.startTime,\n        duration = _longtasks$i.duration,\n        attribution = _longtasks$i.attribution;\n    var end = startTime + duration;\n    var span = new Span(\"Longtask(\" + name + \")\", LONG_TASK, {\n      startTime: startTime\n    });\n\n    if (attribution.length > 0) {\n      var _attribution$ = attribution[0],\n          _name = _attribution$.name,\n          containerType = _attribution$.containerType,\n          containerName = _attribution$.containerName,\n          containerId = _attribution$.containerId;\n      var customContext = {\n        attribution: _name,\n        type: containerType\n      };\n\n      if (containerName) {\n        customContext.name = containerName;\n      }\n\n      if (containerId) {\n        customContext.id = containerId;\n      }\n\n      span.addContext({\n        custom: customContext\n      });\n    }\n\n    span.end(end);\n    spans.push(span);\n  }\n\n  return spans;\n}\n\nexport function createFirstInputDelaySpan(fidEntries) {\n  var firstInput = fidEntries[0];\n\n  if (firstInput) {\n    var startTime = firstInput.startTime,\n        processingStart = firstInput.processingStart;\n    var span = new Span('First Input Delay', FIRST_INPUT, {\n      startTime: startTime\n    });\n    span.end(processingStart);\n    return span;\n  }\n}\nexport function createTotalBlockingTimeSpan(tbtObject) {\n  var start = tbtObject.start,\n      duration = tbtObject.duration;\n  var tbtSpan = new Span('Total Blocking Time', LONG_TASK, {\n    startTime: start\n  });\n  tbtSpan.end(start + duration);\n  return tbtSpan;\n}\nexport function calculateTotalBlockingTime(longtaskEntries) {\n  longtaskEntries.forEach(function (entry) {\n    var name = entry.name,\n        startTime = entry.startTime,\n        duration = entry.duration;\n\n    if (startTime < metrics.fcp) {\n      return;\n    }\n\n    if (name !== 'self' && name.indexOf('same-origin') === -1) {\n      return;\n    }\n\n    metrics.tbt.start = Math.min(metrics.tbt.start, startTime);\n    var blockingTime = duration - LONG_TASK_THRESHOLD;\n\n    if (blockingTime > 0) {\n      metrics.tbt.duration += blockingTime;\n    }\n  });\n}\nexport function captureObserverEntries(list, _ref) {\n  var capturePaint = _ref.capturePaint;\n  var longtaskEntries = list.getEntriesByType(LONG_TASK);\n  var longTaskSpans = createLongTaskSpans(longtaskEntries);\n  var result = {\n    spans: longTaskSpans,\n    marks: {}\n  };\n\n  if (!capturePaint) {\n    return result;\n  }\n\n  var lcpEntries = list.getEntriesByType(LARGEST_CONTENTFUL_PAINT);\n  var lastLcpEntry = lcpEntries[lcpEntries.length - 1];\n\n  if (lastLcpEntry) {\n    var lcp = parseInt(lastLcpEntry.startTime);\n    metrics.lcp = lcp;\n    result.marks.largestContentfulPaint = lcp;\n  }\n\n  var timing = PERF.timing;\n  var unloadDiff = timing.fetchStart - timing.navigationStart;\n  var fcpEntry = list.getEntriesByName(FIRST_CONTENTFUL_PAINT)[0];\n\n  if (fcpEntry) {\n    var fcp = parseInt(unloadDiff >= 0 ? fcpEntry.startTime - unloadDiff : fcpEntry.startTime);\n    metrics.fcp = fcp;\n    result.marks.firstContentfulPaint = fcp;\n  }\n\n  var fidEntries = list.getEntriesByType(FIRST_INPUT);\n  var fidSpan = createFirstInputDelaySpan(fidEntries);\n\n  if (fidSpan) {\n    result.spans.push(fidSpan);\n  }\n\n  calculateTotalBlockingTime(longtaskEntries);\n  return result;\n}\nexport var PerfEntryRecorder = function () {\n  function PerfEntryRecorder(callback) {\n    this.po = {\n      observe: noop,\n      disconnect: noop\n    };\n\n    if (window.PerformanceObserver) {\n      this.po = new PerformanceObserver(callback);\n    }\n  }\n\n  var _proto = PerfEntryRecorder.prototype;\n\n  _proto.start = function start(type) {\n    try {\n      var buffered = true;\n\n      if (type === LONG_TASK) {\n        buffered = false;\n      }\n\n      this.po.observe({\n        type: type,\n        buffered: buffered\n      });\n    } catch (_) {}\n  };\n\n  _proto.stop = function stop() {\n    this.po.disconnect();\n  };\n\n  return PerfEntryRecorder;\n}();","import { Promise } from '../common/polyfills';\nimport Transaction from './transaction';\nimport { PerfEntryRecorder, captureObserverEntries, metrics, createTotalBlockingTimeSpan } from './metrics';\nimport { extend, getEarliestSpan, getLatestNonXHRSpan } from '../common/utils';\nimport { captureNavigation } from './capture-navigation';\nimport { PAGE_LOAD, NAME_UNKNOWN, TRANSACTION_START, TRANSACTION_END, TEMPORARY_TYPE, TRANSACTION_TYPE_ORDER, LARGEST_CONTENTFUL_PAINT, LONG_TASK, PAINT, TRUNCATED_TYPE, FIRST_INPUT } from '../common/constants';\nimport { addTransactionContext } from '../common/context';\nimport { __DEV__, state } from '../state';\nimport { slugifyUrl } from '../common/url';\n\nvar TransactionService = function () {\n  function TransactionService(logger, config) {\n    var _this = this;\n\n    this._config = config;\n    this._logger = logger;\n    this.currentTransaction = undefined;\n    this.respIntervalId = undefined;\n    this.recorder = new PerfEntryRecorder(function (list) {\n      var tr = _this.getCurrentTransaction();\n\n      if (tr && tr.captureTimings) {\n        var _tr$spans;\n\n        var capturePaint = false;\n\n        if (tr.type === PAGE_LOAD) {\n          capturePaint = true;\n        }\n\n        var _captureObserverEntri = captureObserverEntries(list, {\n          capturePaint: capturePaint\n        }),\n            spans = _captureObserverEntri.spans,\n            marks = _captureObserverEntri.marks;\n\n        (_tr$spans = tr.spans).push.apply(_tr$spans, spans);\n\n        tr.addMarks({\n          agent: marks\n        });\n      }\n    });\n  }\n\n  var _proto = TransactionService.prototype;\n\n  _proto.ensureCurrentTransaction = function ensureCurrentTransaction(name, type, options) {\n    var tr = this.getCurrentTransaction();\n\n    if (tr) {\n      return tr;\n    } else {\n      tr = new Transaction(name, type, options);\n      this.setCurrentTransaction(tr);\n    }\n\n    return tr;\n  };\n\n  _proto.getCurrentTransaction = function getCurrentTransaction() {\n    if (this.currentTransaction && !this.currentTransaction.ended) {\n      return this.currentTransaction;\n    }\n  };\n\n  _proto.setCurrentTransaction = function setCurrentTransaction(value) {\n    this.currentTransaction = value;\n  };\n\n  _proto.createOptions = function createOptions(options) {\n    var config = this._config.config;\n    var presetOptions = {\n      transactionSampleRate: config.transactionSampleRate\n    };\n    var perfOptions = extend(presetOptions, options);\n\n    if (perfOptions.managed) {\n      perfOptions = extend({\n        pageLoadTraceId: config.pageLoadTraceId,\n        pageLoadSampled: config.pageLoadSampled,\n        pageLoadSpanId: config.pageLoadSpanId,\n        pageLoadTransactionName: config.pageLoadTransactionName\n      }, perfOptions);\n    }\n\n    return perfOptions;\n  };\n\n  _proto.startManagedTransaction = function startManagedTransaction(name, type, perfOptions) {\n    var tr = this.getCurrentTransaction();\n    var isRedefined = false;\n\n    if (!tr) {\n      tr = this.ensureCurrentTransaction(name, type, perfOptions);\n    } else if (tr.canReuse() && perfOptions.canReuse) {\n      var redefineType = tr.type;\n      var currentTypeOrder = TRANSACTION_TYPE_ORDER.indexOf(tr.type);\n      var redefineTypeOrder = TRANSACTION_TYPE_ORDER.indexOf(type);\n\n      if (currentTypeOrder >= 0 && redefineTypeOrder < currentTypeOrder) {\n        redefineType = type;\n      }\n\n      if (__DEV__) {\n        this._logger.debug(\"redefining transaction(\" + tr.id + \", \" + tr.name + \", \" + tr.type + \")\", 'to', \"(\" + (name || tr.name) + \", \" + redefineType + \")\", tr);\n      }\n\n      tr.redefine(name, redefineType, perfOptions);\n      isRedefined = true;\n    } else {\n      if (__DEV__) {\n        this._logger.debug(\"ending previous transaction(\" + tr.id + \", \" + tr.name + \")\", tr);\n      }\n\n      tr.end();\n      tr = this.ensureCurrentTransaction(name, type, perfOptions);\n    }\n\n    if (tr.type === PAGE_LOAD) {\n      if (!isRedefined) {\n        this.recorder.start(LARGEST_CONTENTFUL_PAINT);\n        this.recorder.start(PAINT);\n        this.recorder.start(FIRST_INPUT);\n      }\n\n      if (perfOptions.pageLoadTraceId) {\n        tr.traceId = perfOptions.pageLoadTraceId;\n      }\n\n      if (perfOptions.pageLoadSampled) {\n        tr.sampled = perfOptions.pageLoadSampled;\n      }\n\n      if (tr.name === NAME_UNKNOWN && perfOptions.pageLoadTransactionName) {\n        tr.name = perfOptions.pageLoadTransactionName;\n      }\n    }\n\n    if (!isRedefined && this._config.get('monitorLongtasks')) {\n      this.recorder.start(LONG_TASK);\n    }\n\n    if (tr.sampled) {\n      tr.captureTimings = true;\n    }\n\n    return tr;\n  };\n\n  _proto.startTransaction = function startTransaction(name, type, options) {\n    var _this2 = this;\n\n    var perfOptions = this.createOptions(options);\n    var tr;\n    var fireOnstartHook = true;\n\n    if (perfOptions.managed) {\n      var current = this.currentTransaction;\n      tr = this.startManagedTransaction(name, type, perfOptions);\n\n      if (current === tr) {\n        fireOnstartHook = false;\n      }\n    } else {\n      tr = new Transaction(name, type, perfOptions);\n    }\n\n    tr.onEnd = function () {\n      return _this2.handleTransactionEnd(tr);\n    };\n\n    if (fireOnstartHook) {\n      if (__DEV__) {\n        this._logger.debug(\"startTransaction(\" + tr.id + \", \" + tr.name + \", \" + tr.type + \")\");\n      }\n\n      this._config.events.send(TRANSACTION_START, [tr]);\n    }\n\n    return tr;\n  };\n\n  _proto.handleTransactionEnd = function handleTransactionEnd(tr) {\n    var _this3 = this;\n\n    this.recorder.stop();\n    var currentUrl = window.location.href;\n    return Promise.resolve().then(function () {\n      var name = tr.name,\n          type = tr.type;\n      var lastHiddenStart = state.lastHiddenStart;\n\n      if (lastHiddenStart >= tr._start) {\n        if (__DEV__) {\n          _this3._logger.debug(\"transaction(\" + tr.id + \", \" + name + \", \" + type + \") was discarded! The page was hidden during the transaction!\");\n        }\n\n        return;\n      }\n\n      if (_this3.shouldIgnoreTransaction(name) || type === TEMPORARY_TYPE) {\n        if (__DEV__) {\n          _this3._logger.debug(\"transaction(\" + tr.id + \", \" + name + \", \" + type + \") is ignored\");\n        }\n\n        return;\n      }\n\n      if (type === PAGE_LOAD) {\n        var pageLoadTransactionName = _this3._config.get('pageLoadTransactionName');\n\n        if (name === NAME_UNKNOWN && pageLoadTransactionName) {\n          tr.name = pageLoadTransactionName;\n        }\n\n        if (tr.captureTimings && metrics.tbt.duration > 0) {\n          tr.spans.push(createTotalBlockingTimeSpan(metrics.tbt));\n        }\n      }\n\n      if (tr.name === NAME_UNKNOWN) {\n        tr.name = slugifyUrl(currentUrl);\n      }\n\n      captureNavigation(tr);\n\n      _this3.adjustTransactionTime(tr);\n\n      var breakdownMetrics = _this3._config.get('breakdownMetrics');\n\n      if (breakdownMetrics) {\n        tr.captureBreakdown();\n      }\n\n      var configContext = _this3._config.get('context');\n\n      addTransactionContext(tr, configContext);\n\n      _this3._config.events.send(TRANSACTION_END, [tr]);\n\n      if (__DEV__) {\n        _this3._logger.debug(\"end transaction(\" + tr.id + \", \" + tr.name + \")\", tr);\n      }\n    }, function (err) {\n      if (__DEV__) {\n        _this3._logger.debug(\"error ending transaction(\" + tr.id + \", \" + tr.name + \")\", err);\n      }\n    });\n  };\n\n  _proto.adjustTransactionTime = function adjustTransactionTime(transaction) {\n    var spans = transaction.spans;\n    var earliestSpan = getEarliestSpan(spans);\n\n    if (earliestSpan && earliestSpan._start < transaction._start) {\n      transaction._start = earliestSpan._start;\n    }\n\n    var latestSpan = getLatestNonXHRSpan(spans);\n\n    if (latestSpan && latestSpan._end > transaction._end) {\n      transaction._end = latestSpan._end;\n    }\n\n    var transactionEnd = transaction._end;\n\n    for (var i = 0; i < spans.length; i++) {\n      var span = spans[i];\n\n      if (span._end > transactionEnd) {\n        span._end = transactionEnd;\n        span.type += TRUNCATED_TYPE;\n      }\n\n      if (span._start > transactionEnd) {\n        span._start = transactionEnd;\n      }\n    }\n  };\n\n  _proto.shouldIgnoreTransaction = function shouldIgnoreTransaction(transactionName) {\n    var ignoreList = this._config.get('ignoreTransactions');\n\n    if (ignoreList && ignoreList.length) {\n      for (var i = 0; i < ignoreList.length; i++) {\n        var element = ignoreList[i];\n\n        if (typeof element.test === 'function') {\n          if (element.test(transactionName)) {\n            return true;\n          }\n        } else if (element === transactionName) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  _proto.startSpan = function startSpan(name, type, options) {\n    var tr = this.ensureCurrentTransaction(undefined, TEMPORARY_TYPE, this.createOptions({\n      canReuse: true,\n      managed: true\n    }));\n\n    if (tr) {\n      var span = tr.startSpan(name, type, options);\n\n      if (__DEV__) {\n        this._logger.debug(\"startSpan(\" + name + \", \" + type + \")\", \"on transaction(\" + tr.id + \", \" + tr.name + \")\");\n      }\n\n      return span;\n    }\n  };\n\n  _proto.addTask = function addTask(taskId) {\n    var tr = this.ensureCurrentTransaction(undefined, TEMPORARY_TYPE, this.createOptions({\n      canReuse: true,\n      managed: true\n    }));\n\n    if (tr) {\n      var taskId = tr.addTask(taskId);\n\n      if (__DEV__) {\n        this._logger.debug(\"addTask(\" + taskId + \")\", \"on transaction(\" + tr.id + \", \" + tr.name + \")\");\n      }\n    }\n\n    return taskId;\n  };\n\n  _proto.removeTask = function removeTask(taskId) {\n    var tr = this.getCurrentTransaction();\n\n    if (tr) {\n      tr.removeTask(taskId);\n\n      if (__DEV__) {\n        this._logger.debug(\"removeTask(\" + taskId + \")\", \"on transaction(\" + tr.id + \", \" + tr.name + \")\");\n      }\n    }\n  };\n\n  return TransactionService;\n}();\n\nexport default TransactionService;","import { registerServices as registerErrorServices } from './error-logging';\nimport { registerServices as registerPerfServices } from './performance-monitoring';\nimport { ServiceFactory } from './common/service-factory';\nimport { isPlatformSupported, scheduleMicroTask, scheduleMacroTask, isBrowser } from './common/utils';\nimport { patchAll, patchEventHandler } from './common/patching';\nimport { PAGE_LOAD, ERROR, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER } from './common/constants';\nimport { getInstrumentationFlags } from './common/instrument';\nimport afterFrame from './common/after-frame';\nimport { bootstrap } from './bootstrap';\nimport { createTracer } from './opentracing';\n\nfunction createServiceFactory() {\n  registerPerfServices();\n  registerErrorServices();\n  var serviceFactory = new ServiceFactory();\n  return serviceFactory;\n}\n\nexport { createServiceFactory, ServiceFactory, patchAll, patchEventHandler, isPlatformSupported, isBrowser, getInstrumentationFlags, createTracer, scheduleMicroTask, scheduleMacroTask, afterFrame, ERROR, PAGE_LOAD, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER, bootstrap };","import PerformanceMonitoring from './performance-monitoring';\nimport TransactionService from './transaction-service';\nimport { APM_SERVER, CONFIG_SERVICE, LOGGING_SERVICE } from '../common/constants';\nimport { serviceCreators } from '../common/service-factory';\n\nfunction registerServices() {\n  serviceCreators['TransactionService'] = function (serviceFactory) {\n    var _serviceFactory$getSe = serviceFactory.getService([LOGGING_SERVICE, CONFIG_SERVICE]),\n        loggingService = _serviceFactory$getSe[0],\n        configService = _serviceFactory$getSe[1];\n\n    return new TransactionService(loggingService, configService);\n  };\n\n  serviceCreators['PerformanceMonitoring'] = function (serviceFactory) {\n    var _serviceFactory$getSe2 = serviceFactory.getService([APM_SERVER, CONFIG_SERVICE, LOGGING_SERVICE, 'TransactionService']),\n        apmServer = _serviceFactory$getSe2[0],\n        configService = _serviceFactory$getSe2[1],\n        loggingService = _serviceFactory$getSe2[2],\n        transactionService = _serviceFactory$getSe2[3];\n\n    return new PerformanceMonitoring(apmServer, configService, loggingService, transactionService);\n  };\n}\n\nexport { registerServices };","import ErrorLogging from './error-logging';\nimport { CONFIG_SERVICE, APM_SERVER } from '../common/constants';\nimport { serviceCreators } from '../common/service-factory';\n\nfunction registerServices() {\n  serviceCreators['ErrorLogging'] = function (serviceFactory) {\n    var _serviceFactory$getSe = serviceFactory.getService([APM_SERVER, CONFIG_SERVICE, 'TransactionService']),\n        apmServer = _serviceFactory$getSe[0],\n        configService = _serviceFactory$getSe[1],\n        transactionService = _serviceFactory$getSe[2];\n\n    return new ErrorLogging(apmServer, configService, transactionService);\n  };\n}\n\nexport { registerServices };","import { getInstrumentationFlags, PAGE_LOAD, ERROR, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER } from '@elastic/apm-rum-core';\n\nvar ApmBase = function () {\n  function ApmBase(serviceFactory, disable) {\n    this._disable = disable;\n    this.serviceFactory = serviceFactory;\n    this._initialized = false;\n  }\n\n  var _proto = ApmBase.prototype;\n\n  _proto.init = function init(config) {\n    var _this = this;\n\n    if (this.isEnabled() && !this._initialized) {\n      this._initialized = true;\n\n      var _this$serviceFactory$ = this.serviceFactory.getService([CONFIG_SERVICE, LOGGING_SERVICE]),\n          configService = _this$serviceFactory$[0],\n          loggingService = _this$serviceFactory$[1];\n\n      configService.setVersion('5.4.0');\n      this.config(config);\n\n      if (configService.isActive()) {\n        this.serviceFactory.init();\n        var flags = getInstrumentationFlags(configService.get('instrument'), configService.get('disableInstrumentations'));\n        var performanceMonitoring = this.serviceFactory.getService('PerformanceMonitoring');\n        performanceMonitoring.init(flags);\n\n        if (flags[ERROR]) {\n          var errorLogging = this.serviceFactory.getService('ErrorLogging');\n          errorLogging.registerListeners();\n        }\n\n        var sendPageLoad = function sendPageLoad() {\n          return flags[PAGE_LOAD] && _this._sendPageLoadMetrics();\n        };\n\n        if (configService.get('centralConfig')) {\n          this.fetchCentralConfig().then(sendPageLoad);\n        } else {\n          sendPageLoad();\n        }\n      } else {\n        this._disable = true;\n        loggingService.info('RUM agent is inactive');\n      }\n    }\n\n    return this;\n  };\n\n  _proto.fetchCentralConfig = function fetchCentralConfig() {\n    var _this$serviceFactory$2 = this.serviceFactory.getService([APM_SERVER, LOGGING_SERVICE, CONFIG_SERVICE]),\n        apmServer = _this$serviceFactory$2[0],\n        loggingService = _this$serviceFactory$2[1],\n        configService = _this$serviceFactory$2[2];\n\n    return apmServer.fetchConfig(configService.get('serviceName'), configService.get('environment')).then(function (config) {\n      var transactionSampleRate = config['transaction_sample_rate'];\n\n      if (transactionSampleRate) {\n        transactionSampleRate = Number(transactionSampleRate);\n        var _config2 = {\n          transactionSampleRate: transactionSampleRate\n        };\n\n        var _configService$valida = configService.validate(_config2),\n            invalid = _configService$valida.invalid;\n\n        if (invalid.length === 0) {\n          configService.setConfig(_config2);\n        } else {\n          var _invalid$ = invalid[0],\n              key = _invalid$.key,\n              value = _invalid$.value,\n              allowed = _invalid$.allowed;\n          loggingService.warn(\"invalid value \\\"\" + value + \"\\\" for \" + key + \". Allowed: \" + allowed + \".\");\n        }\n      }\n\n      return config;\n    }).catch(function (error) {\n      loggingService.warn('failed fetching config:', error);\n    });\n  };\n\n  _proto._sendPageLoadMetrics = function _sendPageLoadMetrics() {\n    var tr = this.startTransaction(undefined, PAGE_LOAD, {\n      managed: true,\n      canReuse: true\n    });\n\n    if (tr) {\n      tr.addTask(PAGE_LOAD);\n    }\n\n    var sendPageLoadMetrics = function sendPageLoadMetrics() {\n      setTimeout(function () {\n        if (tr) {\n          tr.removeTask(PAGE_LOAD);\n        }\n      });\n    };\n\n    if (document.readyState === 'complete') {\n      sendPageLoadMetrics();\n    } else {\n      window.addEventListener('load', sendPageLoadMetrics);\n    }\n  };\n\n  _proto.isEnabled = function isEnabled() {\n    return !this._disable;\n  };\n\n  _proto.observe = function observe(name, fn) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.events.observe(name, fn);\n  };\n\n  _proto.config = function config(_config) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n\n    var _configService$valida2 = configService.validate(_config),\n        missing = _configService$valida2.missing,\n        invalid = _configService$valida2.invalid;\n\n    if (missing.length === 0 && invalid.length === 0) {\n      configService.setConfig(_config);\n    } else {\n      var loggingService = this.serviceFactory.getService(LOGGING_SERVICE);\n      var separator = ', ';\n      var message = \"RUM agent isn't correctly configured. \";\n\n      if (missing.length > 0) {\n        message += missing.join(separator) + ' is missing';\n\n        if (invalid.length > 0) {\n          message += separator;\n        }\n      }\n\n      invalid.forEach(function (_ref, index) {\n        var key = _ref.key,\n            value = _ref.value,\n            allowed = _ref.allowed;\n        message += key + \" \\\"\" + value + \"\\\" contains invalid characters! (allowed: \" + allowed + \")\" + (index !== invalid.length - 1 ? separator : '');\n      });\n      loggingService.error(message);\n      configService.setConfig({\n        active: false\n      });\n    }\n  };\n\n  _proto.setUserContext = function setUserContext(userContext) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.setUserContext(userContext);\n  };\n\n  _proto.setCustomContext = function setCustomContext(customContext) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.setCustomContext(customContext);\n  };\n\n  _proto.addLabels = function addLabels(labels) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.addLabels(labels);\n  };\n\n  _proto.setInitialPageLoadName = function setInitialPageLoadName(name) {\n    if (this.isEnabled()) {\n      var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n      configService.setConfig({\n        pageLoadTransactionName: name\n      });\n    }\n  };\n\n  _proto.startTransaction = function startTransaction(name, type, options) {\n    if (this.isEnabled()) {\n      var transactionService = this.serviceFactory.getService('TransactionService');\n      return transactionService.startTransaction(name, type, options);\n    }\n  };\n\n  _proto.startSpan = function startSpan(name, type) {\n    if (this.isEnabled()) {\n      var transactionService = this.serviceFactory.getService('TransactionService');\n      return transactionService.startSpan(name, type);\n    }\n  };\n\n  _proto.getCurrentTransaction = function getCurrentTransaction() {\n    if (this.isEnabled()) {\n      var transactionService = this.serviceFactory.getService('TransactionService');\n      return transactionService.getCurrentTransaction();\n    }\n  };\n\n  _proto.captureError = function captureError(error) {\n    if (this.isEnabled()) {\n      var errorLogging = this.serviceFactory.getService('ErrorLogging');\n      return errorLogging.logError(error);\n    }\n  };\n\n  _proto.addFilter = function addFilter(fn) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.addFilter(fn);\n  };\n\n  return ApmBase;\n}();\n\nexport { ApmBase as default };","import { XMLHTTPREQUEST, FETCH, HISTORY, PAGE_LOAD, ERROR, EVENT_TARGET } from './constants';\nexport function getInstrumentationFlags(instrument, disabledInstrumentations) {\n  var _flags;\n\n  var flags = (_flags = {}, _flags[XMLHTTPREQUEST] = false, _flags[FETCH] = false, _flags[HISTORY] = false, _flags[PAGE_LOAD] = false, _flags[ERROR] = false, _flags[EVENT_TARGET] = false, _flags);\n\n  if (!instrument) {\n    return flags;\n  }\n\n  Object.keys(flags).forEach(function (key) {\n    if (disabledInstrumentations.indexOf(key) === -1) {\n      flags[key] = true;\n    }\n  });\n  return flags;\n}","import { createServiceFactory, bootstrap, isBrowser } from '@elastic/apm-rum-core';\nimport ApmBase from './apm-base';\n\nfunction getApmBase() {\n  if (isBrowser && window.elasticApm) {\n    return window.elasticApm;\n  }\n\n  var enabled = bootstrap();\n  var serviceFactory = createServiceFactory();\n  var apmBase = new ApmBase(serviceFactory, !enabled);\n\n  if (isBrowser) {\n    window.elasticApm = apmBase;\n  }\n\n  return apmBase;\n}\n\nvar apmBase = getApmBase();\nvar init = apmBase.init.bind(apmBase);\nexport default init;\nexport { init, apmBase, ApmBase, apmBase as apm };","import { ReactElement } from \"react\";\nimport styled from \"styled-components\";\n\nconst FullWidth = styled.footer`\n  width: 100%;\n  background: #ebebeb;\n\n  flex-shrink: 0;\n  padding: 12px 64px;\n\n  display: flex;\n  justify-content: space-between;\n`;\n\nexport function Footer(): ReactElement {\n  return (\n    <FullWidth>\n      <div>\n        Made by students @{\" \"}\n        <a\n          onClick={() => {\n            window.open(\"https://sandboxnu.com\");\n          }}\n        >\n          Sandbox\n        </a>\n        . Source on{\" \"}\n        <a\n          onClick={() => {\n            window.open(\"https://github.com/sandboxnu/office-hours\");\n          }}\n        >\n          GitHub.\n        </a>\n      </div>\n      <div>\n        <a\n          onClick={() => {\n            window.open(\n              \"https://github.com/sandboxnu/office-hours/discussions\"\n            );\n          }}\n        >\n          Give us feedback\n        </a>\n        <span> or </span>\n        <a\n          onClick={() => {\n            window.open(\n              \"https://forms.monday.com/forms/06be3745a411353ad295249d43835d38\"\n            );\n          }}\n        >\n          File a bug report\n        </a>\n      </div>\n    </FullWidth>\n  );\n}\n","import { apm } from \"@elastic/apm-rum\";\nimport { Result } from \"antd\";\nimport React, { ReactNode } from \"react\";\n\ninterface EBState {\n  hasError: boolean;\n}\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport class ErrorBoundary extends React.Component<{}, EBState> {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error): EBState {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo): void {\n    if (window) {\n      apm.captureError(error);\n    }\n  }\n\n  render(): ReactNode {\n    if (this.state.hasError) {\n      return (\n        <Result\n          status=\"500\"\n          title=\"We hit an unexpected error.\"\n          subTitle=\"Sorry about that! A report has automatically been filed. Try refreshing the page.\"\n        />\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","import \"antd/dist/antd.css\";\nimport { AppProps } from \"next/app\";\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\nimport \"../styles/global.css\";\nimport { init as initApm } from \"@elastic/apm-rum\";\nimport { Footer } from \"../components/common/Footer\";\nimport styled from \"styled-components\";\nimport { ReactElement } from \"react\";\nimport { ErrorBoundary } from \"../components/common/ErrorBoundary\";\n\nif (process.env.NODE_ENV === \"production\" && typeof window !== \"undefined\") {\n  initApm({\n    serviceName: `${window.location.hostname.replace(/\\./g, \"-\")}-frontend`,\n    serverUrl: process.env.NEXT_PUBLIC_APM_SERVER,\n    serviceVersion: process.env.NEXT_PUBLIC_SERVICE_VERSION,\n  });\n}\n\nconst Layout = styled.div`\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Content = styled.div`\n  flex: 1 0 auto;\n  display: flex;\n  flex-direction: column;\n`;\n\nfunction MyApp({ Component, pageProps }: AppProps): ReactElement {\n  return (\n    <Layout>\n      <Content>\n        <ErrorBoundary>\n          <Component {...pageProps} />\n        </ErrorBoundary>\n      </Content>\n      <Footer />\n    </Layout>\n  );\n}\n\nexport default MyApp;\n","(function (root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function () {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function StackFrame(functionName, args, fileName, lineNumber, columnNumber, source) {\n        if (functionName !== undefined) {\n            this.setFunctionName(functionName);\n        }\n        if (args !== undefined) {\n            this.setArgs(args);\n        }\n        if (fileName !== undefined) {\n            this.setFileName(fileName);\n        }\n        if (lineNumber !== undefined) {\n            this.setLineNumber(lineNumber);\n        }\n        if (columnNumber !== undefined) {\n            this.setColumnNumber(columnNumber);\n        }\n        if (source !== undefined) {\n            this.setSource(source);\n        }\n    }\n\n    StackFrame.prototype = {\n        getFunctionName: function () {\n            return this.functionName;\n        },\n        setFunctionName: function (v) {\n            this.functionName = String(v);\n        },\n\n        getArgs: function () {\n            return this.args;\n        },\n        setArgs: function (v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        // NOTE: Property name may be misleading as it includes the path,\n        // but it somewhat mirrors V8's JavaScriptStackTraceApi\n        // https://code.google.com/p/v8/wiki/JavaScriptStackTraceApi and Gecko's\n        // http://mxr.mozilla.org/mozilla-central/source/xpcom/base/nsIException.idl#14\n        getFileName: function () {\n            return this.fileName;\n        },\n        setFileName: function (v) {\n            this.fileName = String(v);\n        },\n\n        getLineNumber: function () {\n            return this.lineNumber;\n        },\n        setLineNumber: function (v) {\n            if (!_isNumber(v)) {\n                throw new TypeError('Line Number must be a Number');\n            }\n            this.lineNumber = Number(v);\n        },\n\n        getColumnNumber: function () {\n            return this.columnNumber;\n        },\n        setColumnNumber: function (v) {\n            if (!_isNumber(v)) {\n                throw new TypeError('Column Number must be a Number');\n            }\n            this.columnNumber = Number(v);\n        },\n\n        getSource: function () {\n            return this.source;\n        },\n        setSource: function (v) {\n            this.source = String(v);\n        },\n\n        toString: function() {\n            var functionName = this.getFunctionName() || '{anonymous}';\n            var args = '(' + (this.getArgs() || []).join(',') + ')';\n            var fileName = this.getFileName() ? ('@' + this.getFileName()) : '';\n            var lineNumber = _isNumber(this.getLineNumber()) ? (':' + this.getLineNumber()) : '';\n            var columnNumber = _isNumber(this.getColumnNumber()) ? (':' + this.getColumnNumber()) : '';\n            return functionName + args + fileName + lineNumber + columnNumber;\n        }\n    };\n\n    return StackFrame;\n}));\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}"],"sourceRoot":""}