{"ast":null,"code":"import { API } from \"@koh/api-client\";\nimport { GetQueueResponse } from \"@koh/common\";\nimport useSWR from \"swr\";\nimport { useCallback } from \"react\";\nimport { useEventSource } from \"./useEventSource\";\nimport { plainToClass } from \"class-transformer\";\nexport function useQueue(qid) {\n  const {\n    data: queue,\n    error: queueError,\n    mutate: mutateQueue\n  } = useSWR(qid && `/api/v1/queues/${qid}`, async () => API.queues.get(Number(qid)));\n  const isQueueLive = useEventSource(qid && `/api/v1/queues/${qid}/sse`, \"queue\", useCallback(data => {\n    if (data.queue) {\n      mutateQueue(plainToClass(GetQueueResponse, data.queue), false);\n    }\n  }, [mutateQueue]));\n  return {\n    queue,\n    queueError,\n    mutateQueue,\n    isQueueLive\n  };\n}","map":null,"metadata":{},"sourceType":"module"}