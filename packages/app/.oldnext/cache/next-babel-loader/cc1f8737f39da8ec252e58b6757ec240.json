{"ast":null,"code":"import { API } from \"@koh/api-client\";\nimport { ListQuestionsResponse } from \"@koh/common\";\nimport { plainToClass } from \"class-transformer\";\nimport { useCallback } from \"react\";\nimport useSWR from \"swr\";\nimport { useEventSource } from \"./useEventSource\";\nexport function useQuestions(qid) {\n  const {\n    data: questions,\n    error: questionsError,\n    mutate: mutateQuestions\n  } = useSWR(qid && `/api/v1/queues/${qid}/questions`, async () => API.questions.index(Number(qid))); // Subscribe to sse\n\n  useEventSource(qid && `/api/v1/queues/${qid}/sse`, \"question\", useCallback(data => {\n    if (data.questions) {\n      mutateQuestions(plainToClass(ListQuestionsResponse, data.questions), false);\n    }\n  }, [mutateQuestions]));\n  return {\n    questions,\n    questionsError,\n    mutateQuestions\n  };\n}","map":null,"metadata":{},"sourceType":"module"}