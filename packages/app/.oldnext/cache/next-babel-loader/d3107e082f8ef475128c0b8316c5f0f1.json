{"ast":null,"code":"var __jsx = React.createElement;\nimport { QuestionStatusKeys, Role } from \"@koh/common\";\nimport { Tooltip } from \"antd\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useProfile } from \"../../../hooks/useProfile\";\nimport { useQuestions } from \"../../../hooks/useQuestions\";\nimport { useQueue } from \"../../../hooks/useQueue\";\nimport { useRoleInCourse } from \"../../../hooks/useRoleInCourse\";\nimport { useTAInQueueInfo } from \"../../../hooks/useTAInQueueInfo\";\nimport TACheckinButton from \"../../Today/TACheckinButton\";\nimport { QueueInfoColumn, QueueInfoColumnButton } from \"../QueueListSharedComponents\";\nimport { EditQueueModal } from \"./EditQueueModal\";\nimport onHelpQuestion from \"./onHelpQuestion\";\nimport TAQueueListDetail from \"./TAQueueListDetail\";\nconst Container = styled.div.withConfig({\n  displayName: \"TAQueue__Container\",\n  componentId: \"sc-173p98z-0\"\n})([\"flex:1;display:flex;flex-direction:column;@media (min-width:650px){flex-direction:row;}\"]);\nconst HelpNextButton = styled(QueueInfoColumnButton).withConfig({\n  displayName: \"TAQueue__HelpNextButton\",\n  componentId: \"sc-173p98z-1\"\n})([\"color:white;background:#2a9187;&:hover,&:focus{color:white;background:#39aca1;}\"]);\nconst EditQueueButton = styled(QueueInfoColumnButton).withConfig({\n  displayName: \"TAQueue__EditQueueButton\",\n  componentId: \"sc-173p98z-2\"\n})([\"color:#212934;\"]);\nconst MiddleSpacer = styled.div.withConfig({\n  displayName: \"TAQueue__MiddleSpacer\",\n  componentId: \"sc-173p98z-3\"\n})([\"margin-left:20px;\"]);\nexport default function TAQueue({\n  qid,\n  courseId\n}) {\n  var _questions$queue;\n\n  const user = useProfile();\n  const role = useRoleInCourse(courseId);\n  const {\n    queue,\n    mutateQueue\n  } = useQueue(qid);\n  const {\n    questions,\n    mutateQuestions\n  } = useQuestions(qid);\n  const {\n    isCheckedIn,\n    isHelping\n  } = useTAInQueueInfo(qid);\n  const {\n    0: queueSettingsModal,\n    1: setQueueSettingsModal\n  } = useState(false);\n  const nextQuestion = (questions === null || questions === void 0 ? void 0 : questions.priorityQueue[0]) || ( // gets the first item of priority queue if it exists\n  questions === null || questions === void 0 ? void 0 : (_questions$queue = questions.queue) === null || _questions$queue === void 0 ? void 0 : _questions$queue.find(question => question.status === QuestionStatusKeys.Queued));\n\n  const helpNext = async () => {\n    await onHelpQuestion(nextQuestion.id);\n    mutateQuestions();\n    window.open(`https://teams.microsoft.com/l/chat/0/0?users=${nextQuestion.creator.email}`);\n  };\n\n  if (queue) {\n    return __jsx(React.Fragment, null, __jsx(Container, null, __jsx(QueueInfoColumn, {\n      queueId: qid,\n      buttons: __jsx(React.Fragment, null, __jsx(EditQueueButton, {\n        \"data-cy\": \"editQueue\",\n        onClick: () => setQueueSettingsModal(true)\n      }, \"Edit Queue Details\"), __jsx(Tooltip, {\n        title: !isCheckedIn && \"You must check in to help students!\"\n      }, __jsx(HelpNextButton, {\n        onClick: helpNext,\n        disabled: !isCheckedIn || !nextQuestion || isHelping,\n        \"data-cy\": \"help-next\"\n      }, \"Help Next\")), __jsx(\"div\", {\n        style: {\n          marginBottom: \"12px\"\n        }\n      }, __jsx(TACheckinButton, {\n        courseId: courseId,\n        room: queue === null || queue === void 0 ? void 0 : queue.room,\n        disabled: isHelping || queue.isProfessorQueue && role !== Role.PROFESSOR,\n        state: isCheckedIn ? \"CheckedIn\" : \"CheckedOut\",\n        block: true\n      })))\n    }), __jsx(MiddleSpacer, null), user && questions && __jsx(TAQueueListDetail, {\n      queueId: qid,\n      courseId: courseId\n    })), __jsx(EditQueueModal, {\n      queueId: qid,\n      visible: queueSettingsModal,\n      onClose: () => setQueueSettingsModal(false)\n    }));\n  } else {\n    return __jsx(\"div\", null);\n  }\n}","map":null,"metadata":{},"sourceType":"module"}