{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport { DownOutlined } from \"@ant-design/icons\";\nimport { Button, Drawer, Dropdown, Menu } from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useCourse } from \"../../hooks/useCourse\";\nimport { useLocalStorage } from \"../../hooks/useLocalStorage\";\nimport { useProfile } from \"../../hooks/useProfile\";\nimport NavBarTabs from \"./NavBarTabs\";\nimport ProfileDrawer from \"./ProfileDrawer\";\nvar Nav = styled.nav.withConfig({\n  displayName: \"NavBar__Nav\",\n  componentId: \"sc-1jr3ir-0\"\n})([\"padding:0px 0px;display:flex;align-items:center;height:67px;z-index:1;\"]); // A hack to get the white stripe edge to edge, even when Nav is narrower.\n\nvar NavBG = styled.nav.withConfig({\n  displayName: \"NavBar__NavBG\",\n  componentId: \"sc-1jr3ir-1\"\n})([\"position:absolute;top:0;left:0;right:0;height:67px;background:#fff;border-bottom:solid 1px #e8e8e8;\"]);\nvar LogoContainer = styled.div.withConfig({\n  displayName: \"NavBar__LogoContainer\",\n  componentId: \"sc-1jr3ir-2\"\n})([\"z-index:1;display:flex;align-items:center;margin-right:20px;\"]);\nvar Logo = styled.div.withConfig({\n  displayName: \"NavBar__Logo\",\n  componentId: \"sc-1jr3ir-3\"\n})([\"font-size:20px;font-weight:500;color:#262626;text-transform:capitalize;\"]);\nvar MenuCon = styled.div.withConfig({\n  displayName: \"NavBar__MenuCon\",\n  componentId: \"sc-1jr3ir-4\"\n})([\"flex-grow:1;display:flex;align-items:center;justify-content:space-between;padding-left:0px;\"]);\nvar LeftMenu = styled.div.withConfig({\n  displayName: \"NavBar__LeftMenu\",\n  componentId: \"sc-1jr3ir-5\"\n})([\"@media (max-width:650px){display:none;}\"]);\nvar RightMenu = styled.div.withConfig({\n  displayName: \"NavBar__RightMenu\",\n  componentId: \"sc-1jr3ir-6\"\n})([\"@media (max-width:650px){display:none;}\"]);\nvar BarsMenu = styled(Button).withConfig({\n  displayName: \"NavBar__BarsMenu\",\n  componentId: \"sc-1jr3ir-7\"\n})([\"height:32px;padding:6px;margin-top:8px;display:none;background:none;@media (max-width:650px){display:inline-block;}\"]);\nvar BarsButton = styled.span.withConfig({\n  displayName: \"NavBar__BarsButton\",\n  componentId: \"sc-1jr3ir-8\"\n})([\"display:block;width:20px;height:2px;background:#1890ff;position:relative;&:after,:before{content:attr(x);width:20px;position:absolute;top:-6px;left:0;height:2px;background:#1890ff;}&:after{top:auto;bottom:-6px;}\"]);\nvar CoursesMenuItem = styled(Menu.Item).withConfig({\n  displayName: \"NavBar__CoursesMenuItem\",\n  componentId: \"sc-1jr3ir-9\"\n})([\"z-index:1;background:#ffffff;\"]);\nexport default function NavBar(_ref) {\n  var _course$queues, _course$queues$find;\n\n  var courseId = _ref.courseId;\n  var profile = useProfile();\n\n  if (!courseId) {\n    courseId = profile === null || profile === void 0 ? void 0 : profile.courses[0].course.id;\n  }\n\n  var _useLocalStorage = useLocalStorage(\"defaultCourse\", null),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      defaultCourse = _useLocalStorage2[0],\n      setDefaultCourse = _useLocalStorage2[1];\n\n  var _useState = useState(false),\n      visible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useRouter = useRouter(),\n      pathname = _useRouter.pathname;\n\n  var _useCourse = useCourse(courseId),\n      course = _useCourse.course;\n\n  var queueId = course === null || course === void 0 ? void 0 : (_course$queues = course.queues) === null || _course$queues === void 0 ? void 0 : (_course$queues$find = _course$queues.find(function (queue) {\n    return queue.isOpen && queue.allowQuestions;\n  })) === null || _course$queues$find === void 0 ? void 0 : _course$queues$find.id;\n\n  var showDrawer = function showDrawer() {\n    setVisible(true);\n  };\n\n  var onClose = function onClose() {\n    setVisible(false);\n  };\n\n  var courseSelector = __jsx(Menu, null, profile === null || profile === void 0 ? void 0 : profile.courses.map(function (c) {\n    return __jsx(CoursesMenuItem, {\n      key: c.course.id,\n      onClick: function onClick() {\n        return setDefaultCourse(c.course);\n      }\n    }, __jsx(Link, {\n      href: \"/course/[cid]/today\",\n      as: \"/course/\".concat(c.course.id, \"/today\")\n    }, __jsx(\"a\", null, c.course.name)));\n  }));\n\n  var tabs = [{\n    href: \"/course/[cid]/today\",\n    as: \"/course/\".concat(courseId, \"/today\"),\n    text: \"Today\"\n  }, {\n    href: \"/course/[cid]/schedule\",\n    as: \"/course/\".concat(courseId, \"/schedule\"),\n    text: \"Schedule\"\n  }];\n\n  if (queueId) {\n    tabs.push({\n      href: \"/course/[cid]/queue/[qid]\",\n      as: \"/course/\".concat(courseId, \"/queue/\").concat(queueId),\n      text: \"Queue\"\n    });\n  }\n\n  return __jsx(React.Fragment, null, __jsx(NavBG, null), __jsx(Nav, null, __jsx(LogoContainer, null, (profile === null || profile === void 0 ? void 0 : profile.courses.length) > 1 ? __jsx(Dropdown, {\n    overlay: courseSelector,\n    trigger: [\"click\"],\n    placement: \"bottomLeft\"\n  }, __jsx(\"a\", null, __jsx(Logo, null, __jsx(\"span\", null, course === null || course === void 0 ? void 0 : course.name), __jsx(DownOutlined, {\n    style: {\n      fontSize: \"16px\",\n      verticalAlign: \"-0.125em\",\n      marginLeft: \"5px\"\n    }\n  })))) : __jsx(Logo, null, __jsx(\"span\", null, course === null || course === void 0 ? void 0 : course.name))), __jsx(MenuCon, null, __jsx(LeftMenu, null, __jsx(NavBarTabs, {\n    horizontal: true,\n    currentHref: pathname,\n    tabs: tabs\n  })), __jsx(RightMenu, null, __jsx(ProfileDrawer, {\n    courseId: courseId\n  }))), __jsx(BarsMenu, {\n    type: \"primary\",\n    onClick: showDrawer\n  }, __jsx(BarsButton, null)), __jsx(Drawer, {\n    title: \"Course\",\n    placement: \"right\",\n    visible: visible,\n    closable: false,\n    onClose: onClose,\n    bodyStyle: {\n      padding: \"12px\"\n    }\n  }, __jsx(NavBarTabs, {\n    currentHref: pathname,\n    tabs: tabs\n  }), __jsx(ProfileDrawer, {\n    courseId: courseId\n  }))));\n}","map":{"version":3,"sources":["/home/runner/work/office-hours/office-hours/packages/app/components/Nav/NavBar.tsx"],"names":["DownOutlined","Button","Drawer","Dropdown","Menu","Link","useRouter","React","useState","styled","useCourse","useLocalStorage","useProfile","NavBarTabs","ProfileDrawer","Nav","nav","NavBG","LogoContainer","div","Logo","MenuCon","LeftMenu","RightMenu","BarsMenu","BarsButton","span","CoursesMenuItem","Item","NavBar","courseId","profile","courses","course","id","defaultCourse","setDefaultCourse","visible","setVisible","pathname","queueId","queues","find","queue","isOpen","allowQuestions","showDrawer","onClose","courseSelector","map","c","name","tabs","href","as","text","push","length","fontSize","verticalAlign","marginLeft","padding"],"mappings":"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","sourcesContent":["import { DownOutlined } from \"@ant-design/icons\";\nimport { Button, Drawer, Dropdown, Menu } from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport React, { ReactElement, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useCourse } from \"../../hooks/useCourse\";\nimport { useLocalStorage } from \"../../hooks/useLocalStorage\";\nimport { useProfile } from \"../../hooks/useProfile\";\nimport NavBarTabs, { NavBarTabsItem } from \"./NavBarTabs\";\nimport ProfileDrawer from \"./ProfileDrawer\";\n\nconst Nav = styled.nav`\n  padding: 0px 0px;\n  display: flex;\n  align-items: center;\n  height: 67px;\n  z-index: 1;\n`;\n\n// A hack to get the white stripe edge to edge, even when Nav is narrower.\nconst NavBG = styled.nav`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  height: 67px;\n  background: #fff;\n  border-bottom: solid 1px #e8e8e8;\n`;\n\nconst LogoContainer = styled.div`\n  z-index: 1;\n  display: flex;\n  align-items: center;\n  margin-right: 20px;\n`;\n\nconst Logo = styled.div`\n  font-size: 20px;\n  font-weight: 500;\n  color: #262626;\n  text-transform: capitalize;\n`;\n\nconst MenuCon = styled.div`\n  flex-grow: 1;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding-left: 0px;\n`;\n\nconst LeftMenu = styled.div`\n  @media (max-width: 650px) {\n    display: none;\n  }\n`;\n\nconst RightMenu = styled.div`\n  @media (max-width: 650px) {\n    display: none;\n  }\n`;\n\nconst BarsMenu = styled(Button)`\n  height: 32px;\n  padding: 6px;\n  margin-top: 8px;\n  display: none;\n  background: none;\n\n  @media (max-width: 650px) {\n    display: inline-block;\n  }\n`;\n\nconst BarsButton = styled.span`\n  display: block;\n  width: 20px;\n  height: 2px;\n  background: #1890ff;\n  position: relative;\n\n  &:after,\n  :before {\n    content: attr(x);\n    width: 20px;\n    position: absolute;\n    top: -6px;\n    left: 0;\n    height: 2px;\n    background: #1890ff;\n  }\n\n  &:after {\n    top: auto;\n    bottom: -6px;\n  }\n`;\n\nconst CoursesMenuItem = styled(Menu.Item)`\n  z-index: 1;\n  background: #ffffff;\n`;\n\ninterface NavBarProps {\n  courseId: number;\n}\n\nexport default function NavBar({ courseId }: NavBarProps): ReactElement {\n  const profile = useProfile();\n  if (!courseId) {\n    courseId = profile?.courses[0].course.id;\n  }\n\n  const [defaultCourse, setDefaultCourse] = useLocalStorage(\n    \"defaultCourse\",\n    null\n  );\n  const [visible, setVisible] = useState<boolean>(false);\n\n  const { pathname } = useRouter();\n\n  const { course } = useCourse(courseId);\n\n  const queueId = course?.queues?.find(\n    (queue) => queue.isOpen && queue.allowQuestions\n  )?.id;\n\n  const showDrawer = () => {\n    setVisible(true);\n  };\n  const onClose = () => {\n    setVisible(false);\n  };\n\n  const courseSelector = (\n    <Menu>\n      {profile?.courses.map((c) => (\n        <CoursesMenuItem\n          key={c.course.id}\n          onClick={() => setDefaultCourse(c.course)}\n        >\n          <Link href=\"/course/[cid]/today\" as={`/course/${c.course.id}/today`}>\n            <a>{c.course.name}</a>\n          </Link>\n        </CoursesMenuItem>\n      ))}\n    </Menu>\n  );\n\n  const tabs: NavBarTabsItem[] = [\n    {\n      href: \"/course/[cid]/today\",\n      as: `/course/${courseId}/today`,\n      text: \"Today\",\n    },\n    {\n      href: \"/course/[cid]/schedule\",\n      as: `/course/${courseId}/schedule`,\n      text: \"Schedule\",\n    },\n  ];\n  if (queueId) {\n    tabs.push({\n      href: \"/course/[cid]/queue/[qid]\",\n      as: `/course/${courseId}/queue/${queueId}`,\n      text: \"Queue\",\n    });\n  }\n\n  return (\n    <>\n      <NavBG />\n      <Nav>\n        <LogoContainer>\n          {profile?.courses.length > 1 ? (\n            <Dropdown\n              overlay={courseSelector}\n              trigger={[\"click\"]}\n              placement=\"bottomLeft\"\n            >\n              <a>\n                <Logo>\n                  <span>{course?.name}</span>\n                  <DownOutlined\n                    style={{\n                      fontSize: \"16px\",\n                      verticalAlign: \"-0.125em\",\n                      marginLeft: \"5px\",\n                    }}\n                  />\n                </Logo>\n              </a>\n            </Dropdown>\n          ) : (\n            <Logo>\n              <span>{course?.name}</span>\n            </Logo>\n          )}\n        </LogoContainer>\n        <MenuCon>\n          <LeftMenu>\n            <NavBarTabs horizontal currentHref={pathname} tabs={tabs} />\n          </LeftMenu>\n          <RightMenu>\n            <ProfileDrawer courseId={courseId} />\n          </RightMenu>\n        </MenuCon>\n        <BarsMenu type=\"primary\" onClick={showDrawer}>\n          <BarsButton />\n        </BarsMenu>\n        <Drawer\n          title=\"Course\"\n          placement=\"right\"\n          visible={visible}\n          closable={false}\n          onClose={onClose}\n          bodyStyle={{ padding: \"12px\" }}\n        >\n          <NavBarTabs currentHref={pathname} tabs={tabs} />\n          <ProfileDrawer courseId={courseId} />\n        </Drawer>\n      </Nav>\n    </>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}