{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport Router from \"next/router\";\nimport { useLocalStorage } from \"./useLocalStorage\";\nimport { useProfile } from \"./useProfile\";\nexport function useDefaultCourseRedirect() {\n  var profile = useProfile();\n\n  var _useLocalStorage = useLocalStorage(\"defaultCourse\", null),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 1),\n      defaultCourse = _useLocalStorage2[0];\n\n  if (profile && profile.courses.length > 0) {\n    /// defaultCourse can get out-of-sync with the user's actual registered course (dropped class etc)\n    var isUserInDefaultCourse = !!defaultCourse && profile.courses.some(function (c) {\n      return c.course.id === (defaultCourse === null || defaultCourse === void 0 ? void 0 : defaultCourse.id);\n    });\n    Router.push(\"/course/[cid]/today\", \"/course/\".concat(isUserInDefaultCourse ? defaultCourse.id : profile.courses[0].course.id, \"/today\"));\n    return true;\n  }\n\n  return false;\n}","map":{"version":3,"sources":["/home/runner/work/office-hours/office-hours/packages/app/hooks/useDefaultCourseRedirect.ts"],"names":["Router","useLocalStorage","useProfile","useDefaultCourseRedirect","profile","defaultCourse","courses","length","isUserInDefaultCourse","some","c","course","id","push"],"mappings":";AACA,OAAOA,MAAP,MAAkC,aAAlC;AACA,SAASC,eAAT,QAAgC,mBAAhC;AACA,SAASC,UAAT,QAA2B,cAA3B;AAEA,OAAO,SAASC,wBAAT,GAA6C;AAClD,MAAMC,OAAa,GAAGF,UAAU,EAAhC;;AADkD,yBAE1BD,eAAe,CAAC,eAAD,EAAkB,IAAlB,CAFW;AAAA;AAAA,MAE3CI,aAF2C;;AAGlD,MAAID,OAAO,IAAIA,OAAO,CAACE,OAAR,CAAgBC,MAAhB,GAAyB,CAAxC,EAA2C;AACzC;AACA,QAAMC,qBAAqB,GACzB,CAAC,CAACH,aAAF,IACAD,OAAO,CAACE,OAAR,CAAgBG,IAAhB,CAAqB,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACC,MAAF,CAASC,EAAT,MAAgBP,aAAhB,aAAgBA,aAAhB,uBAAgBA,aAAa,CAAEO,EAA/B,CAAP;AAAA,KAArB,CAFF;AAGAZ,IAAAA,MAAM,CAACa,IAAP,CACE,qBADF,oBAGIL,qBAAqB,GAAGH,aAAa,CAACO,EAAjB,GAAsBR,OAAO,CAACE,OAAR,CAAgB,CAAhB,EAAmBK,MAAnB,CAA0BC,EAHzE;AAMA,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD","sourcesContent":["import { User } from \"@koh/common\";\nimport Router, { useRouter } from \"next/router\";\nimport { useLocalStorage } from \"./useLocalStorage\";\nimport { useProfile } from \"./useProfile\";\n\nexport function useDefaultCourseRedirect(): boolean {\n  const profile: User = useProfile();\n  const [defaultCourse] = useLocalStorage(\"defaultCourse\", null);\n  if (profile && profile.courses.length > 0) {\n    /// defaultCourse can get out-of-sync with the user's actual registered course (dropped class etc)\n    const isUserInDefaultCourse =\n      !!defaultCourse &&\n      profile.courses.some((c) => c.course.id === defaultCourse?.id);\n    Router.push(\n      \"/course/[cid]/today\",\n      `/course/${\n        isUserInDefaultCourse ? defaultCourse.id : profile.courses[0].course.id\n      }/today`\n    );\n    return true;\n  }\n  return false;\n}\n"]},"metadata":{},"sourceType":"module"}