{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport { CreateQuestionResponse, DesktopNotifPartial, GetCourseResponse, GetProfileResponse, GetQuestionResponse, GetQueueResponse, ListQuestionsResponse, UpdateQuestionResponse } from \"@koh/common\";\nimport Axios from \"axios\";\nimport { plainToClass } from \"class-transformer\";\n\nvar APIClient = /*#__PURE__*/function () {\n  _createClass(APIClient, [{\n    key: \"req\",\n    value: function () {\n      var _req = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(method, url, responseClass, body) {\n        var res;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.axios.request({\n                  method: method,\n                  url: url,\n                  data: body\n                });\n\n              case 2:\n                res = _context.sent.data;\n                return _context.abrupt(\"return\", responseClass ? plainToClass(responseClass, res) : res);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function req(_x, _x2, _x3, _x4) {\n        return _req.apply(this, arguments);\n      }\n\n      return req;\n    }()\n  }]);\n\n  function APIClient() {\n    var _this = this;\n\n    var baseURL = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n\n    _classCallCheck(this, APIClient);\n\n    this.axios = void 0;\n    this.profile = {\n      index: function () {\n        var _index = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  return _context2.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/profile\", GetProfileResponse));\n\n                case 1:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        function index() {\n          return _index.apply(this, arguments);\n        }\n\n        return index;\n      }(),\n      patch: function () {\n        var _patch = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(body) {\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  return _context3.abrupt(\"return\", _this.req(\"PATCH\", \"/api/v1/profile\", undefined, body));\n\n                case 1:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        function patch(_x5) {\n          return _patch.apply(this, arguments);\n        }\n\n        return patch;\n      }()\n    };\n    this.course = {\n      get: function () {\n        var _get = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(courseId) {\n          return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  return _context4.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/courses/\".concat(courseId), GetCourseResponse));\n\n                case 1:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4);\n        }));\n\n        function get(_x6) {\n          return _get.apply(this, arguments);\n        }\n\n        return get;\n      }(),\n      updateCalendar: function () {\n        var _updateCalendar = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(courseId) {\n          return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  return _context5.abrupt(\"return\", _this.req(\"POST\", \"/api/v1/courses/\".concat(courseId, \"/update_calendar\")));\n\n                case 1:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5);\n        }));\n\n        function updateCalendar(_x7) {\n          return _updateCalendar.apply(this, arguments);\n        }\n\n        return updateCalendar;\n      }()\n    };\n    this.taStatus = {\n      checkIn: function () {\n        var _checkIn = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(courseId, room) {\n          return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n            while (1) {\n              switch (_context6.prev = _context6.next) {\n                case 0:\n                  return _context6.abrupt(\"return\", _this.req(\"POST\", \"/api/v1/courses/\".concat(courseId, \"/ta_location/\").concat(room)));\n\n                case 1:\n                case \"end\":\n                  return _context6.stop();\n              }\n            }\n          }, _callee6);\n        }));\n\n        function checkIn(_x8, _x9) {\n          return _checkIn.apply(this, arguments);\n        }\n\n        return checkIn;\n      }(),\n      checkOut: function () {\n        var _checkOut = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(courseId, room) {\n          return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  return _context7.abrupt(\"return\", _this.req(\"DELETE\", \"/api/v1/courses/\".concat(courseId, \"/ta_location/\").concat(room)));\n\n                case 1:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, _callee7);\n        }));\n\n        function checkOut(_x10, _x11) {\n          return _checkOut.apply(this, arguments);\n        }\n\n        return checkOut;\n      }()\n    };\n    this.questions = {\n      index: function () {\n        var _index2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(queueId) {\n          return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n            while (1) {\n              switch (_context8.prev = _context8.next) {\n                case 0:\n                  return _context8.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/queues/\".concat(queueId, \"/questions\"), ListQuestionsResponse));\n\n                case 1:\n                case \"end\":\n                  return _context8.stop();\n              }\n            }\n          }, _callee8);\n        }));\n\n        function index(_x12) {\n          return _index2.apply(this, arguments);\n        }\n\n        return index;\n      }(),\n      create: function () {\n        var _create = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(params) {\n          return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n                  return _context9.abrupt(\"return\", _this.req(\"POST\", \"/api/v1/questions\", CreateQuestionResponse, params));\n\n                case 1:\n                case \"end\":\n                  return _context9.stop();\n              }\n            }\n          }, _callee9);\n        }));\n\n        function create(_x13) {\n          return _create.apply(this, arguments);\n        }\n\n        return create;\n      }(),\n      get: function () {\n        var _get2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee10(questionId) {\n          return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  return _context10.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/questions/\".concat(questionId), GetQuestionResponse));\n\n                case 1:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, _callee10);\n        }));\n\n        function get(_x14) {\n          return _get2.apply(this, arguments);\n        }\n\n        return get;\n      }(),\n      update: function () {\n        var _update = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee11(questionId, params) {\n          return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n            while (1) {\n              switch (_context11.prev = _context11.next) {\n                case 0:\n                  return _context11.abrupt(\"return\", _this.req(\"PATCH\", \"/api/v1/questions/\".concat(questionId), UpdateQuestionResponse, params));\n\n                case 1:\n                case \"end\":\n                  return _context11.stop();\n              }\n            }\n          }, _callee11);\n        }));\n\n        function update(_x15, _x16) {\n          return _update.apply(this, arguments);\n        }\n\n        return update;\n      }(),\n      notify: function () {\n        var _notify = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee12(questionId) {\n          return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n            while (1) {\n              switch (_context12.prev = _context12.next) {\n                case 0:\n                  return _context12.abrupt(\"return\", _this.req(\"POST\", \"/api/v1/questions/\".concat(questionId, \"/notify\")));\n\n                case 1:\n                case \"end\":\n                  return _context12.stop();\n              }\n            }\n          }, _callee12);\n        }));\n\n        function notify(_x17) {\n          return _notify.apply(this, arguments);\n        }\n\n        return notify;\n      }()\n    };\n    this.queues = {\n      get: function () {\n        var _get3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee13(queueId) {\n          return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n            while (1) {\n              switch (_context13.prev = _context13.next) {\n                case 0:\n                  return _context13.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/queues/\".concat(queueId), GetQueueResponse));\n\n                case 1:\n                case \"end\":\n                  return _context13.stop();\n              }\n            }\n          }, _callee13);\n        }));\n\n        function get(_x18) {\n          return _get3.apply(this, arguments);\n        }\n\n        return get;\n      }(),\n      update: function () {\n        var _update2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee14(queueId, params) {\n          return _regeneratorRuntime.wrap(function _callee14$(_context14) {\n            while (1) {\n              switch (_context14.prev = _context14.next) {\n                case 0:\n                  return _context14.abrupt(\"return\", _this.req(\"PATCH\", \"/api/v1/queues/\".concat(queueId), UpdateQuestionResponse, params));\n\n                case 1:\n                case \"end\":\n                  return _context14.stop();\n              }\n            }\n          }, _callee14);\n        }));\n\n        function update(_x19, _x20) {\n          return _update2.apply(this, arguments);\n        }\n\n        return update;\n      }(),\n      clean: function () {\n        var _clean = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee15(queueId) {\n          return _regeneratorRuntime.wrap(function _callee15$(_context15) {\n            while (1) {\n              switch (_context15.prev = _context15.next) {\n                case 0:\n                  return _context15.abrupt(\"return\", _this.req(\"POST\", \"/api/v1/queues/\".concat(queueId, \"/clean\")));\n\n                case 1:\n                case \"end\":\n                  return _context15.stop();\n              }\n            }\n          }, _callee15);\n        }));\n\n        function clean(_x21) {\n          return _clean.apply(this, arguments);\n        }\n\n        return clean;\n      }()\n    };\n    this.notif = {\n      desktop: {\n        credentials: function () {\n          var _credentials = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee16() {\n            return _regeneratorRuntime.wrap(function _callee16$(_context16) {\n              while (1) {\n                switch (_context16.prev = _context16.next) {\n                  case 0:\n                    return _context16.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/notifications/desktop/credentials\"));\n\n                  case 1:\n                  case \"end\":\n                    return _context16.stop();\n                }\n              }\n            }, _callee16);\n          }));\n\n          function credentials() {\n            return _credentials.apply(this, arguments);\n          }\n\n          return credentials;\n        }(),\n        register: function () {\n          var _register = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee17(payload) {\n            return _regeneratorRuntime.wrap(function _callee17$(_context17) {\n              while (1) {\n                switch (_context17.prev = _context17.next) {\n                  case 0:\n                    return _context17.abrupt(\"return\", _this.req(\"POST\", \"/api/v1/notifications/desktop/device\", DesktopNotifPartial, payload));\n\n                  case 1:\n                  case \"end\":\n                    return _context17.stop();\n                }\n              }\n            }, _callee17);\n          }));\n\n          function register(_x22) {\n            return _register.apply(this, arguments);\n          }\n\n          return register;\n        }(),\n        unregister: function () {\n          var _unregister = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee18(deviceId) {\n            return _regeneratorRuntime.wrap(function _callee18$(_context18) {\n              while (1) {\n                switch (_context18.prev = _context18.next) {\n                  case 0:\n                    return _context18.abrupt(\"return\", _this.req(\"DELETE\", \"/api/v1/notifications/desktop/device/\".concat(deviceId), undefined));\n\n                  case 1:\n                  case \"end\":\n                    return _context18.stop();\n                }\n              }\n            }, _callee18);\n          }));\n\n          function unregister(_x23) {\n            return _unregister.apply(this, arguments);\n          }\n\n          return unregister;\n        }()\n      }\n    };\n    this.seeds = {\n      \"delete\": function () {\n        var _delete2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee19() {\n          return _regeneratorRuntime.wrap(function _callee19$(_context19) {\n            while (1) {\n              switch (_context19.prev = _context19.next) {\n                case 0:\n                  return _context19.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/seeds/delete\"));\n\n                case 1:\n                case \"end\":\n                  return _context19.stop();\n              }\n            }\n          }, _callee19);\n        }));\n\n        function _delete() {\n          return _delete2.apply(this, arguments);\n        }\n\n        return _delete;\n      }(),\n      create: function () {\n        var _create2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee20() {\n          return _regeneratorRuntime.wrap(function _callee20$(_context20) {\n            while (1) {\n              switch (_context20.prev = _context20.next) {\n                case 0:\n                  return _context20.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/seeds/create\"));\n\n                case 1:\n                case \"end\":\n                  return _context20.stop();\n              }\n            }\n          }, _callee20);\n        }));\n\n        function create() {\n          return _create2.apply(this, arguments);\n        }\n\n        return create;\n      }(),\n      fillQueue: function () {\n        var _fillQueue = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee21() {\n          return _regeneratorRuntime.wrap(function _callee21$(_context21) {\n            while (1) {\n              switch (_context21.prev = _context21.next) {\n                case 0:\n                  return _context21.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/seeds/fill_queue\"));\n\n                case 1:\n                case \"end\":\n                  return _context21.stop();\n              }\n            }\n          }, _callee21);\n        }));\n\n        function fillQueue() {\n          return _fillQueue.apply(this, arguments);\n        }\n\n        return fillQueue;\n      }()\n    };\n    this.releaseNotes = {\n      get: function () {\n        var _get4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee22() {\n          return _regeneratorRuntime.wrap(function _callee22$(_context22) {\n            while (1) {\n              switch (_context22.prev = _context22.next) {\n                case 0:\n                  return _context22.abrupt(\"return\", _this.req(\"GET\", \"/api/v1/release_notes\"));\n\n                case 1:\n                case \"end\":\n                  return _context22.stop();\n              }\n            }\n          }, _callee22);\n        }));\n\n        function get() {\n          return _get4.apply(this, arguments);\n        }\n\n        return get;\n      }()\n    };\n    this.axios = Axios.create({\n      baseURL: baseURL\n    });\n  }\n\n  return APIClient;\n}();\n\nexport var API = new APIClient(process.env.NEXT_PUBLIC_API_URL);","map":{"version":3,"sources":["/home/runner/work/office-hours/office-hours/node_modules/@koh/api-client/index.ts"],"names":["CreateQuestionResponse","DesktopNotifPartial","GetCourseResponse","GetProfileResponse","GetQuestionResponse","GetQueueResponse","ListQuestionsResponse","UpdateQuestionResponse","Axios","plainToClass","APIClient","method","url","responseClass","body","axios","request","data","res","baseURL","profile","index","req","patch","undefined","course","get","courseId","updateCalendar","taStatus","checkIn","room","checkOut","questions","queueId","create","params","questionId","update","notify","queues","clean","notif","desktop","credentials","register","payload","unregister","deviceId","seeds","fillQueue","releaseNotes","API","process","env","NEXT_PUBLIC_API_URL"],"mappings":"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","sourcesContent":["import {\n  CreateQuestionParams,\n  CreateQuestionResponse,\n  DesktopNotifBody,\n  DesktopNotifPartial,\n  GetCourseResponse,\n  GetProfileResponse,\n  GetQuestionResponse,\n  GetQueueResponse,\n  GetReleaseNotesResponse,\n  ListQuestionsResponse,\n  TACheckoutResponse,\n  TAUpdateStatusResponse,\n  UpdateProfileParams,\n  UpdateQuestionParams,\n  UpdateQuestionResponse,\n  UpdateQueueParams,\n} from \"@koh/common\";\nimport Axios, { AxiosInstance, Method } from \"axios\";\nimport { plainToClass } from \"class-transformer\";\nimport { ClassType } from \"class-transformer/ClassTransformer\";\n\n// Return type of array item, if T is an array\ntype ItemIfArray<T> = T extends (infer I)[] ? I : T;\n\nclass APIClient {\n  private axios: AxiosInstance;\n\n  /**\n   * Send HTTP and return data, optionally serialized with class-transformer (helpful for Date serialization)\n   * @param method HTTP method\n   * @param url URL to send req to\n   * @param responseClass Class with class-transformer decorators to serialize response to\n   * @param body body to send with req\n   */\n  private async req<T>(\n    method: Method,\n    url: string,\n    responseClass?: ClassType<ItemIfArray<T>>,\n    body?: any\n  ): Promise<T>;\n  private async req<T>(\n    method: Method,\n    url: string,\n    responseClass?: ClassType<T>,\n    body?: any\n  ): Promise<T> {\n    const res = (await this.axios.request({ method, url, data: body })).data;\n    return responseClass ? plainToClass(responseClass, res) : res;\n  }\n\n  profile = {\n    index: async (): Promise<GetProfileResponse> =>\n      this.req(\"GET\", `/api/v1/profile`, GetProfileResponse),\n    patch: async (body: UpdateProfileParams): Promise<GetProfileResponse> =>\n      this.req(\"PATCH\", `/api/v1/profile`, undefined, body),\n  };\n  course = {\n    get: async (courseId: number) =>\n      this.req(\"GET\", `/api/v1/courses/${courseId}`, GetCourseResponse),\n    updateCalendar: async (courseId: number) =>\n      this.req(\"POST\", `/api/v1/courses/${courseId}/update_calendar`),\n  };\n  taStatus = {\n    checkIn: async (\n      courseId: number,\n      room: string\n    ): Promise<TAUpdateStatusResponse> =>\n      this.req(\"POST\", `/api/v1/courses/${courseId}/ta_location/${room}`),\n    checkOut: async (\n      courseId: number,\n      room: string\n    ): Promise<TACheckoutResponse> =>\n      this.req(\"DELETE\", `/api/v1/courses/${courseId}/ta_location/${room}`),\n  };\n  questions = {\n    index: async (queueId: number) =>\n      this.req<ListQuestionsResponse>(\n        \"GET\",\n        `/api/v1/queues/${queueId}/questions`,\n        ListQuestionsResponse\n      ),\n    create: async (params: CreateQuestionParams) =>\n      this.req(\"POST\", `/api/v1/questions`, CreateQuestionResponse, params),\n    get: async (questionId: number): Promise<GetQuestionResponse> =>\n      this.req(\"GET\", `/api/v1/questions/${questionId}`, GetQuestionResponse),\n    update: async (questionId: number, params: UpdateQuestionParams) =>\n      this.req(\n        \"PATCH\",\n        `/api/v1/questions/${questionId}`,\n        UpdateQuestionResponse,\n        params\n      ),\n    notify: async (questionId: number): Promise<void> =>\n      this.req(\"POST\", `/api/v1/questions/${questionId}/notify`),\n  };\n  queues = {\n    get: async (queueId: number): Promise<GetQueueResponse> =>\n      this.req(\"GET\", `/api/v1/queues/${queueId}`, GetQueueResponse),\n    update: async (queueId: number, params: UpdateQueueParams) =>\n      this.req(\n        \"PATCH\",\n        `/api/v1/queues/${queueId}`,\n        UpdateQuestionResponse,\n        params\n      ),\n    clean: async (queueId: number): Promise<void> =>\n      this.req(\"POST\", `/api/v1/queues/${queueId}/clean`),\n  };\n  notif = {\n    desktop: {\n      credentials: async (): Promise<string> =>\n        this.req(\"GET\", \"/api/v1/notifications/desktop/credentials\"),\n      register: async (\n        payload: DesktopNotifBody\n      ): Promise<DesktopNotifPartial> =>\n        this.req(\n          \"POST\",\n          `/api/v1/notifications/desktop/device`,\n          DesktopNotifPartial,\n          payload\n        ),\n      unregister: async (deviceId: number): Promise<string> =>\n        this.req(\n          \"DELETE\",\n          `/api/v1/notifications/desktop/device/${deviceId}`,\n          undefined\n        ),\n    },\n  };\n  seeds = {\n    delete: async () => this.req(\"GET\", `/api/v1/seeds/delete`),\n    create: async () => this.req(\"GET\", `/api/v1/seeds/create`),\n    fillQueue: async () => this.req(\"GET\", `/api/v1/seeds/fill_queue`),\n  };\n  releaseNotes = {\n    get: async (): Promise<GetReleaseNotesResponse> =>\n      this.req(\"GET\", `/api/v1/release_notes`),\n  };\n  constructor(baseURL = \"\") {\n    this.axios = Axios.create({ baseURL: baseURL });\n  }\n}\n\nexport const API = new APIClient(process.env.NEXT_PUBLIC_API_URL);\n"]},"metadata":{},"sourceType":"module"}