{"ast":null,"code":"import { API } from \"@koh/api-client\";\nimport { ListQuestionsResponse } from \"@koh/common\";\nimport { plainToClass } from \"class-transformer\";\nimport { useCallback } from \"react\";\nimport useSWR, { mutate } from \"swr\";\nimport { useEventSource } from \"./useEventSource\";\nexport function useQuestions(qid) {\n  const key = qid && `/api/v1/queues/${qid}/questions`; // Subscribe to sse\n\n  const isLive = useEventSource(qid && `/api/v1/queues/${qid}/sse`, \"question\", useCallback(data => {\n    if (data.questions) {\n      mutate(key, plainToClass(ListQuestionsResponse, data.questions), false);\n    }\n  }, [key]));\n  const {\n    data: questions,\n    error: questionsError,\n    mutate: mutateQuestions\n  } = useSWR(key, async () => API.questions.index(Number(qid)), {\n    refreshInterval: isLive ? 0 : 10 * 1000\n  });\n  return {\n    questions,\n    questionsError,\n    mutateQuestions\n  };\n}","map":null,"metadata":{},"sourceType":"module"}