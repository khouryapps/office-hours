{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[41],{\"17vG\":function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/nocourses\",function(){return n(\"xzOm\")}])},UKuP:function(e,r,n){\"use strict\";n.d(r,\"a\",(function(){return a}));var o=n(\"mstN\"),t=n(\"Bkb1\"),c=n.n(t),u=n(\"Xccw\"),s=n(\"Ogf2\");function a(){var e=Object(s.a)(),r=Object(u.a)(\"defaultCourse\",null),n=Object(o.a)(r,1)[0];if(e&&e.pendingCourses&&e.pendingCourses.length>0)return c.a.push(\"/apply\"),!0;if(e&&e.courses.length>0){var t=!!n&&e.courses.some((function(e){return e.course.id===(null===n||void 0===n?void 0:n.id)}));return c.a.push(\"/course/[cid]/today\",\"/course/\".concat(t?n.id:e.courses[0].course.id,\"/today\")),!0}return!1}},Xccw:function(e,r,n){\"use strict\";n.d(r,\"a\",(function(){return t}));var o=n(\"ERkP\");function t(e,r){var n=Object(o.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):r}catch(o){return console.error(o),r}})),t=n[0],c=n[1];return[t,function(r){try{var n=r instanceof Function?r(t):r;c(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(o){console.error(o)}},function(){try{c(null),window.localStorage.removeItem(e)}catch(r){console.error(r)}}]}},xzOm:function(e,r,n){\"use strict\";n.r(r),n.d(r,\"default\",(function(){return v}));var o=n(\"jg1C\"),t=n(\"IebI\"),c=n.n(t),u=n(\"O+IG\"),s=n(\"zTld\"),a=n(\"Sqjh\"),i=n(\"SCaQ\"),l=n(\"Bkb1\"),d=n.n(l),f=n(\"JbCn\"),p=n(\"UKuP\");function v(){Object(p.a)();var e=Object(f.a)(\"/api/v1/courses/self_enroll_courses\",Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",s.a.course.selfEnrollCourses());case 1:case\"end\":return e.stop()}}),e)})))).data;return Object(o.jsxs)(\"div\",{children:[Object(o.jsx)(a.a,{status:\"info\",title:\"None of your courses are using the Khoury Office Hours App.\",subTitle:\"If you expected your course to be here, try logging in again. If it still does not appear, please reach out to your course coordinator or professor.\"}),(null===e||void 0===e?void 0:e.courses.length)>0?Object(o.jsxs)(\"div\",{style:{textAlign:\"center\"},children:[\"One of our data sources for student-enrollment is currently experiencing an outage. If you think you belong to a class, please click on your corresponding class below.\",Object(o.jsx)(\"div\",{children:null===e||void 0===e?void 0:e.courses.map((function(e,r){return Object(o.jsx)(i.a,{onClick:Object(u.a)(c.a.mark((function r(){return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.course.createSelfEnrollOverride(e.id);case 2:d.a.push(\"/login\");case 3:case\"end\":return r.stop()}}),r)}))),children:e.name},r)}))})]}):null]})}}},[[\"17vG\",1,2,0,3,5,4,6,7,24]]]);","map":{"version":3,"sources":["static/chunks/pages/nocourses-8bdcf7829128ee8d00cf.js"],"names":["_N_E","window","push","17vG","module","exports","__webpack_require__","__NEXT_P","UKuP","__webpack_exports__","d","useHomePageRedirect","_var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","next_router__WEBPACK_IMPORTED_MODULE_1__","next_router__WEBPACK_IMPORTED_MODULE_1___default","n","_useLocalStorage__WEBPACK_IMPORTED_MODULE_2__","_useProfile__WEBPACK_IMPORTED_MODULE_3__","profile","Object","_useLocalStorage","defaultCourse","pendingCourses","length","a","courses","isUserInDefaultCourse","some","c","course","id","concat","Xccw","useLocalStorage","react__WEBPACK_IMPORTED_MODULE_0__","key","initialValue","_useState","item","localStorage","getItem","JSON","parse","error","console","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","removeItem","xzOm","r","NoCourses","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","_var_www_source_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__","_var_www_source_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","_var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_koh_api_client__WEBPACK_IMPORTED_MODULE_3__","antd__WEBPACK_IMPORTED_MODULE_4__","antd__WEBPACK_IMPORTED_MODULE_5__","next_router__WEBPACK_IMPORTED_MODULE_6__","next_router__WEBPACK_IMPORTED_MODULE_6___default","swr__WEBPACK_IMPORTED_MODULE_7__","_hooks_useHomePageRedirect__WEBPACK_IMPORTED_MODULE_8__","data","mark","_callee","wrap","_context","prev","next","abrupt","selfEnrollCourses","stop","children","status","title","subTitle","style","textAlign","map","i","onClick","_callee2","_context2","createSelfEnrollOverride","name"],"mappings":"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"},"name":"static/chunks/pages/nocourses-8bdcf7829128ee8d00cf.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[41],{\n\n/***/ \"17vG\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/nocourses\",\n      function () {\n        return __webpack_require__(\"xzOm\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"UKuP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useHomePageRedirect; });\n/* harmony import */ var _var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"mstN\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"Bkb1\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _useLocalStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"Xccw\");\n/* harmony import */ var _useProfile__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"Ogf2\");\n\n\n\n\n/**\n * Redirect user to the course apply page if they are a prof with pending courses,\n * or to the today page for their default course.\n */\n\nfunction useHomePageRedirect() {\n  var profile = Object(_useProfile__WEBPACK_IMPORTED_MODULE_3__[/* useProfile */ \"a\"])();\n\n  var _useLocalStorage = Object(_useLocalStorage__WEBPACK_IMPORTED_MODULE_2__[/* useLocalStorage */ \"a\"])(\"defaultCourse\", null),\n      _useLocalStorage2 = Object(_var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(_useLocalStorage, 1),\n      defaultCourse = _useLocalStorage2[0];\n\n  if (profile && profile.pendingCourses && profile.pendingCourses.length > 0) {\n    next_router__WEBPACK_IMPORTED_MODULE_1___default.a.push(\"/apply\");\n    return true;\n  }\n\n  if (profile && profile.courses.length > 0) {\n    /// defaultCourse can get out-of-sync with the user's actual registered course (dropped class etc)\n    var isUserInDefaultCourse = !!defaultCourse && profile.courses.some(function (c) {\n      return c.course.id === (defaultCourse === null || defaultCourse === void 0 ? void 0 : defaultCourse.id);\n    });\n    next_router__WEBPACK_IMPORTED_MODULE_1___default.a.push(\"/course/[cid]/today\", \"/course/\".concat(isUserInDefaultCourse ? defaultCourse.id : profile.courses[0].course.id, \"/today\"));\n    return true;\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ \"Xccw\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useLocalStorage; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"ERkP\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nvar isWindow = true;\nfunction useLocalStorage(key, initialValue) {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(function () {\n    try {\n      var item = isWindow && window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  }),\n      storedValue = _useState[0],\n      setStoredValue = _useState[1];\n\n  var setValue = function setValue(value) {\n    try {\n      var valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      isWindow && window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  var removeValue = function removeValue() {\n    try {\n      setStoredValue(null);\n      isWindow && window.localStorage.removeItem(key);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return [storedValue, setValue, removeValue];\n}\n\n/***/ }),\n\n/***/ \"xzOm\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return NoCourses; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"jg1C\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _var_www_source_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"IebI\");\n/* harmony import */ var _var_www_source_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_var_www_source_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"O+IG\");\n/* harmony import */ var _koh_api_client__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"zTld\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"Sqjh\");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"SCaQ\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"Bkb1\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var swr__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"JbCn\");\n/* harmony import */ var _hooks_useHomePageRedirect__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"UKuP\");\n\n\n\n\n\n\n\n\n\nfunction NoCourses() {\n  Object(_hooks_useHomePageRedirect__WEBPACK_IMPORTED_MODULE_8__[/* useHomePageRedirect */ \"a\"])();\n\n  var _useSWR = Object(swr__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"])(\"/api/v1/courses/self_enroll_courses\", /*#__PURE__*/Object(_var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_var_www_source_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee() {\n    return _var_www_source_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", _koh_api_client__WEBPACK_IMPORTED_MODULE_3__[/* API */ \"a\"].course.selfEnrollCourses());\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }))),\n      data = _useSWR.data;\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], {\n      status: \"info\",\n      title: \"None of your courses are using the Khoury Office Hours App.\",\n      subTitle: \"If you expected your course to be here, try logging in again. If it still does not appear, please reach out to your course coordinator or professor.\"\n    }), (data === null || data === void 0 ? void 0 : data.courses.length) > 0 ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: [\"One of our data sources for student-enrollment is currently experiencing an outage. If you think you belong to a class, please click on your corresponding class below.\", /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {\n        children: data === null || data === void 0 ? void 0 : data.courses.map(function (course, i) {\n          return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(antd__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"], {\n            onClick: /*#__PURE__*/Object(_var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])( /*#__PURE__*/_var_www_source_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.mark(function _callee2() {\n              return _var_www_source_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default.a.wrap(function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      _context2.next = 2;\n                      return _koh_api_client__WEBPACK_IMPORTED_MODULE_3__[/* API */ \"a\"].course.createSelfEnrollOverride(course.id);\n\n                    case 2:\n                      next_router__WEBPACK_IMPORTED_MODULE_6___default.a.push(\"/login\");\n\n                    case 3:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, _callee2);\n            })),\n            children: course.name\n          }, i);\n        })\n      })]\n    }) : null]\n  });\n}\n\n/***/ })\n\n},[[\"17vG\",1,2,0,3,5,4,6,7,24]]]);","inputSourceMap":{"version":3,"sources":["/var/www/source/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fnocourses&absolutePagePath=private-next-pages%2Fnocourses.tsx!","/var/www/source/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/var/www/source/packages/app/hooks/useHomePageRedirect.ts","/var/www/source/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/var/www/source/packages/app/hooks/useLocalStorage.ts","/var/www/source/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/var/www/source/packages/app/pages/nocourses.tsx"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAAkC;AACzD;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACpF;AACmB;AACV;AAC1C;AACA;AACA;AACA;;AAEO;AACP,gBAAgB,sEAAU;;AAE1B,yBAAyB,gFAAe;AACxC,0BAA0B,8IAAc;AACxC;;AAEA;AACA,IAAI,kDAAM;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,kDAAM;AACV;AACA;;AAEA;AACA,C;;;;;;;;AC/BA;AAAA;AAAA;AAAiC;AACjC;AACO;AACP,kBAAkB,sDAAQ;AAC1B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;;;;ACnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACF;AAC4D;AACe;AACrF;AACA;AACL;AACR;AAC0C;AACpD;AACf,EAAE,8FAAmB;;AAErB,gBAAgB,2DAAM,qDAAqD,iJAAiB,eAAe,+GAAmB;AAC9H,WAAW,+GAAmB;AAC9B;AACA;AACA;AACA,6CAA6C,2DAAG;;AAEhD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA,sBAAsB,8DAAK;AAC3B,4BAA4B,6DAAI,CAAC,oDAAM;AACvC;AACA;AACA;AACA,KAAK,wFAAwF,8DAAK;AAClG;AACA;AACA,OAAO;AACP,yMAAyM,6DAAI;AAC7M;AACA,8BAA8B,6DAAI,CAAC,oDAAM;AACzC,kCAAkC,iJAAiB,eAAe,+GAAmB;AACrF,qBAAqB,+GAAmB;AACxC;AACA;AACA;AACA;AACA,6BAA6B,2DAAG;;AAEhC;AACA,sBAAsB,kDAAM;;AAE5B;AACA;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH,C","file":"x","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/nocourses\",\n      function () {\n        return require(\"private-next-pages/nocourses.tsx\");\n      }\n    ]);\n  ","import _slicedToArray from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport Router from \"next/router\";\nimport { useLocalStorage } from \"./useLocalStorage\";\nimport { useProfile } from \"./useProfile\";\n/**\n * Redirect user to the course apply page if they are a prof with pending courses,\n * or to the today page for their default course.\n */\n\nexport function useHomePageRedirect() {\n  var profile = useProfile();\n\n  var _useLocalStorage = useLocalStorage(\"defaultCourse\", null),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 1),\n      defaultCourse = _useLocalStorage2[0];\n\n  if (profile && profile.pendingCourses && profile.pendingCourses.length > 0) {\n    Router.push(\"/apply\");\n    return true;\n  }\n\n  if (profile && profile.courses.length > 0) {\n    /// defaultCourse can get out-of-sync with the user's actual registered course (dropped class etc)\n    var isUserInDefaultCourse = !!defaultCourse && profile.courses.some(function (c) {\n      return c.course.id === (defaultCourse === null || defaultCourse === void 0 ? void 0 : defaultCourse.id);\n    });\n    Router.push(\"/course/[cid]/today\", \"/course/\".concat(isUserInDefaultCourse ? defaultCourse.id : profile.courses[0].course.id, \"/today\"));\n    return true;\n  }\n\n  return false;\n}","import { useState } from \"react\";\nvar isWindow = true;\nexport function useLocalStorage(key, initialValue) {\n  var _useState = useState(function () {\n    try {\n      var item = isWindow && window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  }),\n      storedValue = _useState[0],\n      setStoredValue = _useState[1];\n\n  var setValue = function setValue(value) {\n    try {\n      var valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      isWindow && window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  var removeValue = function removeValue() {\n    try {\n      setStoredValue(null);\n      isWindow && window.localStorage.removeItem(key);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return [storedValue, setValue, removeValue];\n}","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { API } from \"@koh/api-client\";\nimport { Button, Result } from \"antd\";\nimport Router from \"next/router\";\nimport useSWR from \"swr\";\nimport { useHomePageRedirect } from \"../hooks/useHomePageRedirect\";\nexport default function NoCourses() {\n  useHomePageRedirect();\n\n  var _useSWR = useSWR(\"/api/v1/courses/self_enroll_courses\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", API.course.selfEnrollCourses());\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }))),\n      data = _useSWR.data;\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(Result, {\n      status: \"info\",\n      title: \"None of your courses are using the Khoury Office Hours App.\",\n      subTitle: \"If you expected your course to be here, try logging in again. If it still does not appear, please reach out to your course coordinator or professor.\"\n    }), (data === null || data === void 0 ? void 0 : data.courses.length) > 0 ? /*#__PURE__*/_jsxs(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      children: [\"One of our data sources for student-enrollment is currently experiencing an outage. If you think you belong to a class, please click on your corresponding class below.\", /*#__PURE__*/_jsx(\"div\", {\n        children: data === null || data === void 0 ? void 0 : data.courses.map(function (course, i) {\n          return /*#__PURE__*/_jsx(Button, {\n            onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n              return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      _context2.next = 2;\n                      return API.course.createSelfEnrollOverride(course.id);\n\n                    case 2:\n                      Router.push(\"/login\");\n\n                    case 3:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, _callee2);\n            })),\n            children: course.name\n          }, i);\n        })\n      })]\n    }) : null]\n  });\n}"]}}