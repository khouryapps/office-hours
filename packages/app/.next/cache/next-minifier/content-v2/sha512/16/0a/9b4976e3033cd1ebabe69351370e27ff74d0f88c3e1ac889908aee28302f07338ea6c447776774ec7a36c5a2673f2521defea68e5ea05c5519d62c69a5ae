{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[39],{\"23aj\":function(n,t,r){\"use strict\";r.r(t),r.d(t,\"default\",(function(){return i}));var e=r(\"jg1C\"),o=r(\"Bkb1\"),c=r.n(o),u=r(\"UKuP\"),a=r(\"Ogf2\");function i(){var n=Object(a.a)(),t=Object(u.a)();return n&&!t&&c.a.push(\"/nocourses\"),Object(e.jsx)(\"div\",{})}},UKuP:function(n,t,r){\"use strict\";r.d(t,\"a\",(function(){return i}));var e=r(\"mstN\"),o=r(\"Bkb1\"),c=r.n(o),u=r(\"Xccw\"),a=r(\"Ogf2\");function i(){var n=Object(a.a)(),t=Object(u.a)(\"defaultCourse\",null),r=Object(e.a)(t,1)[0];if(n&&n.pendingCourses&&n.pendingCourses.length>0)return c.a.push(\"/apply\"),!0;if(n&&n.courses.length>0){var o=!!r&&n.courses.some((function(n){return n.course.id===(null===r||void 0===r?void 0:r.id)}));return c.a.push(\"/course/[cid]/today\",\"/course/\".concat(o?r.id:n.courses[0].course.id,\"/today\")),!0}return!1}},Xccw:function(n,t,r){\"use strict\";r.d(t,\"a\",(function(){return o}));var e=r(\"ERkP\");function o(n,t){var r=Object(e.useState)((function(){try{var r=window.localStorage.getItem(n);return r?JSON.parse(r):t}catch(e){return console.error(e),t}})),o=r[0],c=r[1];return[o,function(t){try{var r=t instanceof Function?t(o):t;c(r),window.localStorage.setItem(n,JSON.stringify(r))}catch(e){console.error(e)}},function(){try{c(null),window.localStorage.removeItem(n)}catch(t){console.error(t)}}]}},yaYD:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return r(\"23aj\")}])}},[[\"yaYD\",1,2,0,3,5,7]]]);","map":{"version":3,"sources":["static/chunks/pages/index-ce480625d9f817130a37.js"],"names":["_N_E","window","push","23aj","module","__webpack_exports__","__webpack_require__","r","d","Home","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","next_router__WEBPACK_IMPORTED_MODULE_1__","next_router__WEBPACK_IMPORTED_MODULE_1___default","n","_hooks_useHomePageRedirect__WEBPACK_IMPORTED_MODULE_2__","_hooks_useProfile__WEBPACK_IMPORTED_MODULE_3__","profile","Object","didRedirect","a","UKuP","useHomePageRedirect","_var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","_useLocalStorage__WEBPACK_IMPORTED_MODULE_2__","_useProfile__WEBPACK_IMPORTED_MODULE_3__","_useLocalStorage","defaultCourse","pendingCourses","length","courses","isUserInDefaultCourse","some","c","course","id","concat","Xccw","useLocalStorage","react__WEBPACK_IMPORTED_MODULE_0__","key","initialValue","_useState","item","localStorage","getItem","JSON","parse","error","console","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","removeItem","yaYD","exports","__NEXT_P"],"mappings":"AAAAA,MACCC,OAAyB,iBAAIA,OAAyB,kBAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAErEC,OACA,SAAUC,EAAQC,EAAqBC,GAE7C,aACAA,EAAoBC,EAAEF,GACSC,EAAoBE,EAAEH,EAAqB,WAAW,WAAa,OAAOI,KACpF,IAAIC,EAAiDJ,EAAoB,QAErEK,EAA2CL,EAAoB,QAC/DM,EAAgEN,EAAoBO,EAAEF,GACtFG,EAA0DR,EAAoB,QAC9ES,EAAiDT,EAAoB,QAK9F,SAASG,IACP,IAAIO,EAAUC,OAAOF,EAAmE,EAA1EE,GACVC,EAAcD,OAAOH,EAAqF,EAA5FG,GAMlB,OAJID,IAAYE,GACdN,EAAiDO,EAAEjB,KAAK,cAGtCe,OAAOP,EAAoD,IAA3DO,CAA8D,MAAO,MAKrFG,KACA,SAAUhB,EAAQC,EAAqBC,GAE7C,aAC+BA,EAAoBE,EAAEH,EAAqB,KAAK,WAAa,OAAOgB,KAC9E,IAAIC,EAAsHhB,EAAoB,QAC1IK,EAA2CL,EAAoB,QAC/DM,EAAgEN,EAAoBO,EAAEF,GACtFY,EAAgDjB,EAAoB,QACpEkB,EAA2ClB,EAAoB,QAUxF,SAASe,IACP,IAAIL,EAAUC,OAAOO,EAA6D,EAApEP,GAEVQ,EAAmBR,OAAOM,EAAuE,EAA9EN,CAAiF,gBAAiB,MAErHS,EADoBT,OAAOK,EAAqI,EAA5IL,CAA+IQ,EAAkB,GACnJ,GAEtC,GAAIT,GAAWA,EAAQW,gBAAkBX,EAAQW,eAAeC,OAAS,EAEvE,OADAhB,EAAiDO,EAAEjB,KAAK,WACjD,EAGT,GAAIc,GAAWA,EAAQa,QAAQD,OAAS,EAAG,CAEzC,IAAIE,IAA0BJ,GAAiBV,EAAQa,QAAQE,MAAK,SAAUC,GAC5E,OAAOA,EAAEC,OAAOC,MAA0B,OAAlBR,QAA4C,IAAlBA,OAA2B,EAASA,EAAcQ,OAGtG,OADAtB,EAAiDO,EAAEjB,KAAK,sBAAuB,WAAWiC,OAAOL,EAAwBJ,EAAcQ,GAAKlB,EAAQa,QAAQ,GAAGI,OAAOC,GAAI,YACnK,EAGT,OAAO,IAKHE,KACA,SAAUhC,EAAQC,EAAqBC,GAE7C,aAC+BA,EAAoBE,EAAEH,EAAqB,KAAK,WAAa,OAAOgC,KAC9E,IAAIC,EAAqChC,EAAoB,QAIlF,SAAS+B,EAAgBE,EAAKC,GAC5B,IAAIC,EAAYxB,OAAOqB,EAA6C,SAApDrB,EAAuD,WACrE,IACE,IAAIyB,EAAmBzC,OAAO0C,aAAaC,QAAQL,GACnD,OAAOG,EAAOG,KAAKC,MAAMJ,GAAQF,EACjC,MAAOO,GAEP,OADAC,QAAQD,MAAMA,GACPP,MAGPS,EAAcR,EAAU,GACxBS,EAAiBT,EAAU,GAqB/B,MAAO,CAACQ,EAnBO,SAAkBE,GAC/B,IACE,IAAIC,EAAeD,aAAiBE,SAAWF,EAAMF,GAAeE,EACpED,EAAeE,GACHnD,OAAO0C,aAAaW,QAAQf,EAAKM,KAAKU,UAAUH,IAC5D,MAAOL,GACPC,QAAQD,MAAMA,KAIA,WAChB,IACEG,EAAe,MACHjD,OAAO0C,aAAaa,WAAWjB,GAC3C,MAAOQ,GACPC,QAAQD,MAAMA,QASdU,KACA,SAAUrD,EAAQsD,EAASpD,IAG5BL,OAAO0D,SAAW1D,OAAO0D,UAAY,IAAIzD,KAAK,CAC7C,IACA,WACE,OAAOI,EAAoB,aAOjC,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE"},"name":"static/chunks/pages/index-ce480625d9f817130a37.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[39],{\n\n/***/ \"23aj\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Home; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"jg1C\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"Bkb1\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _hooks_useHomePageRedirect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"UKuP\");\n/* harmony import */ var _hooks_useProfile__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"Ogf2\");\n\n\n\n\nfunction Home() {\n  var profile = Object(_hooks_useProfile__WEBPACK_IMPORTED_MODULE_3__[/* useProfile */ \"a\"])();\n  var didRedirect = Object(_hooks_useHomePageRedirect__WEBPACK_IMPORTED_MODULE_2__[/* useHomePageRedirect */ \"a\"])();\n\n  if (profile && !didRedirect) {\n    next_router__WEBPACK_IMPORTED_MODULE_1___default.a.push(\"/nocourses\");\n  }\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"div\", {});\n}\n\n/***/ }),\n\n/***/ \"UKuP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useHomePageRedirect; });\n/* harmony import */ var _var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"mstN\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"Bkb1\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _useLocalStorage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"Xccw\");\n/* harmony import */ var _useProfile__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"Ogf2\");\n\n\n\n\n/**\n * Redirect user to the course apply page if they are a prof with pending courses,\n * or to the today page for their default course.\n */\n\nfunction useHomePageRedirect() {\n  var profile = Object(_useProfile__WEBPACK_IMPORTED_MODULE_3__[/* useProfile */ \"a\"])();\n\n  var _useLocalStorage = Object(_useLocalStorage__WEBPACK_IMPORTED_MODULE_2__[/* useLocalStorage */ \"a\"])(\"defaultCourse\", null),\n      _useLocalStorage2 = Object(_var_www_source_node_modules_next_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__[/* default */ \"a\"])(_useLocalStorage, 1),\n      defaultCourse = _useLocalStorage2[0];\n\n  if (profile && profile.pendingCourses && profile.pendingCourses.length > 0) {\n    next_router__WEBPACK_IMPORTED_MODULE_1___default.a.push(\"/apply\");\n    return true;\n  }\n\n  if (profile && profile.courses.length > 0) {\n    /// defaultCourse can get out-of-sync with the user's actual registered course (dropped class etc)\n    var isUserInDefaultCourse = !!defaultCourse && profile.courses.some(function (c) {\n      return c.course.id === (defaultCourse === null || defaultCourse === void 0 ? void 0 : defaultCourse.id);\n    });\n    next_router__WEBPACK_IMPORTED_MODULE_1___default.a.push(\"/course/[cid]/today\", \"/course/\".concat(isUserInDefaultCourse ? defaultCourse.id : profile.courses[0].course.id, \"/today\"));\n    return true;\n  }\n\n  return false;\n}\n\n/***/ }),\n\n/***/ \"Xccw\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useLocalStorage; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"ERkP\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nvar isWindow = true;\nfunction useLocalStorage(key, initialValue) {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(function () {\n    try {\n      var item = isWindow && window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  }),\n      storedValue = _useState[0],\n      setStoredValue = _useState[1];\n\n  var setValue = function setValue(value) {\n    try {\n      var valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      isWindow && window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  var removeValue = function removeValue() {\n    try {\n      setStoredValue(null);\n      isWindow && window.localStorage.removeItem(key);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return [storedValue, setValue, removeValue];\n}\n\n/***/ }),\n\n/***/ \"yaYD\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return __webpack_require__(\"23aj\");\n      }\n    ]);\n  \n\n/***/ })\n\n},[[\"yaYD\",1,2,0,3,5,7]]]);","inputSourceMap":{"version":3,"sources":["/var/www/source/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/var/www/source/packages/app/pages/index.tsx","/var/www/source/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/var/www/source/packages/app/hooks/useHomePageRedirect.ts","/var/www/source/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/var/www/source/packages/app/hooks/useLocalStorage.ts","/var/www/source/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2F&absolutePagePath=private-next-pages%2Findex.tsx!"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AACf;AACkC;AAClB;AAClC;AACf,gBAAgB,4EAAU;AAC1B,oBAAoB,8FAAmB;;AAEvC;AACA,IAAI,kDAAM;AACV;;AAEA,sBAAsB,6DAAI,UAAU;AACpC,C;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACpF;AACmB;AACV;AAC1C;AACA;AACA;AACA;;AAEO;AACP,gBAAgB,sEAAU;;AAE1B,yBAAyB,gFAAe;AACxC,0BAA0B,8IAAc;AACxC;;AAEA;AACA,IAAI,kDAAM;AACV;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,kDAAM;AACV;AACA;;AAEA;AACA,C;;;;;;;;AC/BA;AAAA;AAAA;AAAiC;AACjC;AACO;AACP,kBAAkB,sDAAQ;AAC1B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;;;;AClCA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAA8B;AACrD;AACA","file":"x","sourcesContent":["import { jsx as _jsx } from \"react/jsx-runtime\";\nimport Router from \"next/router\";\nimport { useHomePageRedirect } from \"../hooks/useHomePageRedirect\";\nimport { useProfile } from \"../hooks/useProfile\";\nexport default function Home() {\n  var profile = useProfile();\n  var didRedirect = useHomePageRedirect();\n\n  if (profile && !didRedirect) {\n    Router.push(\"/nocourses\");\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {});\n}","import _slicedToArray from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport Router from \"next/router\";\nimport { useLocalStorage } from \"./useLocalStorage\";\nimport { useProfile } from \"./useProfile\";\n/**\n * Redirect user to the course apply page if they are a prof with pending courses,\n * or to the today page for their default course.\n */\n\nexport function useHomePageRedirect() {\n  var profile = useProfile();\n\n  var _useLocalStorage = useLocalStorage(\"defaultCourse\", null),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 1),\n      defaultCourse = _useLocalStorage2[0];\n\n  if (profile && profile.pendingCourses && profile.pendingCourses.length > 0) {\n    Router.push(\"/apply\");\n    return true;\n  }\n\n  if (profile && profile.courses.length > 0) {\n    /// defaultCourse can get out-of-sync with the user's actual registered course (dropped class etc)\n    var isUserInDefaultCourse = !!defaultCourse && profile.courses.some(function (c) {\n      return c.course.id === (defaultCourse === null || defaultCourse === void 0 ? void 0 : defaultCourse.id);\n    });\n    Router.push(\"/course/[cid]/today\", \"/course/\".concat(isUserInDefaultCourse ? defaultCourse.id : profile.courses[0].course.id, \"/today\"));\n    return true;\n  }\n\n  return false;\n}","import { useState } from \"react\";\nvar isWindow = true;\nexport function useLocalStorage(key, initialValue) {\n  var _useState = useState(function () {\n    try {\n      var item = isWindow && window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  }),\n      storedValue = _useState[0],\n      setStoredValue = _useState[1];\n\n  var setValue = function setValue(value) {\n    try {\n      var valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      isWindow && window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  var removeValue = function removeValue() {\n    try {\n      setStoredValue(null);\n      isWindow && window.localStorage.removeItem(key);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return [storedValue, setValue, removeValue];\n}","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return require(\"private-next-pages/index.tsx\");\n      }\n    ]);\n  "]}}