{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { API } from \"@koh/api-client\";\nimport { Modal, notification } from \"antd\";\nimport { useState } from \"react\";\nimport { NotionRenderer } from \"react-notion\";\nimport useSWR from \"swr\";\nimport { useLocalStorage } from \"../../hooks/useLocalStorage\";\nexport default function ReleaseNotes() {\n  const [releaseNotesLastSeen, setReleaseNotesLastSeen] = useLocalStorage(\"releaseNotesLastSeen\", null);\n  const {\n    0: showReleaseNotes,\n    1: setShowReleaseNotes\n  } = useState(false);\n  const {\n    data\n  } = useSWR(`api/v1/release_notes`, async () => API.releaseNotes.get());\n\n  if (!releaseNotesLastSeen && (data === null || data === void 0 ? void 0 : data.lastUpdatedUnixTime) || new Date(releaseNotesLastSeen) < new Date(data === null || data === void 0 ? void 0 : data.lastUpdatedUnixTime)) {\n    notification.open({\n      message: \"We've got new features/bug fixes\",\n      type: \"info\",\n      duration: 0,\n      description: \"Click to see what's new!\",\n      className: \"clickable-notification hide-in-percy\",\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: () => {\n        setShowReleaseNotes(true);\n        notification.destroy();\n      }\n    });\n    setReleaseNotesLastSeen(new Date());\n  }\n\n  const openLinksInNewTab = e => {\n    if (e.target.className === \"notion-link\") {\n      e.preventDefault();\n      window.open(e.target.href);\n    }\n  };\n\n  return __jsx(\"div\", {\n    onClick: openLinksInNewTab\n  }, (data === null || data === void 0 ? void 0 : data.releaseNotes) ? __jsx(Modal, {\n    title: \"Release Notes\",\n    visible: showReleaseNotes,\n    bodyStyle: {\n      padding: \"0px 24px\"\n    },\n    footer: __jsx(React.Fragment, null, __jsx(\"b\", null, \"Want to see more? \"), __jsx(\"a\", {\n      href: \"https://info.khouryofficehours.com/release-notes-archive\",\n      target: \"_blank\",\n      rel: \"noreferrer\"\n    }, \" \", \"Click here to view the archive\")),\n    width: 625,\n    onCancel: () => setShowReleaseNotes(false)\n  }, __jsx(NotionRenderer, {\n    blockMap: data.releaseNotes\n  })) : null);\n}","map":null,"metadata":{},"sourceType":"module"}