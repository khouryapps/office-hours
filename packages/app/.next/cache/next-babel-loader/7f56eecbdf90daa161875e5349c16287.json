{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport Router from \"next/router\";\nimport { useLocalStorage } from \"./useLocalStorage\";\nimport { useProfile } from \"./useProfile\";\n/**\n * Redirect user to the course apply page if they are a prof with pending courses,\n * or to the today page for their default course.\n */\n\nexport function useHomePageRedirect() {\n  var profile = useProfile();\n\n  var _useLocalStorage = useLocalStorage(\"defaultCourse\", null),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 1),\n      defaultCourse = _useLocalStorage2[0];\n\n  if (profile && profile.pendingCourses && profile.pendingCourses.length > 0) {\n    Router.push(\"/apply\");\n    return true;\n  }\n\n  if (profile && profile.courses.length > 0) {\n    /// defaultCourse can get out-of-sync with the user's actual registered course (dropped class etc)\n    var isUserInDefaultCourse = !!defaultCourse && profile.courses.some(function (c) {\n      return c.course.id === (defaultCourse === null || defaultCourse === void 0 ? void 0 : defaultCourse.id);\n    });\n    Router.push(\"/course/[cid]/today\", \"/course/\".concat(isUserInDefaultCourse ? defaultCourse.id : profile.courses[0].course.id, \"/today\"));\n    return true;\n  }\n\n  return false;\n}","map":{"version":3,"sources":["/var/www/source/packages/app/hooks/useHomePageRedirect.ts"],"names":["Router","useLocalStorage","useProfile","useHomePageRedirect","profile","defaultCourse","pendingCourses","length","push","courses","isUserInDefaultCourse","some","c","course","id"],"mappings":";AACA,OAAOA,MAAP,MAAmB,aAAnB;AACA,SAASC,eAAT,QAAgC,mBAAhC;AACA,SAASC,UAAT,QAA2B,cAA3B;AAEA;;;;;AAIA,OAAO,SAASC,mBAAT,GAAwC;AAC7C,MAAMC,OAAa,GAAGF,UAAU,EAAhC;;AAD6C,yBAErBD,eAAe,CAAC,eAAD,EAAkB,IAAlB,CAFM;AAAA;AAAA,MAEtCI,aAFsC;;AAG7C,MAAID,OAAO,IAAIA,OAAO,CAACE,cAAnB,IAAqCF,OAAO,CAACE,cAAR,CAAuBC,MAAvB,GAAgC,CAAzE,EAA4E;AAC1EP,IAAAA,MAAM,CAACQ,IAAP,CAAY,QAAZ;AACA,WAAO,IAAP;AACD;;AACD,MAAIJ,OAAO,IAAIA,OAAO,CAACK,OAAR,CAAgBF,MAAhB,GAAyB,CAAxC,EAA2C;AACzC;AACA,QAAMG,qBAAqB,GACzB,CAAC,CAACL,aAAF,IACAD,OAAO,CAACK,OAAR,CAAgBE,IAAhB,CAAqB,UAACC,CAAD;AAAA,aAAOA,CAAC,CAACC,MAAF,CAASC,EAAT,MAAgBT,aAAhB,aAAgBA,aAAhB,uBAAgBA,aAAa,CAAES,EAA/B,CAAP;AAAA,KAArB,CAFF;AAGAd,IAAAA,MAAM,CAACQ,IAAP,CACE,qBADF,oBAGIE,qBAAqB,GAAGL,aAAa,CAACS,EAAjB,GAAsBV,OAAO,CAACK,OAAR,CAAgB,CAAhB,EAAmBI,MAAnB,CAA0BC,EAHzE;AAMA,WAAO,IAAP;AACD;;AACD,SAAO,KAAP;AACD","sourcesContent":["import { User } from \"@koh/common\";\nimport Router from \"next/router\";\nimport { useLocalStorage } from \"./useLocalStorage\";\nimport { useProfile } from \"./useProfile\";\n\n/**\n * Redirect user to the course apply page if they are a prof with pending courses,\n * or to the today page for their default course.\n */\nexport function useHomePageRedirect(): boolean {\n  const profile: User = useProfile();\n  const [defaultCourse] = useLocalStorage(\"defaultCourse\", null);\n  if (profile && profile.pendingCourses && profile.pendingCourses.length > 0) {\n    Router.push(\"/apply\");\n    return true;\n  }\n  if (profile && profile.courses.length > 0) {\n    /// defaultCourse can get out-of-sync with the user's actual registered course (dropped class etc)\n    const isUserInDefaultCourse =\n      !!defaultCourse &&\n      profile.courses.some((c) => c.course.id === defaultCourse?.id);\n    Router.push(\n      \"/course/[cid]/today\",\n      `/course/${\n        isUserInDefaultCourse ? defaultCourse.id : profile.courses[0].course.id\n      }/today`\n    );\n    return true;\n  }\n  return false;\n}\n"]},"metadata":{},"sourceType":"module"}