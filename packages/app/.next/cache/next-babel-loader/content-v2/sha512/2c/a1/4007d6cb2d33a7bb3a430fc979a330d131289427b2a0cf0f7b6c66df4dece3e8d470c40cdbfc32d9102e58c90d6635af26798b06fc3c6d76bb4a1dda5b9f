{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _regeneratorRuntime from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { API } from \"@koh/api-client\";\nimport { Button, Col, Form, Input, message, Switch } from \"antd\";\nimport { pick } from \"lodash\";\nimport { HeaderTitle } from \"./Styled\";\nimport React from \"react\";\nimport useSWR from \"swr\";\nexport default function TeamsSettings() {\n  var TextArea = Input.TextArea;\n\n  var _useSWR = useSWR(\"api/v1/profile\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", API.profile.index());\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }))),\n      profile = _useSWR.data,\n      mutate = _useSWR.mutate;\n\n  var _Form$useForm = Form.useForm(),\n      _Form$useForm2 = _slicedToArray(_Form$useForm, 1),\n      form = _Form$useForm2[0];\n\n  var editProfile = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(updateProfile) {\n      var newProfile;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              newProfile = _objectSpread(_objectSpread({}, profile), updateProfile);\n              mutate(newProfile, false);\n              _context2.next = 4;\n              return API.profile.patch(pick(newProfile, [\"defaultMessage\", \"includeDefaultMessage\"]));\n\n            case 4:\n              mutate();\n              return _context2.abrupt(\"return\", newProfile);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function editProfile(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleOk = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var value, newProfile;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return form.validateFields();\n\n            case 2:\n              value = _context3.sent;\n              _context3.next = 5;\n              return editProfile(value);\n\n            case 5:\n              newProfile = _context3.sent;\n              form.setFieldsValue(newProfile);\n              message.success(\"Your profile settings have been successfully updated\");\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleOk() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return profile ? /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(HeaderTitle, {\n      children: /*#__PURE__*/_jsx(\"h1\", {\n        children: \"Teams Settings\"\n      })\n    }), /*#__PURE__*/_jsx(Form, {\n      wrapperCol: {\n        span: 18\n      },\n      form: form,\n      initialValues: profile,\n      children: /*#__PURE__*/_jsxs(Col, {\n        children: [/*#__PURE__*/_jsx(Form.Item, {\n          label: \"Open Teams Chat with Default Message\",\n          name: \"includeDefaultMessage\",\n          valuePropName: \"checked\",\n          children: /*#__PURE__*/_jsx(Switch, {})\n        }), /*#__PURE__*/_jsx(Form.Item, {\n          shouldUpdate: true,\n          noStyle: true,\n          style: {\n            marginTop: \"30px\"\n          },\n          children: function children() {\n            return (form === null || form === void 0 ? void 0 : form.getFieldValue(\"includeDefaultMessage\")) && /*#__PURE__*/_jsx(Form.Item, {\n              label: \"Default Teams Message\",\n              name: \"defaultMessage\",\n              \"data-cy\": \"defaultMessageInput\",\n              rules: [{\n                required: true,\n                message: \"Please input your default message for Teams chat!\"\n              }],\n              children: /*#__PURE__*/_jsx(TextArea, {\n                rows: 4,\n                placeholder: profile !== null && profile !== void 0 && profile.defaultMessage ? profile === null || profile === void 0 ? void 0 : profile.defaultMessage : \"Enter Your Message Here\"\n              })\n            });\n          }\n        })]\n      })\n    }), /*#__PURE__*/_jsx(Button, {\n      type: \"primary\",\n      onClick: handleOk,\n      style: {\n        marginBottom: \"15px\"\n      },\n      children: \"Save\"\n    }, \"submit\")]\n  }) : null;\n}","map":null,"metadata":{},"sourceType":"module"}