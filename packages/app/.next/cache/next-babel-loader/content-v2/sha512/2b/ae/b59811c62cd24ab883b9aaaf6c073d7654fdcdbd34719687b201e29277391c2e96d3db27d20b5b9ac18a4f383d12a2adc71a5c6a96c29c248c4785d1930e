{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { DownOutlined } from \"@ant-design/icons\";\nimport { Role } from \"@koh/common\";\nimport { Button, Drawer, Dropdown, Menu } from \"antd\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useCourse } from \"../../hooks/useCourse\";\nimport { useLocalStorage } from \"../../hooks/useLocalStorage\";\nimport { useProfile } from \"../../hooks/useProfile\";\nimport { useRoleInCourse } from \"../../hooks/useRoleInCourse\";\nimport AlertsContainer from \"./AlertsContainer\";\nimport NavBarTabs from \"./NavBarTabs\";\nimport ProfileDrawer from \"./ProfileDrawer\";\nvar Nav = styled.nav.withConfig({\n  displayName: \"NavBar__Nav\",\n  componentId: \"sc-1jr3ir-0\"\n})([\"padding:0px 0px;display:flex;align-items:center;height:67px;z-index:1;\"]); // A hack to get the white stripe edge to edge, even when Nav is narrower.\n\nvar NavBG = styled.nav.withConfig({\n  displayName: \"NavBar__NavBG\",\n  componentId: \"sc-1jr3ir-1\"\n})([\"position:absolute;top:0;left:0;right:0;height:67px;background:#fff;border-bottom:solid 1px #e8e8e8;\"]);\nvar LogoContainer = styled.div.withConfig({\n  displayName: \"NavBar__LogoContainer\",\n  componentId: \"sc-1jr3ir-2\"\n})([\"z-index:1;display:flex;align-items:center;margin-right:20px;\"]);\nvar Logo = styled.div.withConfig({\n  displayName: \"NavBar__Logo\",\n  componentId: \"sc-1jr3ir-3\"\n})([\"font-size:20px;font-weight:500;color:#262626;text-transform:capitalize;\"]);\nvar MenuCon = styled.div.withConfig({\n  displayName: \"NavBar__MenuCon\",\n  componentId: \"sc-1jr3ir-4\"\n})([\"flex-grow:1;display:flex;align-items:center;justify-content:space-between;padding-left:0px;\"]);\nvar LeftMenu = styled.div.withConfig({\n  displayName: \"NavBar__LeftMenu\",\n  componentId: \"sc-1jr3ir-5\"\n})([\"@media (max-width:650px){display:none;}flex-grow:1;\"]);\nvar RightMenu = styled.div.withConfig({\n  displayName: \"NavBar__RightMenu\",\n  componentId: \"sc-1jr3ir-6\"\n})([\"@media (max-width:650px){display:none;}\"]);\nvar BarsMenu = styled(Button).withConfig({\n  displayName: \"NavBar__BarsMenu\",\n  componentId: \"sc-1jr3ir-7\"\n})([\"height:32px;padding:6px;margin-top:8px;display:none;background:none;@media (max-width:650px){display:inline-block;}\"]);\nvar BarsButton = styled.span.withConfig({\n  displayName: \"NavBar__BarsButton\",\n  componentId: \"sc-1jr3ir-8\"\n})([\"display:block;width:20px;height:2px;background:#1890ff;position:relative;&:after,:before{content:attr(x);width:20px;position:absolute;top:-6px;left:0;height:2px;background:#1890ff;}&:after{top:auto;bottom:-6px;}\"]);\nvar CoursesMenuItem = styled(Menu.Item).withConfig({\n  displayName: \"NavBar__CoursesMenuItem\",\n  componentId: \"sc-1jr3ir-9\"\n})([\"z-index:1;background:#ffffff;\"]);\nexport default function NavBar(_ref) {\n  var _course$queues;\n\n  var courseId = _ref.courseId;\n  var profile = useProfile();\n\n  if (!courseId) {\n    courseId = profile === null || profile === void 0 ? void 0 : profile.courses[0].course.id;\n  }\n\n  var _useLocalStorage = useLocalStorage(\"defaultCourse\", null),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 2),\n      _defaultCourse = _useLocalStorage2[0],\n      setDefaultCourse = _useLocalStorage2[1];\n\n  var _useState = useState(false),\n      visible = _useState[0],\n      setVisible = _useState[1];\n\n  var _useRouter = useRouter(),\n      pathname = _useRouter.pathname;\n\n  var _useCourse = useCourse(courseId),\n      course = _useCourse.course;\n\n  var role = useRoleInCourse(courseId);\n  var openQueues = course === null || course === void 0 ? void 0 : (_course$queues = course.queues) === null || _course$queues === void 0 ? void 0 : _course$queues.filter(function (queue) {\n    return queue.isOpen;\n  });\n\n  var showDrawer = function showDrawer() {\n    setVisible(true);\n  };\n\n  var onClose = function onClose() {\n    setVisible(false);\n  };\n\n  var courseSelector = /*#__PURE__*/_jsx(Menu, {\n    children: profile === null || profile === void 0 ? void 0 : profile.courses.map(function (c) {\n      return /*#__PURE__*/_jsx(CoursesMenuItem, {\n        onClick: function onClick() {\n          return setDefaultCourse(c.course);\n        },\n        children: /*#__PURE__*/_jsx(Link, {\n          href: \"/course/[cid]/today\",\n          as: \"/course/\".concat(c.course.id, \"/today\"),\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: c.course.name\n          })\n        })\n      }, c.course.id);\n    })\n  });\n\n  var tabs = [{\n    href: \"/course/[cid]/today\",\n    as: \"/course/\".concat(courseId, \"/today\"),\n    text: \"Today\"\n  }, {\n    href: \"/course/[cid]/schedule\",\n    as: \"/course/\".concat(courseId, \"/schedule\"),\n    text: \"Schedule\"\n  }];\n\n  if (role === Role.PROFESSOR) {\n    tabs.push({\n      href: \"/course/[cid]/course_admin_panel\",\n      as: \"/course/\".concat(courseId, \"/course_admin_panel\"),\n      text: \"Admin Panel\"\n    });\n  }\n\n  if ((openQueues === null || openQueues === void 0 ? void 0 : openQueues.length) > 0) {\n    tabs.push({\n      text: \"Queue\",\n      queues: openQueues,\n      courseId: courseId\n    });\n  }\n\n  if (role === Role.PROFESSOR) {\n    tabs.push({\n      href: \"/course/[cid]/insights\",\n      as: \"/course/\".concat(courseId, \"/insights\"),\n      text: \"Insights\"\n    });\n  }\n\n  return courseId ? /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(NavBG, {}), /*#__PURE__*/_jsx(AlertsContainer, {\n      courseId: courseId\n    }), /*#__PURE__*/_jsxs(Nav, {\n      children: [/*#__PURE__*/_jsx(LogoContainer, {\n        children: (profile === null || profile === void 0 ? void 0 : profile.courses.length) > 1 ? /*#__PURE__*/_jsx(Dropdown, {\n          overlay: courseSelector,\n          trigger: [\"click\"],\n          placement: \"bottomLeft\",\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsxs(Logo, {\n              children: [/*#__PURE__*/_jsx(\"span\", {\n                children: course === null || course === void 0 ? void 0 : course.name\n              }), /*#__PURE__*/_jsx(DownOutlined, {\n                style: {\n                  fontSize: \"16px\",\n                  verticalAlign: \"-0.125em\",\n                  marginLeft: \"5px\"\n                }\n              })]\n            })\n          })\n        }) : /*#__PURE__*/_jsx(Logo, {\n          children: /*#__PURE__*/_jsx(\"span\", {\n            children: course === null || course === void 0 ? void 0 : course.name\n          })\n        })\n      }), /*#__PURE__*/_jsxs(MenuCon, {\n        children: [/*#__PURE__*/_jsx(LeftMenu, {\n          children: /*#__PURE__*/_jsx(NavBarTabs, {\n            horizontal: true,\n            currentHref: pathname,\n            tabs: tabs\n          })\n        }), /*#__PURE__*/_jsx(RightMenu, {\n          children: /*#__PURE__*/_jsx(ProfileDrawer, {\n            courseId: courseId\n          })\n        })]\n      }), /*#__PURE__*/_jsx(BarsMenu, {\n        type: \"primary\",\n        onClick: showDrawer,\n        children: /*#__PURE__*/_jsx(BarsButton, {})\n      }), /*#__PURE__*/_jsxs(Drawer, {\n        title: \"Course\",\n        placement: \"right\",\n        visible: visible,\n        closable: false,\n        onClose: onClose,\n        bodyStyle: {\n          padding: \"12px\"\n        },\n        children: [/*#__PURE__*/_jsx(NavBarTabs, {\n          currentHref: pathname,\n          tabs: tabs\n        }), /*#__PURE__*/_jsx(ProfileDrawer, {\n          courseId: courseId\n        })]\n      })]\n    })]\n  }) : null;\n}","map":null,"metadata":{},"sourceType":"module"}