{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { CheckOutlined, CloseOutlined, DeleteRowOutlined, EditOutlined, TeamOutlined, UndoOutlined } from \"@ant-design/icons\";\nimport { API } from \"@koh/api-client\";\nimport { OpenQuestionStatus } from \"@koh/common\";\nimport { Button, Col, Popconfirm, Tooltip } from \"antd\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport { useStudentQuestion } from \"../../../hooks/useStudentQuestion\";\nimport { toOrdinal } from \"../../../utils/ordinal\";\nimport Banner, { BannerButton, BannerDangerButton } from \"../Banner\";\nvar BoldNumber = styled.span.withConfig({\n  displayName: \"StudentBanner__BoldNumber\",\n  componentId: \"sc-znqvhq-0\"\n})([\"font-weight:bold;\"]);\nvar QuestionDetails = styled.div.withConfig({\n  displayName: \"StudentBanner__QuestionDetails\",\n  componentId: \"sc-znqvhq-1\"\n})([\"display:flex;\"]);\nvar InfoHeader = styled.div.withConfig({\n  displayName: \"StudentBanner__InfoHeader\",\n  componentId: \"sc-znqvhq-2\"\n})([\"font-weight:bold;font-size:14px;font-variant:small-caps;\"]);\nvar Bullets = styled.ul.withConfig({\n  displayName: \"StudentBanner__Bullets\",\n  componentId: \"sc-znqvhq-3\"\n})([\"color:#000;\"]);\nvar ColWithRightMargin = styled(Col).withConfig({\n  displayName: \"StudentBanner__ColWithRightMargin\",\n  componentId: \"sc-znqvhq-4\"\n})([\"margin-right:32px;\"]);\nvar PriorityQueuedBanner = styled.span.withConfig({\n  displayName: \"StudentBanner__PriorityQueuedBanner\",\n  componentId: \"sc-znqvhq-5\"\n})([\"display:flex;flex-direction:column;margin:12px 0;\"]);\nexport default function StudentBanner(_ref) {\n  var queueId = _ref.queueId,\n      editQuestion = _ref.editQuestion,\n      leaveQueue = _ref.leaveQueue;\n\n  var _useStudentQuestion = useStudentQuestion(queueId),\n      studentQuestion = _useStudentQuestion.studentQuestion,\n      studentQuestionIndex = _useStudentQuestion.studentQuestionIndex;\n\n  switch (studentQuestion === null || studentQuestion === void 0 ? void 0 : studentQuestion.status) {\n    case \"Drafting\":\n      return /*#__PURE__*/_jsx(Banner, {\n        titleColor: \"#faad14\",\n        contentColor: \"#ffd666\",\n        title: \"Please finish writing your question\",\n        content: \"Your spot in queue has been temporarily reserved. Please finish describing your question to receive help and finish joining the queue.\",\n        buttons: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(Tooltip, {\n            title: \"Delete Draft\",\n            children: /*#__PURE__*/_jsx(BannerButton, {\n              icon: /*#__PURE__*/_jsx(DeleteRowOutlined, {}),\n              onClick: leaveQueue\n            })\n          }), /*#__PURE__*/_jsx(Tooltip, {\n            title: \"Finish Draft\",\n            children: /*#__PURE__*/_jsx(BannerButton, {\n              \"data-cy\": \"edit-question\",\n              icon: /*#__PURE__*/_jsx(EditOutlined, {}),\n              onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n                return _regeneratorRuntime.wrap(function _callee$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        editQuestion();\n\n                      case 1:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _callee);\n              }))\n            })\n          })]\n        })\n      });\n\n    case \"Queued\":\n      return /*#__PURE__*/_jsx(Banner, {\n        titleColor: \"#3684C6\",\n        contentColor: \"#ABD4F3\",\n        title: /*#__PURE__*/_jsxs(\"span\", {\n          children: [\"You are\", \" \", /*#__PURE__*/_jsx(BoldNumber, {\n            children: toOrdinal(studentQuestionIndex + 1)\n          }), \" in queue\"]\n        }),\n        buttons: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(LeaveQueueButton, {\n            leaveQueue: leaveQueue\n          }), /*#__PURE__*/_jsx(Tooltip, {\n            title: \"Edit Question\",\n            children: /*#__PURE__*/_jsx(BannerButton, {\n              \"data-cy\": \"edit-question\",\n              icon: /*#__PURE__*/_jsx(EditOutlined, {}),\n              onClick: editQuestion\n            })\n          })]\n        }),\n        content: /*#__PURE__*/_jsx(QuestionDetailRow, {\n          studentQuestion: studentQuestion\n        })\n      });\n\n    case \"Helping\":\n      return /*#__PURE__*/_jsx(Banner, {\n        titleColor: \"#66BB6A\",\n        contentColor: \"#82C985\",\n        title: /*#__PURE__*/_jsxs(\"span\", {\n          children: [/*#__PURE__*/_jsx(BoldNumber, {\n            children: studentQuestion.taHelped.name\n          }), \" is coming to help you\"]\n        }),\n        buttons: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(LeaveQueueButton, {\n            leaveQueue: leaveQueue\n          }), studentQuestion.isOnline && /*#__PURE__*/_jsx(Tooltip, {\n            title: \"Open Teams DM\",\n            children: /*#__PURE__*/_jsx(BannerButton, {\n              icon: /*#__PURE__*/_jsx(TeamOutlined, {}),\n              onClick: function onClick() {\n                window.open(\"https://teams.microsoft.com/l/chat/0/0?users=\".concat(studentQuestion.taHelped.email));\n              }\n            })\n          })]\n        }),\n        content: /*#__PURE__*/_jsxs(Bullets, {\n          children: [/*#__PURE__*/_jsx(\"li\", {\n            children: \"Please be dressed appropriately\"\n          }), /*#__PURE__*/_jsx(\"li\", {\n            children: \"Be respectful of the TA\\u2019s time\"\n          }), /*#__PURE__*/_jsx(\"li\", {\n            children: \"Come prepared with your question!\"\n          })]\n        })\n      });\n\n    case \"ReQueueing\":\n      return /*#__PURE__*/_jsx(Banner, {\n        titleColor: \"#66BB6A\",\n        contentColor: \"#82C985\",\n        title: /*#__PURE__*/_jsx(\"span\", {\n          children: \"Are you ready to re-join the queue?\"\n        }),\n        buttons: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(LeaveQueueButton, {\n            leaveQueue: leaveQueue\n          }), /*#__PURE__*/_jsx(Tooltip, {\n            title: \"Rejoin Queue\",\n            children: /*#__PURE__*/_jsx(Button, {\n              shape: \"circle\",\n              style: {\n                marginLeft: \"16px\",\n                border: 0\n              },\n              icon: /*#__PURE__*/_jsx(UndoOutlined, {}),\n              onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n                return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _context2.next = 2;\n                        return API.questions.update(studentQuestion.id, {\n                          status: OpenQuestionStatus.PriorityQueued\n                        });\n\n                      case 2:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, _callee2);\n              })),\n              type: \"primary\",\n              \"data-cy\": \"re-join-queue\",\n              size: \"large\"\n            })\n          })]\n        }),\n        content: /*#__PURE__*/_jsxs(Bullets, {\n          children: [/*#__PURE__*/_jsx(\"li\", {\n            children: \"Have you finished doing what the TA has told you?\"\n          }), /*#__PURE__*/_jsx(\"li\", {\n            children: \"Once you hit requeue, you will be placed at the top of the queue\"\n          })]\n        })\n      });\n\n    case \"PriorityQueued\":\n      return /*#__PURE__*/_jsx(Banner, {\n        titleColor: \"#3684C6\",\n        contentColor: \"#ABD4F3\",\n        title: /*#__PURE__*/_jsxs(PriorityQueuedBanner, {\n          children: [\"You are now in a priority queue, you will be helped soon. \", /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"span\", {\n            style: {\n              fontSize: 16\n            },\n            children: [\"You were last helped by\", \" \", /*#__PURE__*/_jsx(\"span\", {\n              style: {\n                fontWeight: \"bold\"\n              },\n              children: studentQuestion.taHelped.name\n            }), \".\"]\n          })]\n        }),\n        buttons: /*#__PURE__*/_jsxs(_Fragment, {\n          children: [/*#__PURE__*/_jsx(LeaveQueueButton, {\n            leaveQueue: leaveQueue\n          }), /*#__PURE__*/_jsx(Tooltip, {\n            title: \"Edit Question\",\n            children: /*#__PURE__*/_jsx(BannerButton, {\n              \"data-cy\": \"edit-question\",\n              icon: /*#__PURE__*/_jsx(EditOutlined, {}),\n              onClick: editQuestion\n            })\n          })]\n        }),\n        content: /*#__PURE__*/_jsx(QuestionDetailRow, {\n          studentQuestion: studentQuestion\n        })\n      });\n\n    default:\n      return /*#__PURE__*/_jsx(\"div\", {});\n  }\n}\n\nfunction LeaveQueueButton(_ref4) {\n  var leaveQueue = _ref4.leaveQueue;\n  return /*#__PURE__*/_jsx(Popconfirm, {\n    title: \"Are you sure you want to leave the queue?\",\n    okText: \"Yes\",\n    cancelText: \"No\",\n    onConfirm: leaveQueue,\n    children: /*#__PURE__*/_jsx(Tooltip, {\n      title: \"Leave Queue\",\n      children: /*#__PURE__*/_jsx(BannerDangerButton, {\n        \"data-cy\": \"leave-queue\",\n        icon: /*#__PURE__*/_jsx(DeleteRowOutlined, {})\n      })\n    })\n  });\n}\n\nfunction QuestionDetailRow(_ref5) {\n  var studentQuestion = _ref5.studentQuestion;\n  return /*#__PURE__*/_jsxs(QuestionDetails, {\n    children: [/*#__PURE__*/_jsxs(ColWithRightMargin, {\n      flex: \"4 4\",\n      children: [/*#__PURE__*/_jsx(InfoHeader, {\n        children: \"question\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: studentQuestion.text\n      })]\n    }), /*#__PURE__*/_jsxs(Col, {\n      flex: \"0.5 0.5 95px\",\n      children: [/*#__PURE__*/_jsx(InfoHeader, {\n        children: \"type\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: studentQuestion.questionType\n      })]\n    }), /*#__PURE__*/_jsxs(Col, {\n      flex: \"0 0 89px\",\n      children: [/*#__PURE__*/_jsx(InfoHeader, {\n        children: \"groupable\"\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: studentQuestion.groupable ? /*#__PURE__*/_jsx(CheckOutlined, {}) : /*#__PURE__*/_jsx(CloseOutlined, {})\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}