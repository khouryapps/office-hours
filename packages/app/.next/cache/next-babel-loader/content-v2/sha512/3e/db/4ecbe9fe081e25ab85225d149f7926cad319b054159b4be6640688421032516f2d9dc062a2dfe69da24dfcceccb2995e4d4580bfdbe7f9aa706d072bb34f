{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport { API } from \"@koh/api-client\";\nimport { Role } from \"@koh/common\";\nimport { Alert, Divider, Input, List, Pagination, Spin } from \"antd\";\nimport Avatar from \"antd/lib/avatar/avatar\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\nimport useSWR from \"swr\";\nvar CourseRosterComponent = styled.div.withConfig({\n  displayName: \"CourseRoster__CourseRosterComponent\",\n  componentId: \"sc-yj2eat-0\"\n})([\"margin-left:auto;margin-right:auto;\"]);\nvar TableBackground = styled.div.withConfig({\n  displayName: \"CourseRoster__TableBackground\",\n  componentId: \"sc-yj2eat-1\"\n})([\"background-color:white;\"]);\nexport default function CourseRoster(_ref) {\n  var courseId = _ref.courseId;\n  return /*#__PURE__*/_jsxs(CourseRosterComponent, {\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      children: \"Course Roster\"\n    }), /*#__PURE__*/_jsx(Alert, {\n      message: \"Notice\",\n      description: \"Please note that the roster will update as users log into the office hours app. There is no direct user sync with the Admin Portal\",\n      type: \"warning\",\n      showIcon: true,\n      style: {\n        marginBottom: '16px'\n      }\n    }), /*#__PURE__*/_jsx(RenderTable, {\n      courseId: courseId,\n      role: Role.PROFESSOR,\n      listTitle: \"Professors\",\n      displaySearchBar: false,\n      searchPlaceholder: \"\"\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(RenderTable, {\n      courseId: courseId,\n      role: Role.TA,\n      listTitle: \"Teaching Assistants\",\n      displaySearchBar: true,\n      searchPlaceholder: \"Search TAs\"\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(RenderTable, {\n      courseId: courseId,\n      role: Role.STUDENT,\n      listTitle: \"Students\",\n      displaySearchBar: true,\n      searchPlaceholder: \"Search students\"\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Divider, {})]\n  });\n}\n\nfunction RenderTable(_ref2) {\n  var courseId = _ref2.courseId,\n      role = _ref2.role,\n      listTitle = _ref2.listTitle,\n      displaySearchBar = _ref2.displaySearchBar,\n      searchPlaceholder = _ref2.searchPlaceholder;\n\n  var _useState = useState(1),\n      page = _useState[0],\n      setPage = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      input = _useState2[0],\n      setInput = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      search = _useState3[0],\n      setSearch = _useState3[1];\n\n  var handleInput = function handleInput(event) {\n    event.preventDefault();\n    setInput(event.target.value);\n  };\n\n  var handleSearch = function handleSearch(event) {\n    event.preventDefault();\n    setSearch(event.target.value);\n    setPage(1);\n  };\n\n  var _useSWR = useSWR(\"\".concat(role, \"/\").concat(page, \"/\").concat(search), /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return API.course.getUserInfo(courseId, page, role, search);\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }))),\n      data = _useSWR.data;\n\n  if (!data) {\n    return /*#__PURE__*/_jsx(Spin, {\n      tip: \"Loading...\",\n      size: \"large\"\n    });\n  } else {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsxs(TableBackground, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          style: {\n            backgroundColor: \"#f0f0f0\",\n            height: \"56px\"\n          },\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            style: {\n              position: \"relative\",\n              left: \"10px\",\n              top: \"14px\"\n            },\n            children: listTitle\n          })\n        }), displaySearchBar && /*#__PURE__*/_jsx(Input, {\n          placeholder: searchPlaceholder,\n          prefix: /*#__PURE__*/_jsx(SearchOutlined, {}),\n          value: input,\n          onChange: handleInput,\n          onPressEnter: handleSearch\n        }), /*#__PURE__*/_jsx(List, {\n          dataSource: data.users,\n          renderItem: function renderItem(item) {\n            return /*#__PURE__*/_jsxs(List.Item, {\n              children: [/*#__PURE__*/_jsx(List.Item.Meta, {\n                avatar: /*#__PURE__*/_jsx(Avatar, {\n                  src: item.photoURL\n                }),\n                title: item.name\n              }), /*#__PURE__*/_jsx(\"div\", {\n                children: item.email\n              })]\n            }, item.id);\n          },\n          bordered: true\n        })]\n      }), /*#__PURE__*/_jsx(\"br\", {}), data.total > 50 && /*#__PURE__*/_jsx(Pagination, {\n        style: {\n          \"float\": \"right\"\n        },\n        current: page,\n        pageSize: 50,\n        total: data.total,\n        onChange: function onChange(page) {\n          return setPage(page);\n        },\n        showSizeChanger: false\n      })]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}