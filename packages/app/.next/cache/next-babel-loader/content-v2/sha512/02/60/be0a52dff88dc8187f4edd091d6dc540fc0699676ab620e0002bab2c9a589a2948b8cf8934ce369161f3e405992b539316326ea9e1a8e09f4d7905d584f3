{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _slicedToArray from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { PhoneOutlined } from \"@ant-design/icons\";\nimport { API } from \"@koh/api-client\";\nimport { Checkbox, Tooltip } from \"antd\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useDefaultMessage } from \"../../../../hooks/useDefaultMessage\";\nimport { useTAInQueueInfo } from \"../../../../hooks/useTAInQueueInfo\";\nimport { BannerPrimaryButton } from \"../../Banner\";\nimport { Header } from \"../TAQueueDetail\";\nimport TAQueueListItem from \"../TAQueueListItem\";\nimport { useTeams } from \"../../../../hooks/useTeams\";\nexport var Description = styled.div.withConfig({\n  displayName: \"AllQuestionsChecklist__Description\",\n  componentId: \"sc-1m6wlb4-0\"\n})([\"font-size:12px;color:#8895a6;\"]);\nvar SelectAllContainer = styled.div.withConfig({\n  displayName: \"AllQuestionsChecklist__SelectAllContainer\",\n  componentId: \"sc-1m6wlb4-1\"\n})([\"padding:3px 8px;border-bottom:1px solid #cfd6de;\"]);\nvar QuestionsList = styled.div.withConfig({\n  displayName: \"AllQuestionsChecklist__QuestionsList\",\n  componentId: \"sc-1m6wlb4-2\"\n})([\"display:flex;flex-direction:column;\"]);\nvar RedText = styled.span.withConfig({\n  displayName: \"AllQuestionsChecklist__RedText\",\n  componentId: \"sc-1m6wlb4-3\"\n})([\"color:red;\"]);\nexport default function AllQuestionsCheckList(_ref) {\n  var groupCreator = _ref.groupCreator,\n      allQuestions = _ref.allQuestions,\n      hasMissingQuestions = _ref.hasMissingQuestions,\n      queueId = _ref.queueId,\n      onStartCall = _ref.onStartCall;\n\n  var _useState = useState(new Set()),\n      checkedQuestions = _useState[0],\n      setCheckedQuestions = _useState[1];\n\n  var _useTAInQueueInfo = useTAInQueueInfo(queueId),\n      isCheckedIn = _useTAInQueueInfo.isCheckedIn,\n      isHelping = _useTAInQueueInfo.isHelping;\n\n  var _ref2 = function () {\n    if (!isCheckedIn) {\n      return [false, \"You must check in to help students!\"];\n    } else if (isHelping) {\n      return [false, \"You are already helping a student\"];\n    } else {\n      return [true, \"Create Group & Call\"];\n    }\n  }(),\n      _ref3 = _slicedToArray(_ref2, 2),\n      canHelp = _ref3[0],\n      helpTooltip = _ref3[1];\n\n  var defaultMessage = useDefaultMessage();\n\n  var onQuestionChecked = function onQuestionChecked(q) {\n    if (!checkedQuestions.has(q.id)) {\n      setCheckedQuestions(new Set(checkedQuestions.add(q.id)));\n    } else {\n      checkedQuestions[\"delete\"](q.id);\n      setCheckedQuestions(new Set(checkedQuestions));\n    }\n  };\n\n  var onToggleSelectAll = function onToggleSelectAll(e) {\n    if (e.target.checked) {\n      setCheckedQuestions(new Set(allQuestions.map(function (q) {\n        return q.id;\n      })));\n    } else {\n      setCheckedQuestions(new Set());\n    }\n  };\n\n  var usersInLink = allQuestions.filter(function (question) {\n    return checkedQuestions.has(question.id);\n  }).map(function (question) {\n    return question.creator.email;\n  }).join(\",\");\n  var openTeams = useTeams(queueId, usersInLink, defaultMessage);\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(Header, {\n      children: [/*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"strong\", {\n          children: \"\".concat(groupCreator.name, \"'s Group Session\")\n        }), /*#__PURE__*/_jsxs(Description, {\n          children: [\"Select Students to Create Group\", hasMissingQuestions ? /*#__PURE__*/_jsxs(\"div\", {\n            children: [/*#__PURE__*/_jsx(RedText, {\n              children: \"Note:\"\n            }), \" some students may not show up, as they did not consent to being grouped\"]\n          }) : null]\n        })]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(Tooltip, {\n          title: helpTooltip,\n          children: /*#__PURE__*/_jsx(\"span\", {\n            children: /*#__PURE__*/_jsx(BannerPrimaryButton, {\n              icon: /*#__PURE__*/_jsx(PhoneOutlined, {}),\n              onClick: function onClick() {\n                API.questions.group({\n                  questionIds: Array.from(checkedQuestions),\n                  queueId: queueId\n                });\n                onStartCall();\n                openTeams();\n              },\n              disabled: !canHelp || checkedQuestions.size === 0,\n              \"data-cy\": \"help-student\"\n            })\n          })\n        })\n      })]\n    }), /*#__PURE__*/_jsx(SelectAllContainer, {\n      children: /*#__PURE__*/_jsx(Checkbox, {\n        checked: allQuestions.length === checkedQuestions.size,\n        indeterminate: checkedQuestions.size && checkedQuestions.size !== allQuestions.length,\n        onChange: onToggleSelectAll,\n        children: /*#__PURE__*/_jsx(\"span\", {\n          style: {\n            paddingLeft: \"9px\"\n          },\n          children: \"Select All\"\n        })\n      })\n    }), /*#__PURE__*/_jsx(QuestionsList, {\n      children: allQuestions.map(function (q, i) {\n        return /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(TAQueueListItem, {\n            question: q,\n            index: i + 1,\n            selected: checkedQuestions.has(q.id),\n            onClick: function onClick() {\n              return onQuestionChecked(q);\n            },\n            showCheckbox: true\n          })\n        }, q.id);\n      })\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}