{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _defineProperty from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport { API } from \"@koh/api-client\";\nimport { Button, message, Switch, Table } from \"antd\";\nimport React from \"react\";\nimport styled from \"styled-components\";\nimport useSWR from \"swr\";\nimport { useCourse } from \"../../hooks/useCourse\";\nimport AddOverrideInput from \"./AddOverrideInput\";\nvar Column = Table.Column;\nvar OverrideContents = styled.div.withConfig({\n  displayName: \"CourseOverrideSettings__OverrideContents\",\n  componentId: \"sc-18esdfc-0\"\n})([\"margin-left:auto;margin-right:auto;padding-top:50px;\"]);\nexport default function CourseOverrideSettings(_ref) {\n  var courseId = _ref.courseId;\n\n  var _useSWR = useSWR(\"/api/v1/courses/course_override\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            return _context.abrupt(\"return\", API.course.getCourseOverrides(courseId));\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }))),\n      data = _useSWR.data,\n      mutate = _useSWR.mutate;\n\n  var _useCourse = useCourse(courseId),\n      course = _useCourse.course,\n      mutateCourse = _useCourse.mutateCourse;\n\n  var formattedRoles = {\n    student: \"Student\",\n    ta: \"TA\",\n    professor: \"Professor\"\n  };\n  return /*#__PURE__*/_jsxs(OverrideContents, {\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      children: \"Course Overrides\"\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(AddOverrideInput, {\n      courseId: courseId,\n      onAddOverride: function onAddOverride() {\n        return mutate();\n      }\n    }), /*#__PURE__*/_jsxs(Table, {\n      dataSource: data === null || data === void 0 ? void 0 : data.data.map(function (row, i) {\n        return _objectSpread(_objectSpread({}, row), {}, {\n          key: i,\n          role: formattedRoles[row.role]\n        });\n      }),\n      children: [/*#__PURE__*/_jsx(Column, {\n        title: \"Name\",\n        dataIndex: \"name\"\n      }, \"name\"), /*#__PURE__*/_jsx(Column, {\n        title: \"Email\",\n        dataIndex: \"email\"\n      }, \"email\"), /*#__PURE__*/_jsx(Column, {\n        title: \"Role\",\n        dataIndex: \"role\"\n      }, \"role\"), /*#__PURE__*/_jsx(Column, {\n        title: \"Delete\",\n        render: function render(text, record) {\n          return /*#__PURE__*/_jsx(Button, {\n            onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n              return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      _context2.next = 2;\n                      return API.course.deleteOverride(courseId, {\n                        email: record.email,\n                        role: record.role\n                      });\n\n                    case 2:\n                      message.success(\"Successfully deleted the override for \" + record.name);\n                      mutate();\n\n                    case 4:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, _callee2);\n            })),\n            type: \"link\",\n            style: {\n              textAlign: \"center\"\n            },\n            icon: /*#__PURE__*/_jsx(DeleteOutlined, {\n              style: {\n                color: \"red\"\n              }\n            })\n          });\n        }\n      }, \"delete\")]\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsxs(\"div\", {\n      children: [\"Is Khoury Admin/Banner down? Toggle this to temporarily allow students to join your class.\", \" \", /*#__PURE__*/_jsx(Switch, {\n        onChange: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return API.course.toggleSelfEnroll(courseId);\n\n                case 2:\n                  mutateCourse();\n\n                case 3:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        })),\n        defaultChecked: course === null || course === void 0 ? void 0 : course.selfEnroll\n      })]\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"b\", {\n      children: \"You must manually toggle this feature off later, or any student will be allowed to join your class.\"\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}