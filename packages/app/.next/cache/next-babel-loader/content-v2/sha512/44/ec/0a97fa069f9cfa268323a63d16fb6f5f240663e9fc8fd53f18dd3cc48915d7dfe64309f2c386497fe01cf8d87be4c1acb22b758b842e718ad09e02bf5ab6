{"ast":null,"code":"import _slicedToArray from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport Router from \"next/router\";\nimport { useLocalStorage } from \"./useLocalStorage\";\nimport { useProfile } from \"./useProfile\";\n/**\n * Redirect user to the course apply page if they are a prof with pending courses,\n * or to the today page for their default course.\n */\n\nexport function useHomePageRedirect() {\n  var profile = useProfile();\n\n  var _useLocalStorage = useLocalStorage(\"defaultCourse\", null),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 1),\n      defaultCourse = _useLocalStorage2[0];\n\n  if (profile && profile.pendingCourses && profile.pendingCourses.length > 0) {\n    Router.push(\"/apply\");\n    return true;\n  }\n\n  if (profile && profile.courses.length > 0) {\n    /// defaultCourse can get out-of-sync with the user's actual registered course (dropped class etc)\n    var isUserInDefaultCourse = !!defaultCourse && profile.courses.some(function (c) {\n      return c.course.id === (defaultCourse === null || defaultCourse === void 0 ? void 0 : defaultCourse.id);\n    });\n    Router.push(\"/course/[cid]/today\", \"/course/\".concat(isUserInDefaultCourse ? defaultCourse.id : profile.courses[0].course.id, \"/today\"));\n    return true;\n  }\n\n  return false;\n}","map":null,"metadata":{},"sourceType":"module"}