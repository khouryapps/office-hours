{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { StopOutlined } from \"@ant-design/icons\";\nimport { Button, Card, Input, Row, Skeleton, Tooltip } from \"antd\";\nimport Linkify from \"react-linkify\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { formatQueueTime } from \"../../utils/TimeUtil\";\nimport { KOHAvatar } from \"../common/SelfAvatar\";\nconst PaddedCard = styled(Card).withConfig({\n  displayName: \"OpenQueueCard__PaddedCard\",\n  componentId: \"sc-pissyg-0\"\n})([\"margin-top:32px;margin-bottom:25px;border-radius:6px;box-shadow:0px 2px 8px rgba(0,0,0,0.15);\"]);\nconst HeaderDiv = styled.div.withConfig({\n  displayName: \"OpenQueueCard__HeaderDiv\",\n  componentId: \"sc-pissyg-1\"\n})([\"font-size:24px;font-weight:500;color:#212934;\"]);\nconst QueueInfoRow = styled.div.withConfig({\n  displayName: \"OpenQueueCard__QueueInfoRow\",\n  componentId: \"sc-pissyg-2\"\n})([\"display:flex;flex-direction:row;justify-content:space-between;\"]);\nconst RightQueueInfoRow = styled.div.withConfig({\n  displayName: \"OpenQueueCard__RightQueueInfoRow\",\n  componentId: \"sc-pissyg-3\"\n})([\"display:flex;flex-direction:row;align-items:center;\"]);\nconst QuestionNumberSpan = styled.span.withConfig({\n  displayName: \"OpenQueueCard__QuestionNumberSpan\",\n  componentId: \"sc-pissyg-4\"\n})([\"font-size:24px;\"]);\nconst QueueSizeColorDiv = styled.div.withConfig({\n  displayName: \"OpenQueueCard__QueueSizeColorDiv\",\n  componentId: \"sc-pissyg-5\"\n})([\"color:#212934;font-size:16px;\"]);\nconst HeaderText = styled.div.withConfig({\n  displayName: \"OpenQueueCard__HeaderText\",\n  componentId: \"sc-pissyg-6\"\n})([\"font-size:14px;line-height:22px;font-weight:600;color:#bfbfbf;font-variant:small-caps;margin-bottom:8px;\"]);\nconst OpenQueueButton = styled(Button).withConfig({\n  displayName: \"OpenQueueCard__OpenQueueButton\",\n  componentId: \"sc-pissyg-7\"\n})([\"background-color:#3684c6;border-radius:6px;color:white;font-weight:500;font-size:14px;margin-left:16px;\"]);\nconst EditNotesButton = styled(Button).withConfig({\n  displayName: \"OpenQueueCard__EditNotesButton\",\n  componentId: \"sc-pissyg-8\"\n})([\"border-radius:6px;font-size:14px;font-weight:500;\"]);\nconst SaveButton = styled(Button).withConfig({\n  displayName: \"OpenQueueCard__SaveButton\",\n  componentId: \"sc-pissyg-9\"\n})([\"background:#2a9187;border-radius:6px;color:white;font-weight:500;font-size:14px;\"]);\nconst NotesInput = styled(Input.TextArea).withConfig({\n  displayName: \"OpenQueueCard__NotesInput\",\n  componentId: \"sc-pissyg-10\"\n})([\"border-radius:6px;border:1px solid #b8c4ce;\"]);\nconst Notes = styled.div.withConfig({\n  displayName: \"OpenQueueCard__Notes\",\n  componentId: \"sc-pissyg-11\"\n})([\"overflow-wrap:break-word;white-space:pre-wrap;\"]);\nconst StyledKOHAvatar = styled(KOHAvatar).withConfig({\n  displayName: \"OpenQueueCard__StyledKOHAvatar\",\n  componentId: \"sc-pissyg-12\"\n})([\"margin-right:25px;margin-top:10px;\"]);\nconst QueueCardButtonRow = styled(Row).withConfig({\n  displayName: \"OpenQueueCard__QueueCardButtonRow\",\n  componentId: \"sc-pissyg-13\"\n})([\"padding-top:10px;\"]);\n\nconst OpenQueueCard = ({\n  queue,\n  isTA,\n  updateQueueNotes\n}) => {\n  const {\n    0: editingNotes,\n    1: setEditingNotes\n  } = useState(false);\n  const {\n    0: updatedNotes,\n    1: setUpdatedNotes\n  } = useState(queue.notes);\n  const router = useRouter();\n  const {\n    cid\n  } = router.query;\n  const staffList = queue.staffList;\n\n  const handleUpdate = () => {\n    setEditingNotes(false);\n    updateQueueNotes(queue, updatedNotes);\n  };\n\n  return /*#__PURE__*/_jsxs(PaddedCard, {\n    headStyle: {\n      background: \"#F3F5F7\"\n    },\n    className: \"open-queue-card\",\n    title: staffList.map(staffMember => staffMember.name).join(\", \") || \"No Staff Checked In!\",\n    extra: queue.startTime && queue.endTime && formatQueueTime(queue),\n    children: [/*#__PURE__*/_jsxs(QueueInfoRow, {\n      children: [/*#__PURE__*/_jsx(HeaderDiv, {\n        children: queue.room\n      }), /*#__PURE__*/_jsxs(RightQueueInfoRow, {\n        children: [!queue.allowQuestions && /*#__PURE__*/_jsx(Tooltip, {\n          title: \"This queue is no longer accepting questions\",\n          children: /*#__PURE__*/_jsx(StopOutlined, {\n            style: {\n              color: \"red\",\n              fontSize: \"24px\",\n              marginRight: \"8px\"\n            }\n          })\n        }), /*#__PURE__*/_jsxs(QueueSizeColorDiv, {\n          children: [/*#__PURE__*/_jsx(QuestionNumberSpan, {\n            children: queue.queueSize\n          }), \" in queue\"]\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(\"br\", {}), editingNotes ? /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(HeaderText, {\n        children: \"staff notes\"\n      }), /*#__PURE__*/_jsx(NotesInput, {\n        defaultValue: queue.notes,\n        value: updatedNotes,\n        onChange: e => setUpdatedNotes(e.target.value)\n      })]\n    }) : queue.notes && /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(HeaderText, {\n        style: {\n          marginBottom: 0\n        },\n        children: \"staff notes\"\n      }), /*#__PURE__*/_jsx(Linkify, {\n        componentDecorator: (decoratedHref, decoratedText, key) => /*#__PURE__*/_jsx(\"a\", {\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          href: decoratedHref,\n          children: decoratedText\n        }, key),\n        children: /*#__PURE__*/_jsx(Notes, {\n          children: queue.notes\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"br\", {}), staffList.length > 1 && /*#__PURE__*/_jsx(HeaderText, {\n      children: \"checked-in staff\"\n    })\n    /*todo: add better text*/\n    , /*#__PURE__*/_jsxs(Row, {\n      justify: \"space-between\",\n      align: \"bottom\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        children: staffList.map(staffMember => /*#__PURE__*/_jsx(Tooltip, {\n          title: staffMember.name,\n          children: /*#__PURE__*/_jsx(StyledKOHAvatar, {\n            size: 96,\n            photoURL: staffMember.photoURL,\n            name: staffMember.name\n          })\n        }, staffMember.id))\n      }), editingNotes && /*#__PURE__*/_jsx(SaveButton, {\n        onClick: handleUpdate,\n        size: \"large\",\n        children: \"Save Changes\"\n      }), !editingNotes && /*#__PURE__*/_jsxs(QueueCardButtonRow, {\n        children: [isTA && /*#__PURE__*/_jsx(EditNotesButton, {\n          size: \"large\",\n          onClick: () => {\n            setEditingNotes(true);\n          },\n          children: \"Edit Notes\"\n        }), /*#__PURE__*/_jsx(Link, {\n          href: \"/course/[cid]/queue/[qid]\",\n          as: `/course/${cid}/queue/${queue.id}`,\n          children: /*#__PURE__*/_jsx(OpenQueueButton, {\n            type: \"primary\",\n            size: \"large\",\n            \"data-cy\": \"open-queue-button\",\n            children: \"Open Queue\"\n          })\n        })]\n      })]\n    })]\n  });\n};\n\nexport default OpenQueueCard;\nexport function OpenQueueCardSkeleton() {\n  return /*#__PURE__*/_jsxs(PaddedCard, {\n    children: [/*#__PURE__*/_jsx(Skeleton, {\n      paragraph: {\n        rows: 2\n      }\n    }), /*#__PURE__*/_jsxs(Row, {\n      justify: \"space-between\",\n      align: \"bottom\",\n      children: [/*#__PURE__*/_jsx(Skeleton.Avatar, {\n        size: 96\n      }), /*#__PURE__*/_jsx(Skeleton.Button, {\n        size: \"large\"\n      })]\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}