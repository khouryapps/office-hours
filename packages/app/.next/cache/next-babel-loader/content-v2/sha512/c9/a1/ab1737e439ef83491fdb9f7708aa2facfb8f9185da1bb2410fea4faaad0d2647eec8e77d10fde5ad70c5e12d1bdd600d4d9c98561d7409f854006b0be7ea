{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/source/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { API } from \"@koh/api-client\";\nimport { Role } from \"@koh/common\";\nimport { Input, Modal, Radio } from \"antd\";\nimport { useRouter } from \"next/router\";\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useCourse } from \"../../hooks/useCourse\";\nimport { useProfile } from \"../../hooks/useProfile\";\nimport { useRoleInCourse } from \"../../hooks/useRoleInCourse\";\nimport TACheckinButton, { CheckinButton } from \"./TACheckinButton\";\nvar ProfessorModalRadio = styled(Radio).withConfig({\n  displayName: \"ProfessorCheckinButton__ProfessorModalRadio\",\n  componentId: \"sc-dqhp9z-0\"\n})([\"display:block;height:30px;lineheight:30px;\"]);\nexport default function TodayPageCheckinButton() {\n  var profile = useProfile();\n\n  var _useState = useState(false),\n      modalVisible = _useState[0],\n      setModalVisible = _useState[1];\n\n  var _useState2 = useState(0),\n      queueToCheckInto = _useState2[0],\n      setQueueToCheckInto = _useState2[1];\n\n  var router = useRouter();\n  var cid = router.query.cid;\n\n  var _useCourse = useCourse(Number(cid)),\n      course = _useCourse.course;\n\n  var role = useRoleInCourse(Number(cid));\n  var queueCheckedIn = course === null || course === void 0 ? void 0 : course.queues.find(function (queue) {\n    return queue.staffList.find(function (staff) {\n      return staff.id === (profile === null || profile === void 0 ? void 0 : profile.id);\n    });\n  });\n\n  var _useState3 = useState(\"Professor \".concat(profile === null || profile === void 0 ? void 0 : profile.lastName, \"'s Office Hours\")),\n      queueToBeCreated = _useState3[0],\n      setQueueToBeCreated = _useState3[1];\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [modalVisible && /*#__PURE__*/_jsxs(Modal, {\n      title: \"Check-In To Office Hours\",\n      visible: modalVisible,\n      onCancel: function onCancel() {\n        return setModalVisible(false);\n      },\n      okText: \"Check In\",\n      onOk: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var redirectID;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!(queueToCheckInto > -1)) {\n                  _context.next = 6;\n                  break;\n                }\n\n                _context.next = 3;\n                return API.taStatus.checkIn(Number(cid), course === null || course === void 0 ? void 0 : course.queues[queueToCheckInto].room);\n\n              case 3:\n                redirectID = _context.sent;\n                _context.next = 9;\n                break;\n\n              case 6:\n                _context.next = 8;\n                return API.taStatus.checkIn(Number(cid), queueToBeCreated);\n\n              case 8:\n                redirectID = _context.sent;\n\n              case 9:\n                router.push(\"/course/[cid]/queue/[qid]\", \"/course/\".concat(Number(cid), \"/queue/\").concat(redirectID.id));\n\n              case 10:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      })),\n      children: [/*#__PURE__*/_jsx(\"h3\", {\n        children: \"Which queue would you like to check into?\"\n      }), /*#__PURE__*/_jsxs(Radio.Group, {\n        value: queueToCheckInto,\n        onChange: function onChange(e) {\n          return setQueueToCheckInto(e.target.value);\n        },\n        children: [course === null || course === void 0 ? void 0 : course.queues.map(function (q, i) {\n          return /*#__PURE__*/_jsx(ProfessorModalRadio, {\n            value: i,\n            children: q.room\n          }, q.id);\n        }), /*#__PURE__*/_jsxs(ProfessorModalRadio, {\n          value: -1,\n          children: [\"Other...\", queueToCheckInto === -1 ? /*#__PURE__*/_jsx(Input, {\n            defaultValue: \"Professor \".concat(profile.lastName, \"'s Office Hours\"),\n            onChange: function onChange(e) {\n              return setQueueToBeCreated(e.target.value);\n            },\n            style: {\n              width: 400,\n              marginLeft: 10\n            }\n          }) : null]\n        })]\n      })]\n    }), role === Role.TA && /*#__PURE__*/_jsx(TACheckinButton, {\n      courseId: Number(cid),\n      room: \"Online\",\n      state: queueCheckedIn ? \"CheckedIn\" : \"CheckedOut\"\n    }), !queueCheckedIn && role === Role.PROFESSOR && /*#__PURE__*/_jsx(CheckinButton, {\n      type: \"default\",\n      size: \"large\",\n      onClick: function onClick() {\n        return setModalVisible(true);\n      },\n      children: \"Check In\"\n    }), queueCheckedIn && role === Role.PROFESSOR && /*#__PURE__*/_jsx(TACheckinButton, {\n      courseId: Number(cid),\n      room: queueCheckedIn.room,\n      state: \"CheckedIn\"\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}