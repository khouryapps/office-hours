{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { SearchOutlined } from \"@ant-design/icons\";\nimport { API } from \"@koh/api-client\";\nimport { Role } from \"@koh/common\";\nimport { Alert, Divider, Input, List, Pagination, Spin } from \"antd\";\nimport Avatar from \"antd/lib/avatar/avatar\";\nimport { useState } from \"react\";\nimport styled from \"styled-components\";\nimport useSWR from \"swr\";\nconst CourseRosterComponent = styled.div.withConfig({\n  displayName: \"CourseRoster__CourseRosterComponent\",\n  componentId: \"sc-yj2eat-0\"\n})([\"margin-left:auto;margin-right:auto;\"]);\nconst TableBackground = styled.div.withConfig({\n  displayName: \"CourseRoster__TableBackground\",\n  componentId: \"sc-yj2eat-1\"\n})([\"background-color:white;\"]);\nexport default function CourseRoster({\n  courseId\n}) {\n  return /*#__PURE__*/_jsxs(CourseRosterComponent, {\n    children: [/*#__PURE__*/_jsx(\"h1\", {\n      children: \"Course Roster\"\n    }), /*#__PURE__*/_jsx(Alert, {\n      message: \"Notice\",\n      description: \"Please note that the roster will update as users log into the office hours app. There is no direct user synchronization with the Admin Portal.\",\n      type: \"warning\",\n      showIcon: true,\n      style: {\n        marginBottom: '16px'\n      }\n    }), /*#__PURE__*/_jsx(RenderTable, {\n      courseId: courseId,\n      role: Role.PROFESSOR,\n      listTitle: \"Professors\",\n      displaySearchBar: false,\n      searchPlaceholder: \"\"\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(RenderTable, {\n      courseId: courseId,\n      role: Role.TA,\n      listTitle: \"Teaching Assistants\",\n      displaySearchBar: true,\n      searchPlaceholder: \"Search TAs\"\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(RenderTable, {\n      courseId: courseId,\n      role: Role.STUDENT,\n      listTitle: \"Students\",\n      displaySearchBar: true,\n      searchPlaceholder: \"Search students\"\n    }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Divider, {})]\n  });\n}\n\nfunction RenderTable({\n  courseId,\n  role,\n  listTitle,\n  displaySearchBar,\n  searchPlaceholder\n}) {\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n  const {\n    0: input,\n    1: setInput\n  } = useState(\"\");\n  const {\n    0: search,\n    1: setSearch\n  } = useState(\"\");\n\n  const handleInput = event => {\n    event.preventDefault();\n    setInput(event.target.value);\n  };\n\n  const handleSearch = event => {\n    event.preventDefault();\n    setSearch(event.target.value);\n    setPage(1);\n  };\n\n  const {\n    data\n  } = useSWR(`${role}/${page}/${search}`, async () => await API.course.getUserInfo(courseId, page, role, search));\n\n  if (!data) {\n    return /*#__PURE__*/_jsx(Spin, {\n      tip: \"Loading...\",\n      size: \"large\"\n    });\n  } else {\n    return /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsxs(TableBackground, {\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          style: {\n            backgroundColor: \"#f0f0f0\",\n            height: \"56px\"\n          },\n          children: /*#__PURE__*/_jsx(\"h3\", {\n            style: {\n              position: \"relative\",\n              left: \"10px\",\n              top: \"14px\"\n            },\n            children: listTitle\n          })\n        }), displaySearchBar && /*#__PURE__*/_jsx(Input, {\n          placeholder: searchPlaceholder,\n          prefix: /*#__PURE__*/_jsx(SearchOutlined, {}),\n          value: input,\n          onChange: handleInput,\n          onPressEnter: handleSearch\n        }), /*#__PURE__*/_jsx(List, {\n          dataSource: data.users,\n          renderItem: item => /*#__PURE__*/_jsxs(List.Item, {\n            children: [/*#__PURE__*/_jsx(List.Item.Meta, {\n              avatar: /*#__PURE__*/_jsx(Avatar, {\n                src: item.photoURL\n              }),\n              title: item.name\n            }), /*#__PURE__*/_jsx(\"div\", {\n              children: item.email\n            })]\n          }, item.id),\n          bordered: true\n        })]\n      }), /*#__PURE__*/_jsx(\"br\", {}), data.total > 50 && /*#__PURE__*/_jsx(Pagination, {\n        style: {\n          float: \"right\"\n        },\n        current: page,\n        pageSize: 50,\n        total: data.total,\n        onChange: page => setPage(page),\n        showSizeChanger: false\n      })]\n    });\n  }\n}","map":null,"metadata":{},"sourceType":"module"}